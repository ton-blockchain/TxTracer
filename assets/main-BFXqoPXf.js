const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./index-BxDUz3AG.js","./Badge-CmIHGBwL.js","./ton-vendor-BkcVSvwD.js","./ton-assembly-nn7KYO_c.js","./ton-sandbox-uER9kMRK.js","./Badge-DTFoUNfN.css","./monaco-editor-core-BNZEfIW9.js","./monaco-editor-core-GL-q52Lm.css","./error-codes-B36bHDJL.js","./index-CiNhpJcB.css","./index-Dx-iE75L.js","./index-C81VZMOn.css"])))=>i.map(i=>d[i]);
import{j as e,r as m,i as Oe,R as J,k as qe,l as Ge,B as te,m as pe,e as je,n as Ke,a as le,u as Ue,o as Je,p as Ze,q as re,s as Ye,I as G,F as Qe,t as Xe,v as et,b as tt,G as at,T as st,H as nt,P as ot}from"./Badge-CmIHGBwL.js";import{_ as ve}from"./monaco-editor-core-BNZEfIW9.js";import{C as it,a as lt,u as rt,n as ce,t as ct,b as dt}from"./useTraceStepper-Dzfr0cxf.js";import{S as U}from"./StatusBadge-DZW4WRCK.js";import{f as z,a as f,E as ut,b as R,g as ht,c as Q,s as de}from"./actions-CPc7R0CB.js";import"./ton-vendor-BkcVSvwD.js";import"./ton-assembly-nn7KYO_c.js";import"./ton-sandbox-uER9kMRK.js";import"./error-codes-B36bHDJL.js";const mt="_addressValue_pwqhv_1",xt="_copyIcon_pwqhv_26",ue={addressValue:mt,copyIcon:xt},M=({address:t,className:i})=>{const n=`${ue.addressValue} ${i??""}`.trim();return e.jsxs("span",{className:n,title:t,children:[t,e.jsx(it,{className:ue.copyIcon,title:"Copy address",value:t})]})},_t="_transactionDetailsContainer_9whhp_1",Ct="_detailRow_9whhp_23",pt="_detailLabel_9whhp_47",jt="_detailValue_9whhp_62",vt="_detailValueFull_9whhp_71 _detailValue_9whhp_62",gt="_gasValue_9whhp_83",Nt="_currencyValue_9whhp_88",yt="_timestampValue_9whhp_98",wt="_timestampDetailSecondary_9whhp_102",ft="_numberValue_9whhp_106",bt="_booleanTrue_9whhp_109",It="_booleanFalse_9whhp_114",St="_hashValue_9whhp_119",kt="_multiColumnRow_9whhp_144",Lt="_multiColumnItem_9whhp_151",Tt="_multiColumnItemTitle_9whhp_168",Vt="_multiColumnItemValue_9whhp_175",Mt="_labeledSectionRow_9whhp_181",Rt="_labeledSectionTitle_9whhp_189",Ht="_labeledSectionContent_9whhp_204",s={transactionDetailsContainer:_t,detailRow:Ct,detailLabel:pt,detailValue:jt,detailValueFull:vt,gasValue:gt,currencyValue:Nt,timestampValue:yt,timestampDetailSecondary:wt,numberValue:ft,booleanTrue:bt,booleanFalse:It,hashValue:St,multiColumnRow:kt,multiColumnItem:Lt,multiColumnItemTitle:Tt,multiColumnItemValue:Vt,labeledSectionRow:Mt,labeledSectionTitle:Rt,labeledSectionContent:Ht},he=t=>{if(t===void 0)return"—";const i=typeof t=="string"?new Date(t):new Date(t*1e3),n=H=>H.toString().padStart(2,"0"),d=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],o=i.getDate(),x=i.getMonth(),r=x+1,c=i.getFullYear(),h=i.getHours(),b=i.getMinutes(),N=i.getSeconds(),y=`${n(o)}.${n(r)}.${c}, ${n(h)}:${n(b)}:${n(N)}`,g=`${n(o)} ${d[x]}, ${n(h)}:${n(b)}`;return e.jsxs(e.Fragment,{children:[y,e.jsxs("span",{className:s.timestampDetailSecondary,children:[" — ",g]})]})},$t=({result:t})=>{const i=c=>e.jsx("span",{className:c?s.booleanTrue:s.booleanFalse,children:c?"Yes":"No"}),n=t.emulatedTx,d=t.money,o=n.computeInfo!=="skipped"&&n.computeInfo.success,x=n.computeInfo!=="skipped"?n.computeInfo.exitCode:void 0,r=o?"success":"failed";return e.jsxs("div",{className:s.transactionDetailsContainer,children:[e.jsxs("div",{className:s.detailRow,children:[e.jsx("div",{className:s.detailLabel,children:"Status"}),e.jsx("div",{className:s.detailValue,children:e.jsx(U,{type:r,exitCode:x})})]}),e.jsxs("div",{className:s.detailRow,children:[e.jsx("div",{className:s.detailLabel,children:"Account"}),e.jsx("div",{className:s.detailValue,children:e.jsx(M,{address:z(t.inMsg.contract)})})]}),t.inMsg.sender&&e.jsxs("div",{className:s.detailRow,children:[e.jsx("div",{className:s.detailLabel,children:"Sender"}),e.jsx("div",{className:s.detailValue,children:e.jsx(M,{address:z(t.inMsg.sender)})})]}),e.jsxs("div",{className:s.detailRow,children:[e.jsx("div",{className:s.detailLabel,children:"Time"}),e.jsx("div",{className:`${s.detailValue} ${s.timestampValue}`,children:he(n.utime)})]}),e.jsxs("div",{className:s.detailRow,children:[e.jsx("div",{className:s.detailLabel,children:"LT"}),e.jsx("div",{className:`${s.detailValue} ${s.numberValue}`,children:String(n.lt)})]}),t.inMsg.amount&&e.jsxs("div",{className:s.detailRow,children:[e.jsx("div",{className:s.detailLabel,children:"Amount In"}),e.jsx("div",{className:`${s.detailValue} ${s.currencyValue}`,children:f(t.inMsg.amount)})]}),e.jsxs("div",{className:s.labeledSectionRow,children:[e.jsx("div",{className:s.labeledSectionTitle,children:"Fees & Balance"}),e.jsx("div",{className:s.labeledSectionContent,children:e.jsxs("div",{className:s.multiColumnRow,children:[e.jsxs("div",{className:s.multiColumnItem,children:[e.jsx("div",{className:s.multiColumnItemTitle,children:"Balance before"}),e.jsx("div",{className:`${s.multiColumnItemValue} ${s.currencyValue}`,children:f(d.balanceBefore)})]}),e.jsxs("div",{className:s.multiColumnItem,children:[e.jsx("div",{className:s.multiColumnItemTitle,children:"Amount Sent (Total)"}),e.jsx("div",{className:`${s.multiColumnItemValue} ${s.currencyValue}`,children:f(d.sentTotal)})]}),e.jsxs("div",{className:s.multiColumnItem,children:[e.jsx("div",{className:s.multiColumnItemTitle,children:"Total Fee"}),e.jsx("div",{className:`${s.multiColumnItemValue} ${s.currencyValue}`,children:f(d.totalFees)})]}),e.jsxs("div",{className:s.multiColumnItem,children:[e.jsx("div",{className:s.multiColumnItemTitle,children:"Gas Fee"}),e.jsx("div",{className:`${s.multiColumnItemValue} ${s.gasValue} ${s.currencyValue}`,children:n.computeInfo!=="skipped"?f(n.computeInfo.gasFees):"N/A"})]}),e.jsxs("div",{className:s.multiColumnItem,children:[e.jsx("div",{className:s.multiColumnItemTitle,children:"Balance after"}),e.jsx("div",{className:`${s.multiColumnItemValue} ${s.currencyValue}`,children:f(d.balanceAfter)})]})]})})]}),e.jsxs("div",{className:s.labeledSectionRow,children:[e.jsx("div",{className:s.labeledSectionTitle,children:"Compute Phase"}),e.jsx("div",{className:s.labeledSectionContent,children:n.computeInfo==="skipped"?e.jsx("div",{className:s.detailValueFull,children:"Skipped"}):e.jsxs("div",{className:s.multiColumnRow,children:[e.jsxs("div",{className:s.multiColumnItem,children:[e.jsx("div",{className:s.multiColumnItemTitle,children:"Success"}),e.jsx("div",{className:`${s.multiColumnItemValue} ${n.computeInfo.success?s.booleanTrue:s.booleanFalse}`,children:i(n.computeInfo.success)})]}),e.jsxs("div",{className:s.multiColumnItem,children:[e.jsx("div",{className:s.multiColumnItemTitle,children:"Exit code"}),e.jsx("div",{className:`${s.multiColumnItemValue} ${s.numberValue}`,children:e.jsx(ut,{exitCode:n.computeInfo.exitCode})})]}),e.jsxs("div",{className:s.multiColumnItem,children:[e.jsx("div",{className:s.multiColumnItemTitle,children:"VM steps"}),e.jsx("div",{className:`${s.multiColumnItemValue} ${s.numberValue}`,children:R(n.computeInfo.vmSteps)})]}),e.jsxs("div",{className:s.multiColumnItem,children:[e.jsx("div",{className:s.multiColumnItemTitle,children:"Gas used"}),e.jsx("div",{className:`${s.multiColumnItemValue} ${s.gasValue}`,children:R(n.computeInfo.gasUsed)})]}),e.jsxs("div",{className:s.multiColumnItem,children:[e.jsx("div",{className:s.multiColumnItemTitle,children:"Gas fees"}),e.jsx("div",{className:`${s.multiColumnItemValue} ${s.gasValue} ${s.currencyValue}`,children:f(n.computeInfo.gasFees)})]})]})})]}),e.jsxs("div",{className:s.labeledSectionRow,children:[e.jsx("div",{className:s.labeledSectionTitle,children:"Action Phase"}),e.jsx("div",{className:s.labeledSectionContent,children:e.jsxs("div",{className:s.multiColumnRow,children:[e.jsxs("div",{className:s.multiColumnItem,children:[e.jsx("div",{className:s.multiColumnItemTitle,children:"Success"}),e.jsx("div",{className:`${s.multiColumnItemValue} ${o?s.booleanTrue:s.booleanFalse}`,children:i(o)})]}),e.jsxs("div",{className:s.multiColumnItem,children:[e.jsx("div",{className:s.multiColumnItemTitle,children:"Total actions"}),e.jsx("div",{className:`${s.multiColumnItemValue} ${s.numberValue}`,children:R(n.actions.length)})]})]})})]}),t.emulatorVersion&&e.jsxs("div",{className:s.labeledSectionRow,children:[e.jsx("div",{className:s.labeledSectionTitle,children:"Meta"}),e.jsx("div",{className:s.labeledSectionContent,children:e.jsxs("div",{className:s.multiColumnRow,children:[e.jsxs("div",{className:s.multiColumnItem,children:[e.jsx("div",{className:s.multiColumnItemTitle,children:"Emulator Version"}),e.jsx("div",{className:`${s.multiColumnItemValue} ${s.hashValue}`,children:t.emulatorVersion.commitHash.substring(0,7)})]}),e.jsxs("div",{className:s.multiColumnItem,children:[e.jsx("div",{className:s.multiColumnItemTitle,children:"Emulator Date"}),e.jsx("div",{className:`${s.multiColumnItemValue} ${s.timestampValue}`,children:he(t.emulatorVersion?.commitDate)})]})]})})]})]})},Bt="_noActions_10i5u_1",Dt="_actionsHorizontalList_10i5u_7",Et="_actionSendMsg_10i5u_49 _actionCardBase_10i5u_30",Ft="_actionSetCode_10i5u_53 _actionCardBase_10i5u_30",zt="_actionReserve_10i5u_57 _actionCardBase_10i5u_30",At="_actionChangeLibrary_10i5u_61 _actionCardBase_10i5u_30",Wt="_actionUnknown_10i5u_65 _actionCardBase_10i5u_30",Pt="_actionCardIconSendMsg_10i5u_80 _actionCardIcon_10i5u_69",Ot="_actionCardIconSetCode_10i5u_84 _actionCardIcon_10i5u_69",qt="_actionCardIconReserve_10i5u_88 _actionCardIcon_10i5u_69",Gt="_actionCardIconChangeLibrary_10i5u_92 _actionCardIcon_10i5u_69",Kt="_actionCardIconUnknown_10i5u_96 _actionCardIcon_10i5u_69",Ut="_actionCardContent_10i5u_101",Jt="_actionCardTitle_10i5u_108",Zt="_actionCardDescription_10i5u_115",Yt="_actionCardValue_10i5u_123",Qt="_actionCardView_10i5u_130",Xt="_viewActionBtn_10i5u_137",p={noActions:Bt,actionsHorizontalList:Dt,actionSendMsg:Et,actionSetCode:Ft,actionReserve:zt,actionChangeLibrary:At,actionUnknown:Wt,actionCardIconSendMsg:Pt,actionCardIconSetCode:Ot,actionCardIconReserve:qt,actionCardIconChangeLibrary:Gt,actionCardIconUnknown:Kt,actionCardContent:Ut,actionCardTitle:Jt,actionCardDescription:Zt,actionCardValue:Yt,actionCardView:Qt,viewActionBtn:Xt},ea=t=>{switch(t){case"sendMsg":return p.actionCardIconSendMsg;case"setCode":return p.actionCardIconSetCode;case"reserve":return p.actionCardIconReserve;case"changeLibrary":return p.actionCardIconChangeLibrary;default:return p.actionCardIconUnknown}},ta=t=>{switch(t){case"sendMsg":return p.actionSendMsg;case"setCode":return p.actionSetCode;case"reserve":return p.actionReserve;case"changeLibrary":return p.actionChangeLibrary;default:return p.actionUnknown}},aa=({actions:t,onSelect:i})=>t.length===0?e.jsx("p",{className:p.noActions,children:"No out actions."}):e.jsx("div",{className:p.actionsHorizontalList,children:t.map((n,d)=>{const o=ht(n),x=h=>{(h.key==="Enter"||h.key===" ")&&i(d)},r=ta(n.type),c=ea(n.type);return e.jsxs("div",{className:r,onClick:()=>i(d),onKeyDown:x,role:"button",tabIndex:0,children:[e.jsxs("div",{className:p.actionCardContent,children:[e.jsxs("div",{className:c,children:[n.type==="sendMsg"&&e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("path",{d:"M22 2L11 13",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("path",{d:"M22 2L15 22L11 13L2 9L22 2Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]}),n.type==="setCode"&&e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("path",{d:"M16 18L22 12L16 6",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("path",{d:"M8 6L2 12L8 18",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]}),n.type==="reserve"&&e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("path",{d:"M12 1V23",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("path",{d:"M17 5H9.5C8.57174 5 7.6815 5.36875 7.02513 6.02513C6.36875 6.6815 6 7.57174 6 8.5C6 9.42826 6.36875 10.3185 7.02513 10.9749C7.6815 11.6313 8.57174 12 9.5 12H14.5C15.4283 12 16.3185 12.3687 16.9749 13.0251C17.6313 13.6815 18 14.5717 18 15.5C18 16.4283 17.6313 17.3185 16.9749 17.9749C16.3185 18.6313 15.4283 19 14.5 19H6",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]})]}),e.jsx("div",{className:p.actionCardTitle,children:o.title}),e.jsx("div",{className:p.actionCardDescription,children:o.description}),o.value&&e.jsx("div",{className:p.actionCardValue,children:o.value})]}),e.jsx("div",{className:p.actionCardView,children:e.jsxs("button",{className:p.viewActionBtn,children:["View Details",e.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{d:"M15 12L9 8V16L15 12Z",fill:"currentColor",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})]})})]},d)})}),sa="_modalOverlay_1bphz_1",na="_modalContent_1bphz_15",me={modalOverlay:sa,modalContent:na},oa=({open:t,onClose:i,children:n,contentClassName:d})=>{if(m.useEffect(()=>{const r=c=>{c.key==="Escape"&&i()};return t&&document.addEventListener("keydown",r),()=>{document.removeEventListener("keydown",r)}},[t,i]),!t)return null;const o=r=>{(r.key==="Enter"||r.key===" ")&&i()},x=`${me.modalContent} ${d||""}`.trim();return e.jsx("div",{className:me.modalOverlay,onClick:i,onKeyDown:o,role:"button",tabIndex:0,"aria-label":"Close modal",children:e.jsx("div",{className:x,onClick:r=>r.stopPropagation(),children:n})})},ia="_actionModalHeader_ewm9s_1",la="_actionHeaderSendMsg_ewm9s_10 _actionModalHeader_ewm9s_1",ra="_actionHeaderSetCode_ewm9s_16 _actionModalHeader_ewm9s_1",ca="_actionHeaderReserve_ewm9s_22 _actionModalHeader_ewm9s_1",da="_modalTitleContent_ewm9s_34",ua="_modalTitleMain_ewm9s_39",ha="_modalTitleSub_ewm9s_45",ma="_actionModalHeaderIcon_ewm9s_60",xa="_actionModalHeaderIconContainerSendMsg_ewm9s_81 _actionModalHeaderIconContainerBase_ewm9s_64",_a="_actionModalHeaderIconContainerSetCode_ewm9s_86 _actionModalHeaderIconContainerBase_ewm9s_64",Ca="_actionModalHeaderIconContainerReserve_ewm9s_91 _actionModalHeaderIconContainerBase_ewm9s_64",pa="_actionModalHeaderIconContainerChangeLibrary_ewm9s_96 _actionModalHeaderIconContainerBase_ewm9s_64",ja="_actionModalClose_ewm9s_106",va="_actionModalBody_ewm9s_129",ga="_actionItemCard_ewm9s_135",Na="_actionDetailsContent_ewm9s_142",ya="_actionDetailSection_ewm9s_144",wa="_detailRow_ewm9s_174",fa="_detailLabel_ewm9s_184",ba="_detailValue_ewm9s_198",Ia="_actionModalFullScreenContent_ewm9s_264",a={actionModalHeader:ia,actionHeaderSendMsg:la,actionHeaderSetCode:ra,actionHeaderReserve:ca,modalTitleContent:da,modalTitleMain:ua,modalTitleSub:ha,actionModalHeaderIcon:ma,actionModalHeaderIconContainerSendMsg:xa,actionModalHeaderIconContainerSetCode:_a,actionModalHeaderIconContainerReserve:Ca,actionModalHeaderIconContainerChangeLibrary:pa,actionModalClose:ja,actionModalBody:va,actionItemCard:ga,actionDetailsContent:Na,actionDetailSection:ya,detailRow:wa,detailLabel:fa,detailValue:ba,actionModalFullScreenContent:Ia},Sa=(t,i)=>{if(!t)return null;const n=t.src??i;return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:a.detailRow,children:[e.jsx("div",{className:a.detailLabel,children:"Type:"}),e.jsx("div",{className:a.detailValue,children:t.type})]}),t.type==="internal"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:a.detailRow,children:[e.jsx("div",{className:a.detailLabel,children:"Source:"}),e.jsx("div",{className:a.detailValue,children:n?e.jsx(M,{address:z(n)}):"unknown"})]}),e.jsxs("div",{className:a.detailRow,children:[e.jsx("div",{className:a.detailLabel,children:"Destination:"}),e.jsx("div",{className:a.detailValue,children:e.jsx(M,{address:z(t.dest)})})]}),e.jsxs("div",{className:a.detailRow,children:[e.jsx("div",{className:a.detailLabel,children:"Value:"}),e.jsx("div",{className:a.detailValue,children:f(t.value.coins)})]}),t.value.other&&Object.keys(t.value.other).length>0&&e.jsxs("div",{className:a.detailRow,children:[e.jsx("div",{className:a.detailLabel,children:"Other Currencies:"}),e.jsx("div",{className:a.detailValue,children:e.jsx("pre",{children:JSON.stringify(t.value.other,null,2)})})]}),e.jsxs("div",{className:a.detailRow,children:[e.jsx("div",{className:a.detailLabel,children:"Forward Fee:"}),e.jsx("div",{className:a.detailValue,children:f(t.forwardFee)})]}),e.jsxs("div",{className:a.detailRow,children:[e.jsx("div",{className:a.detailLabel,children:"IHR Fee:"}),e.jsx("div",{className:a.detailValue,children:f(t.ihrFee)})]}),e.jsxs("div",{className:a.detailRow,children:[e.jsx("div",{className:a.detailLabel,children:"Bounce:"}),e.jsx("div",{className:a.detailValue,children:Q(t.bounce)})]}),e.jsxs("div",{className:a.detailRow,children:[e.jsx("div",{className:a.detailLabel,children:"Bounced:"}),e.jsx("div",{className:a.detailValue,children:Q(t.bounced)})]}),e.jsxs("div",{className:a.detailRow,children:[e.jsx("div",{className:a.detailLabel,children:"IHR Disabled:"}),e.jsx("div",{className:a.detailValue,children:Q(t.ihrDisabled)})]})]}),t.type==="external-out"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:a.detailRow,children:[e.jsx("div",{className:a.detailLabel,children:"Source:"}),e.jsx("div",{className:a.detailValue,children:n?e.jsx(M,{address:z(n)}):"unknown"})]}),e.jsxs("div",{className:a.detailRow,children:[e.jsx("div",{className:a.detailLabel,children:"Destination:"}),e.jsx("div",{className:a.detailValue,children:t.dest?e.jsx(M,{address:z(t.dest)}):"unknown"})]})]}),e.jsxs("div",{className:a.detailRow,children:[e.jsx("div",{className:a.detailLabel,children:"Created LT:"}),e.jsx("div",{className:a.detailValue,children:R(t.createdLt)})]}),e.jsxs("div",{className:a.detailRow,children:[e.jsx("div",{className:a.detailLabel,children:"Created At:"}),e.jsx("div",{className:a.detailValue,children:t.createdAt})]})]})},ka=t=>t?e.jsxs("div",{className:a.actionDetailSection,children:[e.jsx("h4",{children:"State Init"}),t.code&&e.jsxs("div",{className:a.detailRow,children:[e.jsx("div",{className:a.detailLabel,children:"Code Hash:"}),e.jsx("div",{className:a.detailValue,children:t.code.hash().toString("hex")})]}),t.data&&e.jsxs("div",{className:a.detailRow,children:[e.jsx("div",{className:a.detailLabel,children:"Data Hash:"}),e.jsx("div",{className:a.detailValue,children:t.data.hash().toString("hex")})]}),t.splitDepth!==void 0&&e.jsxs("div",{className:a.detailRow,children:[e.jsx("div",{className:a.detailLabel,children:"Split Depth:"}),e.jsx("div",{className:a.detailValue,children:R(t.splitDepth)})]})]}):e.jsxs("div",{className:a.detailRow,children:[e.jsx("div",{className:a.detailLabel,children:"State Init:"}),e.jsx("div",{className:a.detailValue,children:"Not present"})]}),La=(t,i)=>{switch(t.type){case"sendMsg":return e.jsxs("div",{className:a.actionDetailsContent,children:[e.jsxs("div",{className:a.detailRow,children:[e.jsx("div",{className:a.detailLabel,children:"Mode:"}),e.jsx("div",{className:a.detailValue,children:R(t.mode)})]}),e.jsx("h4",{children:"Message Info:"}),Sa(t.outMsg.info,i),e.jsx("h4",{children:"Message Body:"}),e.jsxs("div",{className:a.detailRow,children:[e.jsx("div",{className:a.detailLabel,children:"BoC:"}),e.jsx("div",{className:a.detailValue,children:e.jsx("pre",{children:t.outMsg.body.toBoc().toString("hex")})})]}),e.jsxs("div",{className:a.detailRow,children:[e.jsx("div",{className:a.detailLabel,children:"Cell:"}),e.jsx("div",{className:a.detailValue,children:e.jsx("pre",{children:t.outMsg.body.toString()})})]}),ka(t.outMsg.init)]});case"setCode":return e.jsxs("div",{className:a.actionDetailsContent,children:[e.jsx("h3",{children:"Set Code Details"}),e.jsxs("div",{className:a.detailRow,children:[e.jsx("div",{className:a.detailLabel,children:"New Code:"}),e.jsx("div",{className:a.detailValue,children:t.newCode.toString()})]})]});case"reserve":return e.jsxs("div",{className:a.actionDetailsContent,children:[e.jsx("h3",{children:"Reserve Currency Details"}),e.jsxs("div",{className:a.detailRow,children:[e.jsx("div",{className:a.detailLabel,children:"Mode:"}),e.jsx("div",{className:a.detailValue,children:R(t.mode)})]}),e.jsxs("div",{className:a.detailRow,children:[e.jsx("div",{className:a.detailLabel,children:"TON Coins:"}),e.jsx("div",{className:a.detailValue,children:f(t.currency.coins)})]}),t.currency.other&&Object.keys(t.currency.other).length>0&&e.jsxs("div",{className:a.detailRow,children:[e.jsx("div",{className:a.detailLabel,children:"Other Currencies:"}),e.jsx("div",{className:a.detailValue,children:e.jsx("pre",{children:JSON.stringify(t.currency.other,null,2)})})]})]});case"changeLibrary":return e.jsxs("div",{className:a.actionDetailsContent,children:[e.jsx("h3",{children:"Change Library Details"}),e.jsxs("div",{className:a.detailRow,children:[e.jsx("div",{className:a.detailLabel,children:"Mode:"}),e.jsx("div",{className:a.detailValue,children:R(t.mode)})]}),t.libRef.type==="hash"&&e.jsxs("div",{className:a.detailRow,children:[e.jsx("div",{className:a.detailLabel,children:"Library Hash:"}),e.jsx("div",{className:a.detailValue,children:t.libRef.libHash.toString("hex")})]}),t.libRef.type==="ref"&&e.jsxs("div",{className:a.detailRow,children:[e.jsx("div",{className:a.detailLabel,children:"Library Cell Hash:"}),e.jsx("div",{className:a.detailValue,children:t.libRef.library.hash().toString("hex")})]})]});default:return e.jsx("pre",{children:"Unknown action type"})}};function Ta(t){switch(t.type){case"sendMsg":return{actionTitle:"Send Message",headerStyle:a.actionHeaderSendMsg,iconContainerClass:a.actionModalHeaderIconContainerSendMsg,headerIconSvg:e.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M22 2L11 13M22 2L15 22L11 13L2 9L22 2Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})};case"setCode":return{actionTitle:"Set Code",headerStyle:a.actionHeaderSetCode,iconContainerClass:a.actionModalHeaderIconContainerSetCode,headerIconSvg:e.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M16 18L22 12L16 6M8 6L2 12L8 18",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})};case"reserve":return{actionTitle:"Reserve Currency",headerStyle:a.actionHeaderReserve,iconContainerClass:a.actionModalHeaderIconContainerReserve,headerIconSvg:e.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M12 1V23M17 5H9.5C8.57174 5 7.6815 5.36875 7.02513 6.02513C6.36875 6.6815 6 7.57174 6 8.5C6 9.42826 6.36875 10.3185 7.02513 10.9749C7.6815 11.6313 8.57174 12 9.5 12H14.5C15.4283 12 16.3185 12.3687 16.9749 13.0251C17.6313 13.6815 18 14.5717 18 15.5C18 16.4283 17.6313 17.3185 16.9749 17.9749C16.3185 18.6313 15.4283 19 14.5 19H6",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})};case"changeLibrary":return{actionTitle:"Change Library",headerStyle:a.actionModalHeader,iconContainerClass:a.actionModalHeaderIconContainerChangeLibrary,headerIconSvg:e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",children:[e.jsx("path",{d:"M4 19V5C4 3.89543 4.89543 3 6 3H18C19.1046 3 20 3.89543 20 5V19L12 14L4 19Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("path",{d:"M8 7H16",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]})}}}const Va=({action:t,index:i,contractAddress:n,onClose:d})=>{if(!t)return null;const{actionTitle:o,headerStyle:x,iconContainerClass:r,headerIconSvg:c}=Ta(t);return e.jsxs(oa,{open:!!t,onClose:d,contentClassName:a.actionModalFullScreenContent,children:[e.jsxs("div",{className:`${a.actionModalHeader} ${x}`,children:[e.jsxs("div",{className:a.modalTitleContent,children:[e.jsxs("h3",{className:a.modalTitleMain,children:[e.jsx("span",{className:`${r} ${a.actionModalHeaderIcon}`,children:c}),o]}),e.jsxs("span",{className:a.modalTitleSub,children:["Action #",i+1]})]}),e.jsx("button",{type:"button",onClick:d,className:a.actionModalClose,"aria-label":"Close modal",children:e.jsx(Oe,{svg:e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",children:[e.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),e.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})})]}),e.jsx("div",{className:a.actionModalBody,children:e.jsx("div",{className:a.actionItemCard,children:La(t,n)})})]})},Ma=({result:t})=>{const[i,n]=m.useState(null),d=r=>n(r),o=()=>n(null),x=i!==null?t.result.emulatedTx.actions[i]:null;return e.jsxs("div",{className:"retrace-result-container",children:[e.jsx($t,{result:t.result}),e.jsxs("div",{className:"actions-section",children:[e.jsxs("h3",{className:"actions-heading",children:["Out Actions (",t.result.emulatedTx.actions.length,")"]}),e.jsx(aa,{actions:t.result.emulatedTx.actions,onSelect:d})]}),e.jsx(Va,{action:x,index:i??0,contractAddress:t.result.inMsg.contract,onClose:o}),t.result.emulatedTx.vmLogs&&e.jsx(xe,{title:"VM Logs",logs:t.result.emulatedTx.vmLogs,isExpandable:!0,defaultExpanded:!1}),t.result.emulatedTx.executorLogs&&e.jsx(xe,{title:"Executor Logs",logs:t.result.emulatedTx.executorLogs,isExpandable:!0,defaultExpanded:!1})]})},ge=J.memo(Ma);ge.displayName="RetraceResultView";const Ra="_logsContainer_12jnc_1",Ha="_expandableContainer_12jnc_8",$a="_expandableHeader_12jnc_15",Ba="_logsHeading_12jnc_39",Da="_logsContent_12jnc_47",Ea="_logsContentInner_12jnc_53",Fa="_vmLogs_12jnc_57",za="_copyButton_12jnc_69",L={logsContainer:Ra,expandableContainer:Ha,expandableHeader:$a,logsHeading:Ba,logsContent:Da,logsContentInner:Ea,vmLogs:Fa,copyButton:za},xe=({logs:t,title:i="Logs",isExpandable:n=!1,defaultExpanded:d=!1})=>{const[o,x]=m.useState(d),[r,c]=m.useState("idle");if(!t)return null;const h=()=>{n&&x(!o)},b=g=>{n&&(g.key==="Enter"||g.key===" ")&&h()},N=async()=>{if(t)try{await navigator.clipboard.writeText(t),c("copied"),setTimeout(()=>c("idle"),1500)}catch(g){console.error("Failed to copy logs:",g)}},y=()=>e.jsxs("div",{className:L.logsContentInner,children:[e.jsx(te,{variant:"ghost",size:"sm",onClick:()=>{N()},className:L.copyButton,"aria-label":r==="idle"?"Copy logs":"Logs copied",children:r==="idle"?e.jsx(pe,{}):e.jsx(je,{})}),e.jsx("pre",{className:L.vmLogs,children:t})]});return n?e.jsxs("div",{className:L.expandableContainer,children:[e.jsxs("div",{className:L.expandableHeader,onClick:h,onKeyDown:b,role:"button",tabIndex:0,"aria-expanded":o,children:[o?e.jsx(qe,{}):e.jsx(Ge,{}),e.jsx("h3",{className:L.logsHeading,children:i})]}),o&&e.jsx("div",{className:L.logsContent,children:y()})]}):e.jsxs("div",{className:L.logsContainer,children:[i&&e.jsx("h3",{className:L.logsHeading,children:i}),y()]})},Aa="_inputWrapper_1qq5f_1",Wa="_focused_1qq5f_14",Pa="_searchIcon_1qq5f_19",Oa="_txInput_1qq5f_32",qa="_submitButton_1qq5f_45",Ga="_compactWrapper_1qq5f_55",Ka="_compactSearchIcon_1qq5f_60",Ua="_compactInput_1qq5f_69",Ja="_compactButton_1qq5f_74",T={inputWrapper:Aa,focused:Wa,searchIcon:Pa,txInput:Oa,submitButton:qa,compactWrapper:Ga,compactSearchIcon:Ka,compactInput:Ua,compactButton:Ja},_e=({value:t,onChange:i,onSubmit:n,onFocus:d,onBlur:o,placeholder:x,loading:r,autoFocus:c=!1,compact:h=!1,onInputClick:b})=>{const[N,y]=m.useState(!1),g=V=>{V.key==="Enter"&&n()},H=`${T.inputWrapper} ${N?T.focused:""} ${h?T.compactWrapper:""}`,v=`${T.txInput} ${h?T.compactInput:""}`,k=`${T.submitButton} ${h?T.compactButton:""}`;return e.jsxs("div",{className:H,role:"search",children:[e.jsx("div",{className:`${T.searchIcon} ${h?T.compactSearchIcon:""}`,"aria-hidden":"true",children:e.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",children:[e.jsx("path",{d:"M11 19C15.4183 19 19 15.4183 19 11C19 6.58172 15.4183 3 11 3C6.58172 3 3 6.58172 3 11C3 15.4183 6.58172 19 11 19Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("path",{d:"M21 21L16.65 16.65",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]})}),e.jsx("input",{type:"text",spellCheck:"false",autoFocus:c,placeholder:x,value:t,onChange:V=>i(V.target.value),onKeyDown:g,onFocus:()=>{d?.(),y(!0)},onBlur:()=>{o?.(),y(!1)},onClick:b,className:v,"aria-label":x??"Search transaction","aria-describedby":h?void 0:"search-instructions"}),e.jsx(te,{variant:"primary",size:h?"sm":"md",className:k,onClick:n,disabled:r,"aria-label":r?"Tracing transaction...":"Trace transaction",title:r?"Tracing...":"Trace transaction (Enter)",children:"Trace"}),!h&&e.jsx("div",{id:"search-instructions",className:"sr-only",children:"Press Enter or click Trace button to search. Use Ctrl+Enter or Cmd+Enter as shortcut."})]})},X="TxTracerHistoryV1",Za=5;function Ya(){const[t,i]=m.useState([]);m.useEffect(()=>{try{const o=localStorage.getItem(X);o&&i(JSON.parse(o))}catch(o){console.error("Failed to load transaction history from localStorage",o),i([])}},[]);const n=m.useCallback(o=>{!o.hash||o.hash.trim()===""||i(x=>{const r=x.filter(h=>h.hash!==o.hash);r.unshift(o);const c=r.slice(0,Za);try{localStorage.setItem(X,JSON.stringify(c))}catch(h){console.error("Failed to save transaction history to localStorage",h)}return c})},[]),d=m.useCallback(o=>{i(x=>{const r=x.filter(c=>c.hash!==o);try{localStorage.setItem(X,JSON.stringify(r))}catch(c){console.error("Failed to save updated transaction history to localStorage",c)}return r})},[]);return{history:t,addToHistory:n,removeFromHistory:d}}const Qa="_tooltipContainer_1tlpf_1",Xa="_iconWrapper_1tlpf_7",es="_tooltipBase_1tlpf_21",ts="_tooltip_1tlpf_1 _tooltipBase_1tlpf_21",K={tooltipContainer:Qa,iconWrapper:Xa,tooltipBase:es,tooltip:ts,"tooltip-right":"_tooltip-right_1tlpf_55","tooltip-bottom":"_tooltip-bottom_1tlpf_79"},as=({children:t,tooltipText:i,iconSize:n=16,placement:d="right"})=>{const o=`${K.tooltip} ${K[`tooltip-${d}`]}`;return e.jsxs("span",{className:K.tooltipContainer,children:[t,e.jsxs("span",{className:K.iconWrapper,role:"button",tabIndex:0,children:[e.jsx(Ke,{size:n,"aria-hidden":"true"}),e.jsx("span",{className:o,role:"tooltip",children:i})]})]})},ss="_stackItemViewer_a4fe2_1",ns={stackItemViewer:ss},os="_cellNode_b2kls_1",is="_cellNodeColor1_b2kls_11",ls="_cellNodeColor2_b2kls_18",rs="_cellNodeColor3_b2kls_25",cs="_cellNodeColor4_b2kls_32",ds="_cellNodeColor5_b2kls_39",us="_cellInfo_b2kls_46",hs="_cellTextContent_b2kls_57",ms="_cellInfoClickable_b2kls_67",xs="_cellRefs_b2kls_71",_s="_refsToggle_b2kls_77",Cs="_copyButton_b2kls_83",ps="_copied_b2kls_106",S={cellNode:os,cellNodeColor1:is,cellNodeColor2:ls,cellNodeColor3:rs,cellNodeColor4:cs,cellNodeColor5:ds,cellInfo:us,cellTextContent:hs,cellInfoClickable:ms,cellRefs:xs,refsToggle:_s,copyButton:Cs,copied:ps},js=()=>e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("rect",{x:"9",y:"9",width:"13",height:"13",rx:"2",ry:"2"}),e.jsx("path",{d:"M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"})]}),vs=()=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:e.jsx("polyline",{points:"20 6 9 17 4 12"})}),Ne=(t,i=[])=>{i.push(t.bits.length);for(const n of t.refs)Ne(n,i);return i},gs=(t,i)=>{if(i===0)return 200;const d=t/i*400;return Math.max(d,60)},ee=({cell:t,depth:i=0,maxBitsLength:n})=>{const[d,o]=m.useState(!0),[x,r]=m.useState(!1),c=m.useMemo(()=>{if(n!==void 0)return n;if(i===0){const v=Ne(t);return Math.max(...v)}return 0},[t,i,n]),h=t.refs.length,b=gs(t.bits.length,c);if(i>10)return e.jsx("div",{className:S.cellNode,style:{marginLeft:10},children:"Max depth reached."});const N=v=>{v.stopPropagation(),h>0&&o(!d)},y=v=>{v.stopPropagation();const k=t.toBoc().toString("hex");navigator.clipboard.writeText(k).then(()=>{r(!0),setTimeout(()=>r(!1),1500)}).catch(V=>{console.error("Failed to copy BoC: ",V),setTimeout(()=>r(!1),1500)})},g=`${S.cellInfo} ${h>0?S.cellInfoClickable:""}`,H=S[`cellNodeColor${i%5+1}`];return e.jsxs("div",{className:`${S.cellNode}`,style:{marginLeft:i*5},children:[e.jsxs("div",{className:`${g} ${H}`,style:{width:b},onClick:h>0?N:void 0,onKeyDown:h>0?v=>{(v.key==="Enter"||v.key===" ")&&N(v)}:void 0,role:h>0?"button":void 0,tabIndex:h>0?0:void 0,children:[e.jsxs("div",{className:S.cellTextContent,children:[e.jsx("strong",{children:"Bits:"})," ",t.bits.length,e.jsx("br",{}),e.jsx("strong",{children:"Refs:"})," ",h>0?e.jsxs("span",{className:S.refsToggle,children:[d?"▾":"▸"," ",h]}):h]}),e.jsx("button",{className:`${S.copyButton} ${x?S.copied:""}`,onClick:y,title:"Copy BoC (Hex)",children:x?e.jsx(vs,{}):e.jsx(js,{})})]}),d&&h>0&&e.jsx("div",{className:S.cellRefs,children:t.refs.map((v,k)=>e.jsx(ee,{cell:v,depth:i+1,maxBitsLength:c},`${t.hash().toString("hex")}-ref-${k}`))})]})},Ns="_container_1n3df_1",ys="_label_1n3df_5",ws="_contentWrapper_1n3df_12",fs="_copyButton_1n3df_19",bs="_content_1n3df_12",O={container:Ns,label:ys,contentWrapper:ws,copyButton:fs,content:bs},Ce=({data:t,label:i,maxHeight:n=100})=>{const[d,o]=m.useState("idle"),x=async()=>{try{await navigator.clipboard.writeText(t),o("copied"),setTimeout(()=>o("idle"),1500)}catch(r){console.error("Failed to copy data:",r)}};return e.jsxs("div",{className:O.container,children:[i&&e.jsx("div",{className:O.label,children:i}),e.jsxs("div",{className:O.contentWrapper,children:[e.jsx("pre",{className:O.content,style:{maxHeight:`${n}px`},children:t}),e.jsx(te,{variant:"ghost",size:"sm",onClick:()=>{x()},className:O.copyButton,"aria-label":d==="idle"?"Copy":"Copied",children:d==="idle"?e.jsx(pe,{}):e.jsx(je,{})})]})]})},Is="_addressSection_gk4wi_1",Ss="_addressRow_gk4wi_8",ks="_addressLabel_gk4wi_14",Ls="_addressValue_gk4wi_21",D={addressSection:Is,addressRow:Ss,addressLabel:ks,addressValue:Ls},Ts=({address:t})=>{const i=t.toRawString(),n=t.toString();return e.jsxs("div",{className:D.addressSection,children:[e.jsxs("div",{className:D.addressRow,children:[e.jsx("div",{className:D.addressLabel,children:"Raw Address:"}),e.jsx("div",{className:D.addressValue,children:e.jsx(M,{address:i})})]}),e.jsxs("div",{className:D.addressRow,children:[e.jsx("div",{className:D.addressLabel,children:"Friendly Address:"}),e.jsx("div",{className:D.addressValue,children:e.jsx(M,{address:n})})]})]})},Vs="_detailsContainer_fkrej_1",Ms="_header_fkrej_12",Rs="_title_fkrej_20",Hs="_closeButton_fkrej_27",$s="_contentContainer_fkrej_47",Bs="_treeRow_fkrej_56",Ds="_detailsRow_fkrej_63",Es="_treeViewContainer_fkrej_69",Fs="_dataSection_fkrej_80",w={detailsContainer:Vs,header:Ms,title:Rs,closeButton:Hs,contentContainer:$s,treeRow:Bs,detailsRow:Ds,treeViewContainer:Es,dataSection:Fs},zs=({itemData:t,title:i,onClose:n})=>{if(!t)return e.jsx("div",{className:w.detailsContainer,children:e.jsx("p",{children:"No item selected"})});let d=null,o=null;const x=c=>c.$==="Cell"&&c?.boc?le.Cell.fromHex(c.boc):(c.$==="Slice"||c.$==="Builder")&&c?.hex?le.Cell.fromHex(c.hex):null,r=c=>{try{return c.asSlice().loadAddress()}catch{return}};try{const c=x(t);if(c)if(c.bits.length===267&&c.refs.length===0){const h=r(c);h?(d=e.jsx(Ts,{address:h}),o=null):(d=e.jsx(e.Fragment,{children:e.jsx("div",{className:w.dataSection,children:e.jsx(Ce,{label:"",data:c.toBoc().toString("hex")})})}),o=e.jsx(ee,{cell:c}))}else d=e.jsx(e.Fragment,{children:e.jsx("div",{className:w.dataSection,children:e.jsx(Ce,{label:"",data:c.toBoc().toString("hex")})})}),o=e.jsx(ee,{cell:c});else o=null,d=e.jsx("p",{children:"Details for the selected item will be shown here."})}catch(c){console.error("Error processing item data:",c),o=null,d=e.jsx("p",{children:"Error displaying item details. Data might be malformed."})}return e.jsxs("div",{className:w.detailsContainer,children:[(i||n)&&e.jsxs("div",{className:w.header,children:[i&&e.jsx("h3",{className:w.title,children:i}),n&&e.jsx("button",{onClick:n,className:w.closeButton,"aria-label":"Close details",children:"×"})]}),e.jsxs("div",{className:w.contentContainer,children:[e.jsx("div",{className:w.detailsRow,children:d}),o&&e.jsx("div",{className:w.treeRow,children:e.jsx("div",{className:w.treeViewContainer,children:o})})]})]})},As=({element:t,title:i,onBack:n})=>e.jsx("div",{className:ns.stackItemViewer,children:e.jsx(zs,{itemData:t,title:i,onClose:n})}),Ws="_traceViewWrapper_tvzgh_1",Ps="_loadingOverlay_tvzgh_9",Os="_appContainer_tvzgh_23",qs="_headerContent_tvzgh_36",Gs="_searchInputContainer_tvzgh_41",Ks="_txStatusContainer_tvzgh_46",Us="_mainContent_tvzgh_53",Js="_mainContentMinimized_tvzgh_66",Zs="_detailsSection_tvzgh_69",Ys="_detailsSectionExpanded_tvzgh_77",Qs="_detailsHeader_tvzgh_85",Xs="_detailsTitle_tvzgh_100",en="_detailsContent_tvzgh_125",tn="_transactionDetailsPanelInTracePage_tvzgh_133",an="_inputPage_tvzgh_138",sn="_centeredInputContainer_tvzgh_146",nn="_txtracerLogo_tvzgh_155",on="_logoDiamond_tvzgh_162",ln="_txtracerLogoH1_tvzgh_191",rn="_titleTon_tvzgh_200",cn="_inputCard_tvzgh_210",dn="_historyDropdown_tvzgh_216",un="_historyItem_tvzgh_236",hn="_historyItemIcon_tvzgh_256",mn="_historyItemLeft_tvzgh_262",xn="_historyItemText_tvzgh_269",_n="_historyItemBadges_tvzgh_275",Cn="_historyItemDeleteButton_tvzgh_281",pn="_featureCards_tvzgh_299",jn="_featureCard_tvzgh_299",vn="_featureCardIcon_tvzgh_333",gn="_playgroundIcon_tvzgh_345",Nn="_explorerIcon_tvzgh_350",yn="_sandboxIcon_tvzgh_355",wn="_featureCardTitle_tvzgh_360",fn="_featureCardDescription_tvzgh_366",bn="_featureCardBadge_tvzgh_373",In="_featureCardColorBadge_tvzgh_386",Sn="_createBy_tvzgh_394",kn="_externalLinksContainer_tvzgh_419",Ln="_iconLink_tvzgh_427",Tn="_stackItemOverlay_tvzgh_611",Vn="_codeEditorHidden_tvzgh_621",Mn="_codeEditorArea_tvzgh_650",Rn="_codeEditorWrapper_tvzgh_674",Hn="_sidebarArea_tvzgh_685",l={traceViewWrapper:Ws,loadingOverlay:Ps,appContainer:Os,headerContent:qs,searchInputContainer:Gs,txStatusContainer:Ks,mainContent:Us,mainContentMinimized:Js,detailsSection:Zs,detailsSectionExpanded:Ys,detailsHeader:Qs,detailsTitle:Xs,detailsContent:en,transactionDetailsPanelInTracePage:tn,inputPage:an,centeredInputContainer:sn,txtracerLogo:nn,logoDiamond:on,txtracerLogoH1:ln,titleTon:rn,inputCard:cn,historyDropdown:dn,historyItem:un,historyItemIcon:hn,historyItemLeft:mn,historyItemText:xn,historyItemBadges:_n,historyItemDeleteButton:Cn,featureCards:pn,featureCard:jn,featureCardIcon:vn,playgroundIcon:gn,explorerIcon:Nn,sandboxIcon:yn,featureCardTitle:wn,featureCardDescription:fn,featureCardBadge:bn,featureCardColorBadge:In,createBy:Sn,externalLinksContainer:kn,iconLink:Ln,stackItemOverlay:Tn,codeEditorHidden:Vn,codeEditorArea:Mn,codeEditorWrapper:Rn,sidebarArea:Hn},$n=J.lazy(()=>ve(()=>import("./index-BxDUz3AG.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9]),import.meta.url)),Bn=J.lazy(()=>ve(()=>import("./index-Dx-iE75L.js"),__vite__mapDeps([10,1,2,3,4,5,11]),import.meta.url));function Dn(){const[t,i]=m.useState(""),[n,d]=m.useState(""),[o,x]=m.useState(void 0),[r,c]=m.useState(!1),[h,b]=m.useState(!1),{setError:N}=Ue(),[y,g]=m.useState([]),[H,v]=m.useState(0),{history:k,addToHistory:V,removeFromHistory:ye}=Ya(),[we,A]=m.useState(!1),[fe,ae]=m.useState(!1),[I,W]=m.useState(null),be=lt(o?.trace),{selectedStep:E,highlightLine:Ie,currentStep:Se,currentStack:ke,handlePrev:Le,handleNext:Te,goToFirstStep:Ve,goToLastStep:Me,canGoPrev:Re,canGoNext:He,findStepByLine:$e,transitionType:Be,totalSteps:De}=rt(o?.trace);m.useEffect(()=>{const _=(C=>{const j=window.location.search;if(!j||j.length<=1)return null;const P=j.slice(1).split("&");for(const B of P){if(!B)continue;const q=B.indexOf("=");if((q>=0?B.slice(0,q):B)!==C)continue;const ie=q>=0?B.slice(q+1):"";try{return decodeURIComponent(ie)}catch{return ie}}return null})("tx")??"";i(_),d(_)},[]),m.useEffect(()=>{o?.trace?g(o.trace.steps.map(u=>({name:u.instructionName,gasCost:ce(u)}))):g([])},[o]),m.useEffect(()=>{if(o?.trace?.steps&&E>0){let u=0;for(let _=0;_<E;_++){const C=o.trace.steps[_];if(C){const j=ce(C);isNaN(j)||(u+=j)}}v(u)}else v(0)},[E,o?.trace?.steps]);const $=m.useCallback(async(u=!1,_)=>{const C=_??(u?n:t);if(C.trim()){c(!0);try{const j=await ct(C);if(x(j),W(null),!u){const F=j?.result?.emulatedTx?.computeInfo,P=F!=="skipped"?F?.exitCode:void 0;V({hash:C,exitCode:P,testnet:j.network==="testnet"})}A(!1),window.history.pushState({},"",`?tx=${encodeURIComponent(C)}`)}catch(j){console.error(j),j instanceof Error?N(`Failed to trace transaction: ${j.message}`):N("Failed to trace transaction")}finally{c(!1)}}},[n,t,N,V]),Ee=m.useCallback(()=>{$(!0)},[$]);m.useEffect(()=>{const u=_=>{(_.ctrlKey||_.metaKey)&&_.key==="Enter"?(_.preventDefault(),r||$(!1)):_.key==="Escape"&&I&&(_.preventDefault(),W(null))};return document.addEventListener("keydown",u),()=>{document.removeEventListener("keydown",u)}},[$,r,I]);const Z=m.useCallback(()=>b(u=>!u),[]),Fe=m.useCallback(u=>{(u.key==="Enter"||u.key===" ")&&Z()},[Z]),ze=m.useCallback((u,_)=>{I&&I.element===u&&I.title===_?W(null):W({element:u,title:_})},[I]),Ae=m.useCallback(()=>{W(null)},[]),se=(()=>{const u=o?.trace?.steps;if(!u)return{line:void 0,approx:!1};const _=u[E];if(!_||_.loc!==void 0)return{line:void 0,approx:!1};let C=E-1,j=1;for(;C>=0&&u[C]?.loc===void 0;)j++,C--;const F=C>=0?u[C]:void 0,P=F?.loc?.line!==void 0?F.loc.line+1:void 0,B=j>1;return{line:P,approx:B}})(),ne=o?.result?.emulatedTx?.computeInfo!=="skipped"?o?.result?.emulatedTx?.computeInfo?.exitCode:void 0,Y=o?.result?.emulatedTx?.computeInfo!=="skipped"?o?.result?.emulatedTx?.computeInfo?.success?"success":"failed":"success",oe=o?.result?.stateUpdateHashOk,We=Y!==void 0||oe===!1,Pe=`Exit code: ${ne?.toString()??"unknown"}`;return e.jsxs(e.Fragment,{children:[!o&&e.jsxs("main",{className:l.inputPage,children:[e.jsxs("div",{id:"trace-status",className:"sr-only","aria-live":"polite","aria-atomic":"true",children:[r&&"Tracing transaction...",o&&!r&&"Transaction traced successfully"]}),e.jsx("div",{className:"sr-only",children:"Press Ctrl+Enter or Cmd+Enter to trace the transaction"}),e.jsx("div",{className:l.externalLinksContainer,children:e.jsx("a",{href:"https://github.com/tact-lang/txtracer",target:"_blank",rel:"noopener noreferrer",title:"GitHub Repository",className:l.iconLink,"aria-label":"View TxTracer source code on GitHub",children:e.jsx(Je,{size:24,"aria-hidden":"true"})})}),e.jsxs("div",{className:l.centeredInputContainer,children:[e.jsxs("header",{className:l.txtracerLogo,children:[e.jsx("div",{className:l.logoDiamond,"aria-hidden":"true"}),e.jsxs("h1",{"data-testid":"app-title",className:l.txtracerLogoH1,children:[e.jsx("span",{children:"TxTracer"}),e.jsx("span",{className:l.titleTon,children:"The Open Network"})]})]}),e.jsxs("section",{"aria-labelledby":"search-heading",className:l.inputCard,children:[e.jsx("h2",{id:"search-heading",className:"sr-only",children:"Transaction Search"}),e.jsx(_e,{value:t,onChange:i,onSubmit:()=>{$(!1)},placeholder:"Search by transaction hash or explorer link",loading:r,autoFocus:!0,onFocus:()=>{ae(!0)},onBlur:()=>{ae(!1),setTimeout(()=>A(!1),100)},onInputClick:()=>{fe&&A(!0)}}),we&&k.length>0&&e.jsx("ul",{className:l.historyDropdown,onMouseDown:u=>u.preventDefault(),role:"listbox","aria-label":"Transaction history",children:k.slice(0,Math.min(4,k.length)).map(u=>{const _=u.exitCode===void 0||u.exitCode===0?"success":"failed";return e.jsxs("li",{onClick:()=>{i(u.hash),A(!1),$(!1,u.hash)},onKeyDown:C=>{(C.key==="Enter"||C.key===" ")&&(C.preventDefault(),i(u.hash),A(!1),$(!1,u.hash))},className:l.historyItem,role:"option",tabIndex:0,"aria-selected":!1,children:[e.jsx(Ze,{size:16,className:l.historyItemIcon,"aria-hidden":"true"}),e.jsxs("span",{className:l.historyItemLeft,children:[e.jsx("span",{className:l.historyItemText,children:de(u.hash,16,16)}),u.testnet&&e.jsx(re,{color:"red",children:"Testnet"})]}),e.jsx("div",{className:l.historyItemBadges,children:u.exitCode!==void 0&&e.jsx(U,{type:_,exitCode:u.exitCode,text:`Exit code: ${u.exitCode}`})}),e.jsx("button",{className:l.historyItemDeleteButton,onClick:C=>{C.stopPropagation(),ye(u.hash)},title:"Remove from history","aria-label":`Remove transaction ${de(u.hash,8,8)} from history`,children:e.jsx(Ye,{size:16,"aria-hidden":"true"})})]},u.hash)})})]}),r?e.jsx(G,{message:"Tracing transaction",subtext:"This may take a few moments",loading:r}):e.jsxs("section",{"aria-labelledby":"features-heading",className:l.featureCards,children:[e.jsx("h2",{id:"features-heading",className:"sr-only",children:"Available Tools"}),e.jsxs("a",{href:"/play/",className:l.featureCard,children:[e.jsx("div",{className:`${l.featureCardIcon} ${l.playgroundIcon}`,children:e.jsx(Qe,{"aria-hidden":"true"})}),e.jsx("h3",{className:l.featureCardTitle,children:"Assembly Playground"}),e.jsx("p",{className:l.featureCardDescription,children:"Experiment with TVM assembly code directly in your browser. Write, test, and debug assembly instructions with real-time execution."}),e.jsx("span",{className:l.featureCardBadge,children:"Playground"})]}),e.jsxs("a",{href:"/code-explorer/",className:l.featureCard,children:[e.jsx("div",{className:`${l.featureCardIcon} ${l.explorerIcon}`,children:e.jsx(Xe,{"aria-hidden":"true"})}),e.jsx("h3",{className:l.featureCardTitle,children:"Code Explorer"}),e.jsx("p",{className:l.featureCardDescription,children:"Compile FunC code to assembly and explore the generated bytecode. Perfect for understanding how your smart contracts work under the hood."}),e.jsx("span",{className:l.featureCardBadge,children:"Explorer"})]}),e.jsxs("a",{href:"/sandbox/",className:l.featureCard,children:[e.jsx("div",{className:`${l.featureCardIcon} ${l.sandboxIcon}`,children:e.jsx(et,{"aria-hidden":"true"})}),e.jsx("h3",{className:l.featureCardTitle,children:"Sandbox"}),e.jsx("p",{className:l.featureCardDescription,children:"Inspect transactions produced by your local tests using the @ton/sandbox package. Visualize messages, transaction info, VM logs and exit codes with an interactive UI."}),e.jsx(re,{color:"green",className:l.featureCardColorBadge,children:"Alpha"})]})]})]}),e.jsxs("footer",{className:l.createBy,children:["Created by"," ",e.jsx("a",{href:"https://tonstudio.io",target:"_blank",rel:"noreferrer",children:"TON Studio"})]})]}),r&&!o&&e.jsx("main",{className:l.inputPage,children:e.jsx(G,{message:"Tracing transaction",subtext:"This may take a few moments",loading:!0})}),o&&e.jsxs("div",{className:l.traceViewWrapper,children:[e.jsxs("div",{id:"trace-results-status",className:"sr-only","aria-live":"polite","aria-atomic":"true",children:[r&&"Loading new transaction trace...",o&&!r&&"Transaction trace loaded successfully"]}),e.jsx(Bn,{pageTitle:"",network:o?.network??"mainnet",children:e.jsxs("div",{className:l.headerContent,children:[e.jsx("div",{className:l.searchInputContainer,role:"search","aria-label":"Search for another transaction",children:e.jsx(_e,{value:n,onChange:d,onSubmit:Ee,placeholder:"Trace another transaction hash",loading:r,autoFocus:!1,compact:!0})}),We&&e.jsxs("div",{className:l.txStatusContainer,role:"status","aria-live":"polite",children:[Y&&e.jsx(U,{type:Y,text:Pe,exitCode:ne}),oe===!1&&e.jsx(as,{tooltipText:"Because the transaction runs in a local sandbox, we can't always reproduce it exactly. Sandbox replay was incomplete, and some values may differ from those on the real blockchain.",placement:"bottom",children:e.jsx(U,{type:"warning",text:"Trace Incomplete"})})]})]})}),e.jsxs("main",{className:l.appContainer,children:[e.jsxs("div",{className:`${l.mainContent} ${h?l.mainContentMinimized:""}`,children:[e.jsxs("section",{"aria-labelledby":"code-viewer-heading","data-testid":"code-editor-container",className:l.codeEditorArea,children:[e.jsx("h2",{id:"code-viewer-heading",className:"sr-only",children:"Transaction Code Viewer"}),e.jsx("div",{className:`${l.codeEditorWrapper} ${I?l.codeEditorHidden:""}`,children:e.jsx(m.Suspense,{fallback:e.jsx(G,{message:"Loading Editor...",loading:!0}),children:e.jsx($n,{code:o.code,highlightLine:Ie,implicitRetLine:se.line,implicitRetLabel:se.approx?"↵ implicit RET (approximate position)":void 0,lineExecutionData:be,onLineClick:$e,shouldCenter:Be==="button",exitCode:o.exitCode})})}),I&&e.jsx("div",{className:l.stackItemOverlay,children:e.jsx(As,{element:I.element,title:I.title,onBack:Ae})})]}),e.jsx(dt,{selectedStep:E,totalSteps:De,currentStep:Se,currentStack:ke,canGoPrev:Re,canGoNext:He,onPrev:Le,onNext:Te,onFirst:Ve,onLast:Me,showGas:!0,placeholderMessage:"No trace steps available.",instructionDetails:y,cumulativeGas:H,onStackItemClick:ze,className:l.sidebarArea})]}),e.jsxs("section",{className:`${l.detailsSection} ${h?l.detailsSectionExpanded:""}`,"aria-labelledby":"transaction-details-heading",children:[e.jsx("div",{"data-testid":"details-header",className:l.detailsHeader,onClick:Z,onKeyDown:Fe,role:"button",tabIndex:0,"aria-expanded":h,"aria-controls":"transaction-details-content",children:e.jsx("div",{className:l.detailsTitle,children:e.jsx("span",{id:"transaction-details-heading",children:"TRANSACTION DETAILS"})})}),h&&e.jsx("div",{id:"transaction-details-content","data-testid":"details-content",className:l.detailsContent,children:e.jsx("div",{className:l.transactionDetailsPanelInTracePage,children:e.jsx(ge,{result:o})})})]})]}),r&&o&&e.jsx("div",{className:l.loadingOverlay,role:"status","aria-live":"polite",children:e.jsx(G,{message:"Tracing new transaction...",subtext:"This may take a few moments",loading:!0})})]})]})}tt.createRoot(document.getElementById("root")).render(e.jsx(J.StrictMode,{children:e.jsx(at,{children:e.jsx(st,{children:e.jsx(nt,{children:e.jsx(ot,{loadingMessage:"Loading TxTracer...",children:e.jsx(Dn,{})})})})})}));
