import{c as v,r as l,j as o,B as T,e as A,f as N}from"./Badge-syZ0e9Xk.js";function R(t){return v({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M257.5 445.1l-22.2 22.2c-9.4 9.4-24.6 9.4-33.9 0L7 273c-9.4-9.4-9.4-24.6 0-33.9L201.4 44.7c9.4-9.4 24.6-9.4 33.9 0l22.2 22.2c9.5 9.5 9.3 25-.4 34.3L136.6 216H424c13.3 0 24 10.7 24 24v32c0 13.3-10.7 24-24 24H136.6l120.5 114.8c9.8 9.3 10 24.8.4 34.3z"},child:[]}]})(t)}function F(t){return v({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M190.5 66.9l22.2-22.2c9.4-9.4 24.6-9.4 33.9 0L441 239c9.4 9.4 9.4 24.6 0 33.9L246.6 467.3c-9.4 9.4-24.6 9.4-33.9 0l-22.2-22.2c-9.5-9.5-9.3-25 .4-34.3L311.4 296H24c-13.3 0-24-10.7-24-24v-32c0-13.3 10.7-24 24-24h287.4L190.9 101.2c-9.8-9.3-10-24.8-.4-34.3z"},child:[]}]})(t)}function E(t){return v({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M173.898 439.404l-166.4-166.4c-9.997-9.997-9.997-26.206 0-36.204l36.203-36.204c9.997-9.998 26.207-9.998 36.204 0L192 312.69 432.095 72.596c9.997-9.997 26.207-9.997 36.204 0l36.203 36.204c9.997 9.997 9.997 26.206 0 36.204l-294.4 294.401c-9.998 9.997-26.207 9.997-36.204-.001z"},child:[]}]})(t)}const P="_progressBar_10cz4_1",$="_progressFill_10cz4_11",I="_overlay_10cz4_17",U="_centeredOverlay_10cz4_28",H="_spotlight_10cz4_34",M="_spotlightAnimated_10cz4_46",W="_tooltip_10cz4_50",D="_animated_10cz4_63",V="_header_10cz4_69",q="_title_10cz4_76",K="_closeButton_10cz4_83",G="_body_10cz4_105",J="_text_10cz4_109",Q="_footer_10cz4_116",X="_stepCounter_10cz4_123",Y="_keyboardHint_10cz4_129",Z="_actions_10cz4_137",O="_button_10cz4_142",tt="_primaryButton_10cz4_177",a={progressBar:P,progressFill:$,overlay:I,centeredOverlay:U,spotlight:H,spotlightAnimated:M,tooltip:W,animated:D,header:V,title:q,closeButton:K,body:G,text:J,footer:Q,stepCounter:X,keyboardHint:Y,actions:Z,button:O,primaryButton:tt},Ct=({steps:t,isOpen:n,onClose:e,onComplete:i})=>{const[s,g]=l.useState(0),[u,x]=l.useState(null),[h,f]=l.useState({top:0,left:0}),[L,B]=l.useState(!1);l.useEffect(()=>{if(!n)g(0),B(!1);else{const r=setTimeout(()=>{B(!0)},100);return()=>clearTimeout(r)}},[n]);const y=l.useCallback(()=>{if(!n||t.length===0)return;const r=t[s];if(!r.target){x(null);const c=window.innerHeight/2-100,k=window.innerWidth/2-190;f({top:Math.max(20,c),left:Math.max(20,Math.min(window.innerWidth-400,k))});return}const d=document.querySelector(r.target);if(x(d),d){const c=d.getBoundingClientRect(),k=r.placement||"bottom";let m=0,p=0;switch(k){case"top":m=c.top-120,p=c.left+c.width/2-200;break;case"bottom":m=c.bottom+20,p=c.left+c.width/2-200;break;case"left":m=c.top+c.height/2-75,p=c.left-420;break;case"right":m=c.top+c.height/2-75,p=c.right+20;break}p=Math.max(20,Math.min(window.innerWidth-420,p)),m=Math.max(20,Math.min(window.innerHeight-200,m)),f({top:m,left:p})}},[s,t,n]);l.useEffect(()=>{y();const r=()=>y();return window.addEventListener("resize",r),()=>window.removeEventListener("resize",r)},[y]);const S=t[s],w=s===0,_=s===t.length-1,b=l.useCallback(()=>{t[s]?.onStepExit?.(),_?(i?.(),e()):g(d=>d+1)},[s,t,_,i,e]),C=l.useCallback(()=>{w||g(r=>r-1)},[w]);return l.useEffect(()=>{const r=d=>{d.key==="Escape"?e():d.key==="ArrowLeft"&&!w?C():(d.key==="ArrowRight"||d.key==="Enter"&&_)&&b(),d.stopPropagation()};return n&&(document.addEventListener("keydown",r),document.body.style.overflow="hidden"),()=>{document.removeEventListener("keydown",r),document.body.style.overflow="unset"}},[n,e,w,b,C,_]),l.useEffect(()=>{if(!n||t.length===0)return;const r=t[s];if(r?.onStepEnter?.(),r?.autoAction){const d=r.autoAction.delay??500,c=setTimeout(()=>{if(r.autoAction?.type==="click"&&r.autoAction.selector){const k=document.querySelector(r.autoAction.selector);k&&k.click()}else r.autoAction?.type==="custom"&&r.autoAction.action&&r.autoAction.action()},d);return()=>clearTimeout(c)}},[s,t,n]),!n||t.length===0?null:o.jsxs(o.Fragment,{children:[o.jsx("div",{className:a.progressBar,children:o.jsx("div",{className:a.progressFill,style:{width:`${(s+1)/t.length*100}%`}})}),o.jsx("div",{className:`${a.overlay} ${u?"":a.centeredOverlay}`,children:u&&o.jsx("div",{className:`${a.spotlight} ${L?a.spotlightAnimated:""}`,style:{top:u.getBoundingClientRect().top,left:u.getBoundingClientRect().left,width:u.getBoundingClientRect().width,height:u.getBoundingClientRect().height}})}),o.jsxs("div",{className:`${a.tooltip} ${L?a.animated:""}`,style:{top:h.top,left:h.left},children:[o.jsxs("div",{className:a.header,children:[o.jsx("h2",{className:a.title,children:S.title}),o.jsx("button",{className:a.closeButton,onClick:e,"aria-label":"Close tutorial",children:"×"})]}),o.jsx("div",{className:a.body,children:o.jsx("div",{className:a.text,dangerouslySetInnerHTML:{__html:S.content.replace(/\n\n/g,"<br><br>").replace(/\n/g,"<br>")}})}),o.jsxs("div",{className:a.footer,children:[o.jsxs("div",{className:a.stepCounter,children:[s+1," of ",t.length,o.jsx("div",{className:a.keyboardHint,children:_?"Press Enter or → to finish":"Use ← → keys for navigation"})]}),o.jsxs("div",{className:a.actions,children:[o.jsx("button",{className:a.button,onClick:C,disabled:w,"aria-label":"Previous step",children:o.jsx(R,{})}),o.jsx("button",{className:`${a.button} ${a.primaryButton}`,onClick:b,"aria-label":_?"Finish tutorial":"Next step",children:_?o.jsx(E,{}):o.jsx(F,{})})]})]})]})]})},vt=({tutorialKey:t,autoStart:n=!0})=>{const[e,i]=l.useState(!1),s=`tutorial-completed-${t}`;return l.useEffect(()=>{const f=localStorage.getItem(s)==="true";n&&!f&&i(!0)},[s,n]),{isOpen:e,startTutorial:()=>i(!0),closeTutorial:()=>{localStorage.setItem(s,"true"),i(!1)},completeTutorial:()=>{localStorage.setItem(s,"true"),i(!1)},resetTutorial:()=>{localStorage.removeItem(s)}}};function et(t){return Array.from(t).map(n=>n.charCodeAt(0).toString(16).padStart(2,"0")).join("")}function ot(t){let n="";for(let e=0;e<t.length;e+=2){const i=t.substring(e,e+2);n+=String.fromCharCode(parseInt(i,16))}return n}function nt(t,n){try{const e=et(t),i=new URL(window.location.href);return i.search="",i.hash=n?`lang=${n}&code=${e}`:`code=${e}`,i.toString()}catch(e){return console.error("Failed to encode code to URL:",e),window.location.href}}function Lt(){try{const t=window.location.hash.startsWith("#")?window.location.hash.substring(1):window.location.hash,e=new URLSearchParams(t).get("code");return e?/^[0-9a-fA-F]*$/.test(e)?ot(e):(console.error("Invalid hex code in URL hash"),null):null}catch(t){return console.error("Failed to decode code from URL hash:",t),null}}function Bt(){try{const t=window.location.hash.startsWith("#")?window.location.hash.substring(1):window.location.hash,e=new URLSearchParams(t).get("lang");return e==="func"||e==="tolk"?e:null}catch(t){return console.error("Failed to decode language from URL hash:",t),null}}const rt="_traceViewWrapper_k6tkh_1",at="_mainActionContainer_k6tkh_11",st="_appContainer_k6tkh_19",it="_executeButton_k6tkh_57",ct="_shareButton_k6tkh_85",lt="_copied_k6tkh_104",dt="_editorPanel_k6tkh_148",ut="_editorsContainer_k6tkh_153",ht="_editorPanelLeft_k6tkh_169",_t="_editorPanelRight_k6tkh_173",mt="_settingsContainer_k6tkh_177",pt="_settingsButton_k6tkh_181",gt="_settingsDropdown_k6tkh_200",ft="_settingsItem_k6tkh_215",kt="_checkboxCustom_k6tkh_241",xt="_checkboxLabel_k6tkh_281",j={traceViewWrapper:rt,mainActionContainer:at,appContainer:st,executeButton:it,shareButton:ct,copied:lt,editorPanel:dt,editorsContainer:ut,editorPanelLeft:ht,editorPanelRight:_t,settingsContainer:mt,settingsButton:pt,settingsDropdown:gt,settingsItem:ft,checkboxCustom:kt,checkboxLabel:xt},St=({value:t,lang:n})=>{const[e,i]=l.useState(!1),s=`${j.shareButton} ${e?j.copied:""}`,g=l.useCallback(async()=>{const u=nt(t,n);try{await navigator.clipboard.writeText(u),i(!0),setTimeout(()=>i(!1),1e3),console.log("Share URL copied to clipboard:",u)}catch(x){console.error("Failed to copy to clipboard:",x);const h=document.createElement("textarea");h.value=u,document.body.appendChild(h),h.select();const f=document.execCommand("copy");document.body.removeChild(h),f&&(i(!0),setTimeout(()=>i(!1),1e3))}},[t,n]);return o.jsxs(o.Fragment,{children:[o.jsxs(T,{onClick:()=>void g(),title:e?"Link copied!":"Share code via URL",className:s,"aria-label":e?"Code link copied to clipboard":"Share code via URL","data-testid":"share-button",children:[e?o.jsx(A,{size:16,"aria-hidden":"true"}):o.jsx(N,{size:16,"aria-hidden":"true"}),e?"Copied!":"Share"]}),o.jsx("div",{className:"sr-only","aria-live":"polite","aria-atomic":"true",children:e&&"Share link copied to clipboard"})]})},wt="_loaderContainer_eltuc_1",bt="_loader_eltuc_1",z={loaderContainer:wt,loader:bt},jt=({children:t})=>o.jsxs("div",{className:z.loaderContainer,children:[o.jsx("div",{className:z.loader}),t]});export{jt as B,St as S,Ct as T,Bt as a,Lt as d,j as s,vt as u};
