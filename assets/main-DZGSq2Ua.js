const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./index-CRgupKgH.js","./InlineLoader-olTLTqPR.js","./ton-vendor-C5ZEPYsr.js","./ton-assembly-test-dev-DhihHBLs.js","./InlineLoader-fi41-xDu.css","./monaco-editor-core-BNZEfIW9.js","./monaco-editor-core-GL-q52Lm.css","./index-CW3wO_9q.css","./index-B_mwvkjD.js","./index-CpH-Q0Gt.css"])))=>i.map(i=>d[i]);
import{j as e,r as h,i as Fe,R as z,k as Ae,l as We,B as Z,m as de,e as ue,n as Pe,a as te,u as Oe,o as qe,p as ze,q as Ge,I as P,F as Ke,s as Ue,b as Je,G as Ye,T as Ze,H as Xe,P as Qe}from"./InlineLoader-olTLTqPR.js";import{_ as me}from"./monaco-editor-core-BNZEfIW9.js";import{C as et,S as q,a as tt,u as st,n as se,t as at,T as nt}from"./useTraceStepper-B-i2M9NL.js";import"./ton-vendor-C5ZEPYsr.js";import"./ton-assembly-test-dev-DhihHBLs.js";import"./ton-sandbox-DHhCxGTc.js";const ot="_addressValue_pwqhv_1",lt="_copyIcon_pwqhv_26",ae={addressValue:ot,copyIcon:lt},$=({address:t,className:n})=>{const o=`${ae.addressValue} ${n??""}`.trim();return e.jsxs("span",{className:o,title:t,children:[t,e.jsx(et,{className:ae.copyIcon,title:"Copy address",value:t})]})},N=t=>t==null||t===0n?"0 TON":`${(Number(t)/1e9).toFixed(9).replace(/(\\.[0-9]*[1-9])0+$/,"$1").replace(/\\.0+$/,"")} TON`,D=t=>t?t==="external"?"External":String(t):"—",U=t=>e.jsx("span",{className:t?"booleanTrue":"booleanFalse",children:t?"Yes":"No"}),V=t=>t==null?"—":e.jsx("span",{className:"number-value",children:t.toString()}),ne=(t,n,o)=>t?t.length<=n+o+3?t:`${t.substring(0,n)}...${t.substring(t.length-o)}`:"—",it="_transactionDetailsContainer_9whhp_1",rt="_detailRow_9whhp_23",ct="_detailLabel_9whhp_47",dt="_detailValue_9whhp_62",ut="_detailValueFull_9whhp_71 _detailValue_9whhp_62",mt="_gasValue_9whhp_83",ht="_currencyValue_9whhp_88",xt="_timestampValue_9whhp_98",_t="_timestampDetailSecondary_9whhp_102",pt="_numberValue_9whhp_106",Ct="_booleanTrue_9whhp_109",jt="_booleanFalse_9whhp_114",vt="_hashValue_9whhp_119",Nt="_multiColumnRow_9whhp_144",gt="_multiColumnItem_9whhp_151",ft="_multiColumnItemTitle_9whhp_168",yt="_multiColumnItemValue_9whhp_175",wt="_labeledSectionRow_9whhp_181",bt="_labeledSectionTitle_9whhp_189",It="_labeledSectionContent_9whhp_204",a={transactionDetailsContainer:it,detailRow:rt,detailLabel:ct,detailValue:dt,detailValueFull:ut,gasValue:mt,currencyValue:ht,timestampValue:xt,timestampDetailSecondary:_t,numberValue:pt,booleanTrue:Ct,booleanFalse:jt,hashValue:vt,multiColumnRow:Nt,multiColumnItem:gt,multiColumnItemTitle:ft,multiColumnItemValue:yt,labeledSectionRow:wt,labeledSectionTitle:bt,labeledSectionContent:It},oe=t=>{if(t===void 0)return"—";const n=typeof t=="string"?new Date(t):new Date(t*1e3),o=R=>R.toString().padStart(2,"0"),r=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],l=n.getDate(),x=n.getMonth(),i=x+1,d=n.getFullYear(),u=n.getHours(),w=n.getMinutes(),g=n.getSeconds(),f=`${o(l)}.${o(i)}.${d}, ${o(u)}:${o(w)}:${o(g)}`,j=`${o(l)} ${r[x]}, ${o(u)}:${o(w)}`;return e.jsxs(e.Fragment,{children:[f,e.jsxs("span",{className:a.timestampDetailSecondary,children:[" — ",j]})]})},St=({data:t})=>{const n=i=>e.jsx("span",{className:i?a.booleanTrue:a.booleanFalse,children:i?"Yes":"No"}),o=t.result.emulatedTx,r=t.result.money,l=o.computeInfo!=="skipped"&&o.computeInfo.success,x=l?"success":"failed";return e.jsxs("div",{className:a.transactionDetailsContainer,children:[e.jsxs("div",{className:a.detailRow,children:[e.jsx("div",{className:a.detailLabel,children:"Status"}),e.jsx("div",{className:a.detailValue,children:e.jsx(q,{type:x})})]}),e.jsxs("div",{className:a.detailRow,children:[e.jsx("div",{className:a.detailLabel,children:"Account"}),e.jsx("div",{className:a.detailValue,children:e.jsx($,{address:D(t.result.inMsg.contract)})})]}),t.result.inMsg.sender&&e.jsxs("div",{className:a.detailRow,children:[e.jsx("div",{className:a.detailLabel,children:"Sender"}),e.jsx("div",{className:a.detailValue,children:e.jsx($,{address:D(t.result.inMsg.sender)})})]}),e.jsxs("div",{className:a.detailRow,children:[e.jsx("div",{className:a.detailLabel,children:"Time"}),e.jsx("div",{className:`${a.detailValue} ${a.timestampValue}`,children:oe(o.utime)})]}),e.jsxs("div",{className:a.detailRow,children:[e.jsx("div",{className:a.detailLabel,children:"LT"}),e.jsx("div",{className:`${a.detailValue} ${a.numberValue}`,children:String(o.lt)})]}),t.result.inMsg.amount&&e.jsxs("div",{className:a.detailRow,children:[e.jsx("div",{className:a.detailLabel,children:"Amount In"}),e.jsx("div",{className:`${a.detailValue} ${a.currencyValue}`,children:N(t.result.inMsg.amount)})]}),e.jsxs("div",{className:a.labeledSectionRow,children:[e.jsx("div",{className:a.labeledSectionTitle,children:"Fees & Balance"}),e.jsx("div",{className:a.labeledSectionContent,children:e.jsxs("div",{className:a.multiColumnRow,children:[e.jsxs("div",{className:a.multiColumnItem,children:[e.jsx("div",{className:a.multiColumnItemTitle,children:"Balance before"}),e.jsx("div",{className:`${a.multiColumnItemValue} ${a.currencyValue}`,children:N(r.balanceBefore)})]}),e.jsxs("div",{className:a.multiColumnItem,children:[e.jsx("div",{className:a.multiColumnItemTitle,children:"Amount Sent (Total)"}),e.jsx("div",{className:`${a.multiColumnItemValue} ${a.currencyValue}`,children:N(r.sentTotal)})]}),e.jsxs("div",{className:a.multiColumnItem,children:[e.jsx("div",{className:a.multiColumnItemTitle,children:"Total Fee"}),e.jsx("div",{className:`${a.multiColumnItemValue} ${a.currencyValue}`,children:N(r.totalFees)})]}),e.jsxs("div",{className:a.multiColumnItem,children:[e.jsx("div",{className:a.multiColumnItemTitle,children:"Gas Fee"}),e.jsx("div",{className:`${a.multiColumnItemValue} ${a.gasValue} ${a.currencyValue}`,children:o.computeInfo!=="skipped"?N(o.computeInfo.gasFees):"N/A"})]}),e.jsxs("div",{className:a.multiColumnItem,children:[e.jsx("div",{className:a.multiColumnItemTitle,children:"Balance after"}),e.jsx("div",{className:`${a.multiColumnItemValue} ${a.currencyValue}`,children:N(r.balanceAfter)})]})]})})]}),e.jsxs("div",{className:a.labeledSectionRow,children:[e.jsx("div",{className:a.labeledSectionTitle,children:"Compute Phase"}),e.jsx("div",{className:a.labeledSectionContent,children:o.computeInfo==="skipped"?e.jsx("div",{className:a.detailValueFull,children:"Skipped"}):e.jsxs("div",{className:a.multiColumnRow,children:[e.jsxs("div",{className:a.multiColumnItem,children:[e.jsx("div",{className:a.multiColumnItemTitle,children:"Success"}),e.jsx("div",{className:`${a.multiColumnItemValue} ${o.computeInfo.success?a.booleanTrue:a.booleanFalse}`,children:n(o.computeInfo.success)})]}),e.jsxs("div",{className:a.multiColumnItem,children:[e.jsx("div",{className:a.multiColumnItemTitle,children:"Exit code"}),e.jsx("div",{className:`${a.multiColumnItemValue} ${a.numberValue}`,children:V(o.computeInfo.exitCode)})]}),e.jsxs("div",{className:a.multiColumnItem,children:[e.jsx("div",{className:a.multiColumnItemTitle,children:"VM steps"}),e.jsx("div",{className:`${a.multiColumnItemValue} ${a.numberValue}`,children:V(o.computeInfo.vmSteps)})]}),e.jsxs("div",{className:a.multiColumnItem,children:[e.jsx("div",{className:a.multiColumnItemTitle,children:"Gas used"}),e.jsx("div",{className:`${a.multiColumnItemValue} ${a.gasValue}`,children:V(o.computeInfo.gasUsed)})]}),e.jsxs("div",{className:a.multiColumnItem,children:[e.jsx("div",{className:a.multiColumnItemTitle,children:"Gas fees"}),e.jsx("div",{className:`${a.multiColumnItemValue} ${a.gasValue} ${a.currencyValue}`,children:N(o.computeInfo.gasFees)})]})]})})]}),e.jsxs("div",{className:a.labeledSectionRow,children:[e.jsx("div",{className:a.labeledSectionTitle,children:"Action Phase"}),e.jsx("div",{className:a.labeledSectionContent,children:e.jsxs("div",{className:a.multiColumnRow,children:[e.jsxs("div",{className:a.multiColumnItem,children:[e.jsx("div",{className:a.multiColumnItemTitle,children:"Success"}),e.jsx("div",{className:`${a.multiColumnItemValue} ${l?a.booleanTrue:a.booleanFalse}`,children:n(l)})]}),e.jsxs("div",{className:a.multiColumnItem,children:[e.jsx("div",{className:a.multiColumnItemTitle,children:"Total actions"}),e.jsx("div",{className:`${a.multiColumnItemValue} ${a.numberValue}`,children:V(o.actions.length)})]})]})})]}),t.result.emulatorVersion&&e.jsxs("div",{className:a.labeledSectionRow,children:[e.jsx("div",{className:a.labeledSectionTitle,children:"Meta"}),e.jsx("div",{className:a.labeledSectionContent,children:e.jsxs("div",{className:a.multiColumnRow,children:[e.jsxs("div",{className:a.multiColumnItem,children:[e.jsx("div",{className:a.multiColumnItemTitle,children:"Emulator Version"}),e.jsx("div",{className:`${a.multiColumnItemValue} ${a.hashValue}`,children:t.result.emulatorVersion.commitHash.substring(0,7)})]}),e.jsxs("div",{className:a.multiColumnItem,children:[e.jsx("div",{className:a.multiColumnItemTitle,children:"Emulator Date"}),e.jsx("div",{className:`${a.multiColumnItemValue} ${a.timestampValue}`,children:oe(t.result.emulatorVersion?.commitDate)})]})]})})]})]})},kt=t=>{switch(t.type){case"sendMsg":{const n=t.outMsg,o=n.info.type==="internal"?"Internal":"External",r=n.info.type==="internal"||n.info.type==="external-out"?n.info.dest:"unknown",l=typeof r=="string"?r:D(r),x=n.info.type==="internal"?N(n.info.value.coins):"";return{title:"Send Message",icon:"send-icon",description:`${o} → ${l}`,value:x}}case"setCode":return{title:"Set Code",icon:"code-icon",description:"Update contract code",value:""};case"reserve":return{title:"Reserve",icon:"reserve-icon",description:`Mode: ${t.mode}`,value:N(t.currency.coins)};default:return{title:"Unknown",icon:"unknown-icon",description:`Type: ${t.type}`,value:""}}},Tt="_noActions_10i5u_1",Lt="_actionsHorizontalList_10i5u_7",Vt="_actionSendMsg_10i5u_49 _actionCardBase_10i5u_30",Mt="_actionSetCode_10i5u_53 _actionCardBase_10i5u_30",$t="_actionReserve_10i5u_57 _actionCardBase_10i5u_30",Rt="_actionChangeLibrary_10i5u_61 _actionCardBase_10i5u_30",Ht="_actionUnknown_10i5u_65 _actionCardBase_10i5u_30",Bt="_actionCardIconSendMsg_10i5u_80 _actionCardIcon_10i5u_69",Dt="_actionCardIconSetCode_10i5u_84 _actionCardIcon_10i5u_69",Et="_actionCardIconReserve_10i5u_88 _actionCardIcon_10i5u_69",Ft="_actionCardIconChangeLibrary_10i5u_92 _actionCardIcon_10i5u_69",At="_actionCardIconUnknown_10i5u_96 _actionCardIcon_10i5u_69",Wt="_actionCardContent_10i5u_101",Pt="_actionCardTitle_10i5u_108",Ot="_actionCardDescription_10i5u_115",qt="_actionCardValue_10i5u_123",zt="_actionCardView_10i5u_130",Gt="_viewActionBtn_10i5u_137",p={noActions:Tt,actionsHorizontalList:Lt,actionSendMsg:Vt,actionSetCode:Mt,actionReserve:$t,actionChangeLibrary:Rt,actionUnknown:Ht,actionCardIconSendMsg:Bt,actionCardIconSetCode:Dt,actionCardIconReserve:Et,actionCardIconChangeLibrary:Ft,actionCardIconUnknown:At,actionCardContent:Wt,actionCardTitle:Pt,actionCardDescription:Ot,actionCardValue:qt,actionCardView:zt,viewActionBtn:Gt},Kt=t=>{switch(t){case"sendMsg":return p.actionCardIconSendMsg;case"setCode":return p.actionCardIconSetCode;case"reserve":return p.actionCardIconReserve;case"changeLibrary":return p.actionCardIconChangeLibrary;default:return p.actionCardIconUnknown}},Ut=t=>{switch(t){case"sendMsg":return p.actionSendMsg;case"setCode":return p.actionSetCode;case"reserve":return p.actionReserve;case"changeLibrary":return p.actionChangeLibrary;default:return p.actionUnknown}},Jt=({actions:t,onSelect:n})=>t.length===0?e.jsx("p",{className:p.noActions,children:"No out actions."}):e.jsx("div",{className:p.actionsHorizontalList,children:t.map((o,r)=>{const l=kt(o),x=u=>{(u.key==="Enter"||u.key===" ")&&n(r)},i=Ut(o.type),d=Kt(o.type);return e.jsxs("div",{className:i,onClick:()=>n(r),onKeyDown:x,role:"button",tabIndex:0,children:[e.jsxs("div",{className:p.actionCardContent,children:[e.jsxs("div",{className:d,children:[o.type==="sendMsg"&&e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("path",{d:"M22 2L11 13",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("path",{d:"M22 2L15 22L11 13L2 9L22 2Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]}),o.type==="setCode"&&e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("path",{d:"M16 18L22 12L16 6",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("path",{d:"M8 6L2 12L8 18",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]}),o.type==="reserve"&&e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("path",{d:"M12 1V23",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("path",{d:"M17 5H9.5C8.57174 5 7.6815 5.36875 7.02513 6.02513C6.36875 6.6815 6 7.57174 6 8.5C6 9.42826 6.36875 10.3185 7.02513 10.9749C7.6815 11.6313 8.57174 12 9.5 12H14.5C15.4283 12 16.3185 12.3687 16.9749 13.0251C17.6313 13.6815 18 14.5717 18 15.5C18 16.4283 17.6313 17.3185 16.9749 17.9749C16.3185 18.6313 15.4283 19 14.5 19H6",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]})]}),e.jsx("div",{className:p.actionCardTitle,children:l.title}),e.jsx("div",{className:p.actionCardDescription,children:l.description}),l.value&&e.jsx("div",{className:p.actionCardValue,children:l.value})]}),e.jsx("div",{className:p.actionCardView,children:e.jsxs("button",{className:p.viewActionBtn,children:["View Details",e.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{d:"M15 12L9 8V16L15 12Z",fill:"currentColor",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})]})})]},r)})}),Yt="_modalOverlay_1bphz_1",Zt="_modalContent_1bphz_15",le={modalOverlay:Yt,modalContent:Zt},Xt=({open:t,onClose:n,children:o,contentClassName:r})=>{if(h.useEffect(()=>{const i=d=>{d.key==="Escape"&&n()};return t&&document.addEventListener("keydown",i),()=>{document.removeEventListener("keydown",i)}},[t,n]),!t)return null;const l=i=>{(i.key==="Enter"||i.key===" ")&&n()},x=`${le.modalContent} ${r||""}`.trim();return e.jsx("div",{className:le.modalOverlay,onClick:n,onKeyDown:l,role:"button",tabIndex:0,"aria-label":"Close modal",children:e.jsx("div",{className:x,onClick:i=>i.stopPropagation(),children:o})})},Qt="_actionModalHeader_ewm9s_1",es="_actionHeaderSendMsg_ewm9s_10 _actionModalHeader_ewm9s_1",ts="_actionHeaderSetCode_ewm9s_16 _actionModalHeader_ewm9s_1",ss="_actionHeaderReserve_ewm9s_22 _actionModalHeader_ewm9s_1",as="_modalTitleContent_ewm9s_34",ns="_modalTitleMain_ewm9s_39",os="_modalTitleSub_ewm9s_45",ls="_actionModalHeaderIcon_ewm9s_60",is="_actionModalHeaderIconContainerSendMsg_ewm9s_81 _actionModalHeaderIconContainerBase_ewm9s_64",rs="_actionModalHeaderIconContainerSetCode_ewm9s_86 _actionModalHeaderIconContainerBase_ewm9s_64",cs="_actionModalHeaderIconContainerReserve_ewm9s_91 _actionModalHeaderIconContainerBase_ewm9s_64",ds="_actionModalHeaderIconContainerChangeLibrary_ewm9s_96 _actionModalHeaderIconContainerBase_ewm9s_64",us="_actionModalClose_ewm9s_106",ms="_actionModalBody_ewm9s_129",hs="_actionItemCard_ewm9s_135",xs="_actionDetailsContent_ewm9s_142",_s="_actionDetailSection_ewm9s_144",ps="_detailRow_ewm9s_174",Cs="_detailLabel_ewm9s_184",js="_detailValue_ewm9s_198",vs="_actionModalFullScreenContent_ewm9s_264",s={actionModalHeader:Qt,actionHeaderSendMsg:es,actionHeaderSetCode:ts,actionHeaderReserve:ss,modalTitleContent:as,modalTitleMain:ns,modalTitleSub:os,actionModalHeaderIcon:ls,actionModalHeaderIconContainerSendMsg:is,actionModalHeaderIconContainerSetCode:rs,actionModalHeaderIconContainerReserve:cs,actionModalHeaderIconContainerChangeLibrary:ds,actionModalClose:us,actionModalBody:ms,actionItemCard:hs,actionDetailsContent:xs,actionDetailSection:_s,detailRow:ps,detailLabel:Cs,detailValue:js,actionModalFullScreenContent:vs},Ns=(t,n)=>{if(!t)return null;const o=t.src??n;return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:s.detailRow,children:[e.jsx("div",{className:s.detailLabel,children:"Type:"}),e.jsx("div",{className:s.detailValue,children:t.type})]}),t.type==="internal"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:s.detailRow,children:[e.jsx("div",{className:s.detailLabel,children:"Source:"}),e.jsx("div",{className:s.detailValue,children:o?e.jsx($,{address:D(o)}):"unknown"})]}),e.jsxs("div",{className:s.detailRow,children:[e.jsx("div",{className:s.detailLabel,children:"Destination:"}),e.jsx("div",{className:s.detailValue,children:e.jsx($,{address:D(t.dest)})})]}),e.jsxs("div",{className:s.detailRow,children:[e.jsx("div",{className:s.detailLabel,children:"Value:"}),e.jsx("div",{className:s.detailValue,children:N(t.value.coins)})]}),t.value.other&&Object.keys(t.value.other).length>0&&e.jsxs("div",{className:s.detailRow,children:[e.jsx("div",{className:s.detailLabel,children:"Other Currencies:"}),e.jsx("div",{className:s.detailValue,children:e.jsx("pre",{children:JSON.stringify(t.value.other,null,2)})})]}),e.jsxs("div",{className:s.detailRow,children:[e.jsx("div",{className:s.detailLabel,children:"Forward Fee:"}),e.jsx("div",{className:s.detailValue,children:N(t.forwardFee)})]}),e.jsxs("div",{className:s.detailRow,children:[e.jsx("div",{className:s.detailLabel,children:"IHR Fee:"}),e.jsx("div",{className:s.detailValue,children:N(t.ihrFee)})]}),e.jsxs("div",{className:s.detailRow,children:[e.jsx("div",{className:s.detailLabel,children:"Bounce:"}),e.jsx("div",{className:s.detailValue,children:U(t.bounce)})]}),e.jsxs("div",{className:s.detailRow,children:[e.jsx("div",{className:s.detailLabel,children:"Bounced:"}),e.jsx("div",{className:s.detailValue,children:U(t.bounced)})]}),e.jsxs("div",{className:s.detailRow,children:[e.jsx("div",{className:s.detailLabel,children:"IHR Disabled:"}),e.jsx("div",{className:s.detailValue,children:U(t.ihrDisabled)})]})]}),t.type==="external-out"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:s.detailRow,children:[e.jsx("div",{className:s.detailLabel,children:"Source:"}),e.jsx("div",{className:s.detailValue,children:o?e.jsx($,{address:D(o)}):"unknown"})]}),e.jsxs("div",{className:s.detailRow,children:[e.jsx("div",{className:s.detailLabel,children:"Destination:"}),e.jsx("div",{className:s.detailValue,children:t.dest?e.jsx($,{address:D(t.dest)}):"unknown"})]})]}),e.jsxs("div",{className:s.detailRow,children:[e.jsx("div",{className:s.detailLabel,children:"Created LT:"}),e.jsx("div",{className:s.detailValue,children:V(t.createdLt)})]}),e.jsxs("div",{className:s.detailRow,children:[e.jsx("div",{className:s.detailLabel,children:"Created At:"}),e.jsx("div",{className:s.detailValue,children:t.createdAt})]})]})},gs=t=>t?e.jsxs("div",{className:s.actionDetailSection,children:[e.jsx("h4",{children:"State Init"}),t.code&&e.jsxs("div",{className:s.detailRow,children:[e.jsx("div",{className:s.detailLabel,children:"Code Hash:"}),e.jsx("div",{className:s.detailValue,children:t.code.hash().toString("hex")})]}),t.data&&e.jsxs("div",{className:s.detailRow,children:[e.jsx("div",{className:s.detailLabel,children:"Data Hash:"}),e.jsx("div",{className:s.detailValue,children:t.data.hash().toString("hex")})]}),t.splitDepth!==void 0&&e.jsxs("div",{className:s.detailRow,children:[e.jsx("div",{className:s.detailLabel,children:"Split Depth:"}),e.jsx("div",{className:s.detailValue,children:V(t.splitDepth)})]})]}):e.jsxs("div",{className:s.detailRow,children:[e.jsx("div",{className:s.detailLabel,children:"State Init:"}),e.jsx("div",{className:s.detailValue,children:"Not present"})]}),fs=(t,n)=>{switch(t.type){case"sendMsg":return e.jsxs("div",{className:s.actionDetailsContent,children:[e.jsxs("div",{className:s.detailRow,children:[e.jsx("div",{className:s.detailLabel,children:"Mode:"}),e.jsx("div",{className:s.detailValue,children:V(t.mode)})]}),e.jsx("h4",{children:"Message Info:"}),Ns(t.outMsg.info,n),e.jsx("h4",{children:"Message Body:"}),e.jsxs("div",{className:s.detailRow,children:[e.jsx("div",{className:s.detailLabel,children:"BoC:"}),e.jsx("div",{className:s.detailValue,children:e.jsx("pre",{children:t.outMsg.body.toBoc().toString("hex")})})]}),e.jsxs("div",{className:s.detailRow,children:[e.jsx("div",{className:s.detailLabel,children:"Cell:"}),e.jsx("div",{className:s.detailValue,children:e.jsx("pre",{children:t.outMsg.body.toString()})})]}),gs(t.outMsg.init)]});case"setCode":return e.jsxs("div",{className:s.actionDetailsContent,children:[e.jsx("h3",{children:"Set Code Details"}),e.jsxs("div",{className:s.detailRow,children:[e.jsx("div",{className:s.detailLabel,children:"New Code:"}),e.jsx("div",{className:s.detailValue,children:t.newCode.toString()})]})]});case"reserve":return e.jsxs("div",{className:s.actionDetailsContent,children:[e.jsx("h3",{children:"Reserve Currency Details"}),e.jsxs("div",{className:s.detailRow,children:[e.jsx("div",{className:s.detailLabel,children:"Mode:"}),e.jsx("div",{className:s.detailValue,children:V(t.mode)})]}),e.jsxs("div",{className:s.detailRow,children:[e.jsx("div",{className:s.detailLabel,children:"TON Coins:"}),e.jsx("div",{className:s.detailValue,children:N(t.currency.coins)})]}),t.currency.other&&Object.keys(t.currency.other).length>0&&e.jsxs("div",{className:s.detailRow,children:[e.jsx("div",{className:s.detailLabel,children:"Other Currencies:"}),e.jsx("div",{className:s.detailValue,children:e.jsx("pre",{children:JSON.stringify(t.currency.other,null,2)})})]})]});case"changeLibrary":return e.jsxs("div",{className:s.actionDetailsContent,children:[e.jsx("h3",{children:"Change Library Details"}),e.jsxs("div",{className:s.detailRow,children:[e.jsx("div",{className:s.detailLabel,children:"Mode:"}),e.jsx("div",{className:s.detailValue,children:V(t.mode)})]}),t.libRef.type==="hash"&&e.jsxs("div",{className:s.detailRow,children:[e.jsx("div",{className:s.detailLabel,children:"Library Hash:"}),e.jsx("div",{className:s.detailValue,children:t.libRef.libHash.toString("hex")})]}),t.libRef.type==="ref"&&e.jsxs("div",{className:s.detailRow,children:[e.jsx("div",{className:s.detailLabel,children:"Library Cell Hash:"}),e.jsx("div",{className:s.detailValue,children:t.libRef.library.hash().toString("hex")})]})]});default:return e.jsx("pre",{children:"Unknown action type"})}};function ys(t){switch(t.type){case"sendMsg":return{actionTitle:"Send Message",headerStyle:s.actionHeaderSendMsg,iconContainerClass:s.actionModalHeaderIconContainerSendMsg,headerIconSvg:e.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M22 2L11 13M22 2L15 22L11 13L2 9L22 2Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})};case"setCode":return{actionTitle:"Set Code",headerStyle:s.actionHeaderSetCode,iconContainerClass:s.actionModalHeaderIconContainerSetCode,headerIconSvg:e.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M16 18L22 12L16 6M8 6L2 12L8 18",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})};case"reserve":return{actionTitle:"Reserve Currency",headerStyle:s.actionHeaderReserve,iconContainerClass:s.actionModalHeaderIconContainerReserve,headerIconSvg:e.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M12 1V23M17 5H9.5C8.57174 5 7.6815 5.36875 7.02513 6.02513C6.36875 6.6815 6 7.57174 6 8.5C6 9.42826 6.36875 10.3185 7.02513 10.9749C7.6815 11.6313 8.57174 12 9.5 12H14.5C15.4283 12 16.3185 12.3687 16.9749 13.0251C17.6313 13.6815 18 14.5717 18 15.5C18 16.4283 17.6313 17.3185 16.9749 17.9749C16.3185 18.6313 15.4283 19 14.5 19H6",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})};case"changeLibrary":return{actionTitle:"Change Library",headerStyle:s.actionModalHeader,iconContainerClass:s.actionModalHeaderIconContainerChangeLibrary,headerIconSvg:e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",children:[e.jsx("path",{d:"M4 19V5C4 3.89543 4.89543 3 6 3H18C19.1046 3 20 3.89543 20 5V19L12 14L4 19Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("path",{d:"M8 7H16",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]})}}}const ws=({action:t,index:n,contractAddress:o,onClose:r})=>{if(!t)return null;const{actionTitle:l,headerStyle:x,iconContainerClass:i,headerIconSvg:d}=ys(t);return e.jsxs(Xt,{open:!!t,onClose:r,contentClassName:s.actionModalFullScreenContent,children:[e.jsxs("div",{className:`${s.actionModalHeader} ${x}`,children:[e.jsxs("div",{className:s.modalTitleContent,children:[e.jsxs("h3",{className:s.modalTitleMain,children:[e.jsx("span",{className:`${i} ${s.actionModalHeaderIcon}`,children:d}),l]}),e.jsxs("span",{className:s.modalTitleSub,children:["Action #",n+1]})]}),e.jsx("button",{type:"button",onClick:r,className:s.actionModalClose,"aria-label":"Close modal",children:e.jsx(Fe,{svg:e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",children:[e.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),e.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})})]}),e.jsx("div",{className:s.actionModalBody,children:e.jsx("div",{className:s.actionItemCard,children:fs(t,o)})})]})},bs=({result:t})=>{const[n,o]=h.useState(null),r=i=>o(i),l=()=>o(null),x=n!==null?t.result.emulatedTx.actions[n]:null;return e.jsxs("div",{className:"retrace-result-container",children:[e.jsx(St,{data:t}),e.jsxs("div",{className:"actions-section",children:[e.jsxs("h3",{className:"actions-heading",children:["Out Actions (",t.result.emulatedTx.actions.length,")"]}),e.jsx(Jt,{actions:t.result.emulatedTx.actions,onSelect:r})]}),e.jsx(ws,{action:x,index:n??0,contractAddress:t.result.inMsg.contract,onClose:l}),t.result.emulatedTx.vmLogs&&e.jsx(ie,{title:"VM Logs",logs:t.result.emulatedTx.vmLogs,isExpandable:!0,defaultExpanded:!1}),t.result.emulatedTx.executorLogs&&e.jsx(ie,{title:"Executor Logs",logs:t.result.emulatedTx.executorLogs,isExpandable:!0,defaultExpanded:!1})]})},he=z.memo(bs);he.displayName="RetraceResultView";const Is="_logsContainer_12jnc_1",Ss="_expandableContainer_12jnc_8",ks="_expandableHeader_12jnc_15",Ts="_logsHeading_12jnc_39",Ls="_logsContent_12jnc_47",Vs="_logsContentInner_12jnc_53",Ms="_vmLogs_12jnc_57",$s="_copyButton_12jnc_69",T={logsContainer:Is,expandableContainer:Ss,expandableHeader:ks,logsHeading:Ts,logsContent:Ls,logsContentInner:Vs,vmLogs:Ms,copyButton:$s},ie=({logs:t,title:n="Logs",isExpandable:o=!1,defaultExpanded:r=!1})=>{const[l,x]=h.useState(r),[i,d]=h.useState("idle");if(!t)return null;const u=()=>{o&&x(!l)},w=j=>{o&&(j.key==="Enter"||j.key===" ")&&u()},g=async()=>{if(t)try{await navigator.clipboard.writeText(t),d("copied"),setTimeout(()=>d("idle"),1500)}catch(j){console.error("Failed to copy logs:",j)}},f=()=>e.jsxs("div",{className:T.logsContentInner,children:[e.jsx(Z,{variant:"ghost",size:"sm",onClick:()=>{g()},className:T.copyButton,"aria-label":i==="idle"?"Copy logs":"Logs copied",children:i==="idle"?e.jsx(de,{}):e.jsx(ue,{})}),e.jsx("pre",{className:T.vmLogs,children:t})]});return o?e.jsxs("div",{className:T.expandableContainer,children:[e.jsxs("div",{className:T.expandableHeader,onClick:u,onKeyDown:w,role:"button",tabIndex:0,"aria-expanded":l,children:[l?e.jsx(Ae,{}):e.jsx(We,{}),e.jsx("h3",{className:T.logsHeading,children:n})]}),l&&e.jsx("div",{className:T.logsContent,children:f()})]}):e.jsxs("div",{className:T.logsContainer,children:[n&&e.jsx("h3",{className:T.logsHeading,children:n}),f()]})},Rs="_inputWrapper_1qq5f_1",Hs="_focused_1qq5f_14",Bs="_searchIcon_1qq5f_19",Ds="_txInput_1qq5f_32",Es="_submitButton_1qq5f_45",Fs="_compactWrapper_1qq5f_55",As="_compactSearchIcon_1qq5f_60",Ws="_compactInput_1qq5f_69",Ps="_compactButton_1qq5f_74",L={inputWrapper:Rs,focused:Hs,searchIcon:Bs,txInput:Ds,submitButton:Es,compactWrapper:Fs,compactSearchIcon:As,compactInput:Ws,compactButton:Ps},re=({value:t,onChange:n,onSubmit:o,onFocus:r,onBlur:l,placeholder:x,loading:i,autoFocus:d=!1,compact:u=!1,onInputClick:w})=>{const[g,f]=h.useState(!1),j=M=>{M.key==="Enter"&&o()},R=`${L.inputWrapper} ${g?L.focused:""} ${u?L.compactWrapper:""}`,C=`${L.txInput} ${u?L.compactInput:""}`,S=`${L.submitButton} ${u?L.compactButton:""}`;return e.jsxs("div",{className:R,role:"search",children:[e.jsx("div",{className:`${L.searchIcon} ${u?L.compactSearchIcon:""}`,"aria-hidden":"true",children:e.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",children:[e.jsx("path",{d:"M11 19C15.4183 19 19 15.4183 19 11C19 6.58172 15.4183 3 11 3C6.58172 3 3 6.58172 3 11C3 15.4183 6.58172 19 11 19Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("path",{d:"M21 21L16.65 16.65",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]})}),e.jsx("input",{type:"text",spellCheck:"false",autoFocus:d,placeholder:x,value:t,onChange:M=>n(M.target.value),onKeyDown:j,onFocus:()=>{r?.(),f(!0)},onBlur:()=>{l?.(),f(!1)},onClick:w,className:C,"aria-label":x??"Search transaction","aria-describedby":u?void 0:"search-instructions"}),e.jsx(Z,{variant:"primary",size:u?"sm":"md",className:S,onClick:o,disabled:i,"aria-label":i?"Tracing transaction...":"Trace transaction",title:i?"Tracing...":"Trace transaction (Enter)",children:"Trace"}),!u&&e.jsx("div",{id:"search-instructions",className:"sr-only",children:"Press Enter or click Trace button to search. Use Ctrl+Enter or Cmd+Enter as shortcut."})]})},J="TxTracerHistoryV1",Os=5;function qs(){const[t,n]=h.useState([]);h.useEffect(()=>{try{const l=localStorage.getItem(J);l&&n(JSON.parse(l))}catch(l){console.error("Failed to load transaction history from localStorage",l),n([])}},[]);const o=h.useCallback(l=>{!l.hash||l.hash.trim()===""||n(x=>{const i=x.filter(u=>u.hash!==l.hash);i.unshift(l);const d=i.slice(0,Os);try{localStorage.setItem(J,JSON.stringify(d))}catch(u){console.error("Failed to save transaction history to localStorage",u)}return d})},[]),r=h.useCallback(l=>{n(x=>{const i=x.filter(d=>d.hash!==l);try{localStorage.setItem(J,JSON.stringify(i))}catch(d){console.error("Failed to save updated transaction history to localStorage",d)}return i})},[]);return{history:t,addToHistory:o,removeFromHistory:r}}const zs="_tooltipContainer_1tlpf_1",Gs="_iconWrapper_1tlpf_7",Ks="_tooltipBase_1tlpf_21",Us="_tooltip_1tlpf_1 _tooltipBase_1tlpf_21",O={tooltipContainer:zs,iconWrapper:Gs,tooltipBase:Ks,tooltip:Us,"tooltip-right":"_tooltip-right_1tlpf_55","tooltip-bottom":"_tooltip-bottom_1tlpf_79"},Js=({children:t,tooltipText:n,iconSize:o=16,placement:r="right"})=>{const l=`${O.tooltip} ${O[`tooltip-${r}`]}`;return e.jsxs("span",{className:O.tooltipContainer,children:[t,e.jsxs("span",{className:O.iconWrapper,role:"button",tabIndex:0,children:[e.jsx(Pe,{size:o,"aria-hidden":"true"}),e.jsx("span",{className:l,role:"tooltip",children:n})]})]})},Ys="_stackItemViewer_a4fe2_1",Zs={stackItemViewer:Ys},Xs="_cellNode_b2kls_1",Qs="_cellNodeColor1_b2kls_11",ea="_cellNodeColor2_b2kls_18",ta="_cellNodeColor3_b2kls_25",sa="_cellNodeColor4_b2kls_32",aa="_cellNodeColor5_b2kls_39",na="_cellInfo_b2kls_46",oa="_cellTextContent_b2kls_57",la="_cellInfoClickable_b2kls_67",ia="_cellRefs_b2kls_71",ra="_refsToggle_b2kls_77",ca="_copyButton_b2kls_83",da="_copied_b2kls_106",I={cellNode:Xs,cellNodeColor1:Qs,cellNodeColor2:ea,cellNodeColor3:ta,cellNodeColor4:sa,cellNodeColor5:aa,cellInfo:na,cellTextContent:oa,cellInfoClickable:la,cellRefs:ia,refsToggle:ra,copyButton:ca,copied:da},ua=()=>e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("rect",{x:"9",y:"9",width:"13",height:"13",rx:"2",ry:"2"}),e.jsx("path",{d:"M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"})]}),ma=()=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:e.jsx("polyline",{points:"20 6 9 17 4 12"})}),xe=(t,n=[])=>{n.push(t.bits.length);for(const o of t.refs)xe(o,n);return n},ha=(t,n)=>{if(n===0)return 200;const r=t/n*400;return Math.max(r,60)},Y=({cell:t,depth:n=0,maxBitsLength:o})=>{const[r,l]=h.useState(!0),[x,i]=h.useState(!1),d=h.useMemo(()=>{if(o!==void 0)return o;if(n===0){const C=xe(t);return Math.max(...C)}return 0},[t,n,o]),u=t.refs.length,w=ha(t.bits.length,d);if(n>10)return e.jsx("div",{className:I.cellNode,style:{marginLeft:10},children:"Max depth reached."});const g=C=>{C.stopPropagation(),u>0&&l(!r)},f=C=>{C.stopPropagation();const S=t.toBoc().toString("hex");navigator.clipboard.writeText(S).then(()=>{i(!0),setTimeout(()=>i(!1),1500)}).catch(M=>{console.error("Failed to copy BoC: ",M),setTimeout(()=>i(!1),1500)})},j=`${I.cellInfo} ${u>0?I.cellInfoClickable:""}`,R=I[`cellNodeColor${n%5+1}`];return e.jsxs("div",{className:`${I.cellNode}`,style:{marginLeft:n*5},children:[e.jsxs("div",{className:`${j} ${R}`,style:{width:w},onClick:u>0?g:void 0,onKeyDown:u>0?C=>{(C.key==="Enter"||C.key===" ")&&g(C)}:void 0,role:u>0?"button":void 0,tabIndex:u>0?0:void 0,children:[e.jsxs("div",{className:I.cellTextContent,children:[e.jsx("strong",{children:"Bits:"})," ",t.bits.length,e.jsx("br",{}),e.jsx("strong",{children:"Refs:"})," ",u>0?e.jsxs("span",{className:I.refsToggle,children:[r?"▾":"▸"," ",u]}):u]}),e.jsx("button",{className:`${I.copyButton} ${x?I.copied:""}`,onClick:f,title:"Copy BoC (Hex)",children:x?e.jsx(ma,{}):e.jsx(ua,{})})]}),r&&u>0&&e.jsx("div",{className:I.cellRefs,children:t.refs.map((C,S)=>e.jsx(Y,{cell:C,depth:n+1,maxBitsLength:d},`${t.hash().toString("hex")}-ref-${S}`))})]})},xa="_container_1n3df_1",_a="_label_1n3df_5",pa="_contentWrapper_1n3df_12",Ca="_copyButton_1n3df_19",ja="_content_1n3df_12",A={container:xa,label:_a,contentWrapper:pa,copyButton:Ca,content:ja},ce=({data:t,label:n,maxHeight:o=100})=>{const[r,l]=h.useState("idle"),x=async()=>{try{await navigator.clipboard.writeText(t),l("copied"),setTimeout(()=>l("idle"),1500)}catch(i){console.error("Failed to copy data:",i)}};return e.jsxs("div",{className:A.container,children:[n&&e.jsx("div",{className:A.label,children:n}),e.jsxs("div",{className:A.contentWrapper,children:[e.jsx("pre",{className:A.content,style:{maxHeight:`${o}px`},children:t}),e.jsx(Z,{variant:"ghost",size:"sm",onClick:()=>{x()},className:A.copyButton,"aria-label":r==="idle"?"Copy":"Copied",children:r==="idle"?e.jsx(de,{}):e.jsx(ue,{})})]})]})},va="_addressSection_gk4wi_1",Na="_addressRow_gk4wi_8",ga="_addressLabel_gk4wi_14",fa="_addressValue_gk4wi_21",B={addressSection:va,addressRow:Na,addressLabel:ga,addressValue:fa},ya=({address:t})=>{const n=t.toRawString(),o=t.toString();return e.jsxs("div",{className:B.addressSection,children:[e.jsxs("div",{className:B.addressRow,children:[e.jsx("div",{className:B.addressLabel,children:"Raw Address:"}),e.jsx("div",{className:B.addressValue,children:e.jsx($,{address:n})})]}),e.jsxs("div",{className:B.addressRow,children:[e.jsx("div",{className:B.addressLabel,children:"Friendly Address:"}),e.jsx("div",{className:B.addressValue,children:e.jsx($,{address:o})})]})]})},wa="_detailsContainer_fkrej_1",ba="_header_fkrej_12",Ia="_title_fkrej_20",Sa="_closeButton_fkrej_27",ka="_contentContainer_fkrej_47",Ta="_treeRow_fkrej_56",La="_detailsRow_fkrej_63",Va="_treeViewContainer_fkrej_69",Ma="_dataSection_fkrej_80",y={detailsContainer:wa,header:ba,title:Ia,closeButton:Sa,contentContainer:ka,treeRow:Ta,detailsRow:La,treeViewContainer:Va,dataSection:Ma},$a=({itemData:t,title:n,onClose:o})=>{if(!t)return e.jsx("div",{className:y.detailsContainer,children:e.jsx("p",{children:"No item selected"})});let r=null,l=null;const x=d=>d.$==="Cell"&&d?.boc?te.Cell.fromHex(d.boc):(d.$==="Slice"||d.$==="Builder")&&d?.hex?te.Cell.fromHex(d.hex):null,i=d=>{try{return d.asSlice().loadAddress()}catch{return}};try{const d=x(t);if(d)if(d.bits.length===267&&d.refs.length===0){const u=i(d);u?(r=e.jsx(ya,{address:u}),l=null):(r=e.jsx(e.Fragment,{children:e.jsx("div",{className:y.dataSection,children:e.jsx(ce,{label:"",data:d.toBoc().toString("hex")})})}),l=e.jsx(Y,{cell:d}))}else r=e.jsx(e.Fragment,{children:e.jsx("div",{className:y.dataSection,children:e.jsx(ce,{label:"",data:d.toBoc().toString("hex")})})}),l=e.jsx(Y,{cell:d});else l=null,r=e.jsx("p",{children:"Details for the selected item will be shown here."})}catch(d){console.error("Error processing item data:",d),l=null,r=e.jsx("p",{children:"Error displaying item details. Data might be malformed."})}return e.jsxs("div",{className:y.detailsContainer,children:[(n||o)&&e.jsxs("div",{className:y.header,children:[n&&e.jsx("h3",{className:y.title,children:n}),o&&e.jsx("button",{onClick:o,className:y.closeButton,"aria-label":"Close details",children:"×"})]}),e.jsxs("div",{className:y.contentContainer,children:[e.jsx("div",{className:y.detailsRow,children:r}),l&&e.jsx("div",{className:y.treeRow,children:e.jsx("div",{className:y.treeViewContainer,children:l})})]})]})},Ra=({element:t,title:n,onBack:o})=>e.jsx("div",{className:Zs.stackItemViewer,children:e.jsx($a,{itemData:t,title:n,onClose:o})}),Ha="_traceViewWrapper_f0nuo_1",Ba="_loadingOverlay_f0nuo_9",Da="_appContainer_f0nuo_23",Ea="_headerContent_f0nuo_36",Fa="_searchInputContainer_f0nuo_41",Aa="_txStatusContainer_f0nuo_46",Wa="_mainContent_f0nuo_56",Pa="_mainContentMinimized_f0nuo_69",Oa="_detailsSection_f0nuo_72",qa="_detailsSectionExpanded_f0nuo_80",za="_detailsHeader_f0nuo_88",Ga="_detailsTitle_f0nuo_103",Ka="_detailsContent_f0nuo_128",Ua="_transactionDetailsPanelInTracePage_f0nuo_136",Ja="_inputPage_f0nuo_141",Ya="_centeredInputContainer_f0nuo_149",Za="_txtracerLogo_f0nuo_158",Xa="_logoDiamond_f0nuo_165",Qa="_txtracerLogoH1_f0nuo_194",en="_titleTon_f0nuo_203",tn="_inputCard_f0nuo_213",sn="_historyDropdown_f0nuo_219",an="_historyItem_f0nuo_240",nn="_historyItemIcon_f0nuo_260",on="_historyItemText_f0nuo_266",ln="_historyItemDeleteButton_f0nuo_273",rn="_featureCards_f0nuo_291",cn="_featureCard_f0nuo_291",dn="_featureCardIcon_f0nuo_325",un="_playgroundIcon_f0nuo_337",mn="_explorerIcon_f0nuo_342",hn="_featureCardTitle_f0nuo_347",xn="_featureCardDescription_f0nuo_353",_n="_featureCardBadge_f0nuo_360",pn="_createBy_f0nuo_373",Cn="_externalLinksContainer_f0nuo_398",jn="_iconLink_f0nuo_406",vn="_stackItemOverlay_f0nuo_587",Nn="_codeEditorHidden_f0nuo_597",gn="_codeEditorArea_f0nuo_626",fn="_codeEditorWrapper_f0nuo_650",yn="_sidebarArea_f0nuo_661",c={traceViewWrapper:Ha,loadingOverlay:Ba,appContainer:Da,headerContent:Ea,searchInputContainer:Fa,txStatusContainer:Aa,mainContent:Wa,mainContentMinimized:Pa,detailsSection:Oa,detailsSectionExpanded:qa,detailsHeader:za,detailsTitle:Ga,detailsContent:Ka,transactionDetailsPanelInTracePage:Ua,inputPage:Ja,centeredInputContainer:Ya,txtracerLogo:Za,logoDiamond:Xa,txtracerLogoH1:Qa,titleTon:en,inputCard:tn,historyDropdown:sn,historyItem:an,historyItemIcon:nn,historyItemText:on,historyItemDeleteButton:ln,featureCards:rn,featureCard:cn,featureCardIcon:dn,playgroundIcon:un,explorerIcon:mn,featureCardTitle:hn,featureCardDescription:xn,featureCardBadge:_n,createBy:pn,externalLinksContainer:Cn,iconLink:jn,stackItemOverlay:vn,codeEditorHidden:Nn,codeEditorArea:gn,codeEditorWrapper:fn,sidebarArea:yn},wn=z.lazy(()=>me(()=>import("./index-CRgupKgH.js"),__vite__mapDeps([0,1,2,3,4,5,6,7]),import.meta.url)),bn=z.lazy(()=>me(()=>import("./index-B_mwvkjD.js"),__vite__mapDeps([8,1,2,3,4,9]),import.meta.url));function In(){const[t,n]=h.useState(""),[o,r]=h.useState(""),[l,x]=h.useState(void 0),[i,d]=h.useState(!1),[u,w]=h.useState(!1),{setError:g}=Oe(),[f,j]=h.useState([]),[R,C]=h.useState(0),{history:S,addToHistory:M,removeFromHistory:_e}=qs(),[pe,E]=h.useState(!1),[Ce,X]=h.useState(!1),[b,F]=h.useState(null),je=tt(l?.trace),{selectedStep:W,highlightLine:ve,currentStep:Ne,currentStack:ge,handlePrev:fe,handleNext:ye,goToFirstStep:we,goToLastStep:be,canGoPrev:Ie,canGoNext:Se,findStepByLine:ke,transitionType:Te,totalSteps:Le}=st(l?.trace);h.useEffect(()=>{const _=new URLSearchParams(window.location.search).get("tx")??"";n(_),r(_)},[]),h.useEffect(()=>{l?.trace?j(l.trace.steps.map(m=>({name:m.instructionName,gasCost:se(m)}))):j([])},[l]),h.useEffect(()=>{if(l?.trace?.steps&&W>0){let m=0;for(let _=0;_<W;_++){const v=l.trace.steps[_];if(v){const k=se(v);isNaN(k)||(m+=k)}}C(m)}else C(0)},[W,l?.trace?.steps]);const H=h.useCallback(async(m=!1,_)=>{const v=_??(m?o:t);if(v.trim()){d(!0);try{const k=await at(v);if(x(k),F(null),!m){const ee=k?.result?.emulatedTx?.computeInfo,Ee=ee!=="skipped"?ee?.exitCode:void 0;M({hash:v,exitCode:Ee})}E(!1),window.history.pushState({},"",`?tx=${v}`)}catch(k){console.error(k),k instanceof Error?g(`Failed to trace transaction: ${k.message}`):g("Failed to trace transaction")}finally{d(!1)}}},[o,t,g,M]),Ve=h.useCallback(()=>{H(!0)},[H]);h.useEffect(()=>{const m=_=>{(_.ctrlKey||_.metaKey)&&_.key==="Enter"?(_.preventDefault(),i||H(!1)):_.key==="Escape"&&b&&(_.preventDefault(),F(null))};return document.addEventListener("keydown",m),()=>{document.removeEventListener("keydown",m)}},[H,i,b]);const G=h.useCallback(()=>w(m=>!m),[]),Me=h.useCallback(m=>{(m.key==="Enter"||m.key===" ")&&G()},[G]),$e=h.useCallback((m,_)=>{b&&b.element===m&&b.title===_?F(null):F({element:m,title:_})},[b]),Re=h.useCallback(()=>{F(null)},[]),He=l?.result?.emulatedTx?.computeInfo!=="skipped"?l?.result?.emulatedTx?.computeInfo?.exitCode:void 0,K=l?.result?.emulatedTx?.computeInfo!=="skipped"?l?.result?.emulatedTx?.computeInfo?.success?"success":"failed":"success",Q=l?.result?.stateUpdateHashOk,Be=K!==void 0||Q===!1,De=`Exit code: ${He?.toString()??"unknown"}`;return e.jsxs(e.Fragment,{children:[!l&&e.jsxs("main",{className:c.inputPage,children:[e.jsxs("div",{id:"trace-status",className:"sr-only","aria-live":"polite","aria-atomic":"true",children:[i&&"Tracing transaction...",l&&!i&&"Transaction traced successfully"]}),e.jsx("div",{className:"sr-only",children:"Press Ctrl+Enter or Cmd+Enter to trace the transaction"}),e.jsx("div",{className:c.externalLinksContainer,children:e.jsx("a",{href:"https://github.com/tact-lang/txtracer",target:"_blank",rel:"noopener noreferrer",title:"GitHub Repository",className:c.iconLink,"aria-label":"View TxTracer source code on GitHub",children:e.jsx(qe,{size:24,"aria-hidden":"true"})})}),e.jsxs("div",{className:c.centeredInputContainer,children:[e.jsxs("header",{className:c.txtracerLogo,children:[e.jsx("div",{className:c.logoDiamond,"aria-hidden":"true"}),e.jsxs("h1",{"data-testid":"app-title",className:c.txtracerLogoH1,children:[e.jsx("span",{children:"TxTracer"}),e.jsx("span",{className:c.titleTon,children:"The Open Network"})]})]}),e.jsxs("section",{"aria-labelledby":"search-heading",className:c.inputCard,children:[e.jsx("h2",{id:"search-heading",className:"sr-only",children:"Transaction Search"}),e.jsx(re,{value:t,onChange:n,onSubmit:()=>{H(!1)},placeholder:"Search by transaction hash or explorer link",loading:i,autoFocus:!0,onFocus:()=>{X(!0)},onBlur:()=>{X(!1),setTimeout(()=>E(!1),100)},onInputClick:()=>{Ce&&E(!0)}}),pe&&S.length>0&&e.jsx("ul",{className:c.historyDropdown,onMouseDown:m=>m.preventDefault(),role:"listbox","aria-label":"Transaction history",children:S.slice(0,Math.min(4,S.length)).map(m=>{const _=m.exitCode===void 0||m.exitCode===0?"success":"failed";return e.jsxs("li",{onClick:()=>{n(m.hash),E(!1),H(!1,m.hash)},onKeyDown:v=>{(v.key==="Enter"||v.key===" ")&&(v.preventDefault(),n(m.hash),E(!1),H(!1,m.hash))},className:c.historyItem,role:"option",tabIndex:0,"aria-selected":!1,children:[e.jsx(ze,{size:16,className:c.historyItemIcon,"aria-hidden":"true"}),e.jsx("span",{className:c.historyItemText,children:ne(m.hash,16,16)}),m.exitCode!==void 0&&e.jsx(q,{type:_,text:`Exit code: ${m.exitCode}`}),e.jsx("button",{className:c.historyItemDeleteButton,onClick:v=>{v.stopPropagation(),_e(m.hash)},title:"Remove from history","aria-label":`Remove transaction ${ne(m.hash,8,8)} from history`,children:e.jsx(Ge,{size:16,"aria-hidden":"true"})})]},m.hash)})})]}),i?e.jsx(P,{message:"Tracing transaction",subtext:"This may take a few moments",loading:i}):e.jsxs("section",{"aria-labelledby":"features-heading",className:c.featureCards,children:[e.jsx("h2",{id:"features-heading",className:"sr-only",children:"Available Tools"}),e.jsxs("a",{href:"/play/",className:c.featureCard,children:[e.jsx("div",{className:`${c.featureCardIcon} ${c.playgroundIcon}`,children:e.jsx(Ke,{"aria-hidden":"true"})}),e.jsx("h3",{className:c.featureCardTitle,children:"Assembly Playground"}),e.jsx("p",{className:c.featureCardDescription,children:"Experiment with TVM assembly code directly in your browser. Write, test, and debug assembly instructions with real-time execution."}),e.jsx("span",{className:c.featureCardBadge,children:"Playground"})]}),e.jsxs("a",{href:"/code-explorer/",className:c.featureCard,children:[e.jsx("div",{className:`${c.featureCardIcon} ${c.explorerIcon}`,children:e.jsx(Ue,{"aria-hidden":"true"})}),e.jsx("h3",{className:c.featureCardTitle,children:"Code Explorer"}),e.jsx("p",{className:c.featureCardDescription,children:"Compile FunC code to assembly and explore the generated bytecode. Perfect for understanding how your smart contracts work under the hood."}),e.jsx("span",{className:c.featureCardBadge,children:"Explorer"})]})]})]}),e.jsxs("footer",{className:c.createBy,children:["Created by"," ",e.jsx("a",{href:"https://tonstudio.io",target:"_blank",rel:"noreferrer",children:"TON Studio"})]})]}),i&&!l&&e.jsx("main",{className:c.inputPage,children:e.jsx(P,{message:"Tracing transaction",subtext:"This may take a few moments",loading:!0})}),l&&e.jsxs("div",{className:c.traceViewWrapper,children:[e.jsxs("div",{id:"trace-results-status",className:"sr-only","aria-live":"polite","aria-atomic":"true",children:[i&&"Loading new transaction trace...",l&&!i&&"Transaction trace loaded successfully"]}),e.jsx(bn,{pageTitle:"",network:l?.network??"mainnet",children:e.jsxs("div",{className:c.headerContent,children:[e.jsx("div",{className:c.searchInputContainer,role:"search","aria-label":"Search for another transaction",children:e.jsx(re,{value:o,onChange:r,onSubmit:Ve,placeholder:"Trace another transaction hash",loading:i,autoFocus:!1,compact:!0})}),Be&&e.jsxs("div",{className:c.txStatusContainer,role:"status","aria-live":"polite",children:[K&&e.jsx(q,{type:K,text:De}),Q===!1&&e.jsx(Js,{tooltipText:"Because the transaction runs in a local sandbox, we can't always reproduce it exactly. Sandbox replay was incomplete, and some values may differ from those on the real blockchain.",placement:"bottom",children:e.jsx(q,{type:"warning",text:"Trace Incomplete"})})]})]})}),e.jsxs("main",{className:c.appContainer,children:[e.jsxs("div",{className:`${c.mainContent} ${u?c.mainContentMinimized:""}`,children:[e.jsxs("section",{"aria-labelledby":"code-viewer-heading","data-testid":"code-editor-container",className:c.codeEditorArea,children:[e.jsx("h2",{id:"code-viewer-heading",className:"sr-only",children:"Transaction Code Viewer"}),e.jsx("div",{className:`${c.codeEditorWrapper} ${b?c.codeEditorHidden:""}`,children:e.jsx(h.Suspense,{fallback:e.jsx(P,{message:"Loading Editor...",loading:!0}),children:e.jsx(wn,{code:l.code,highlightLine:ve,lineExecutionData:je,onLineClick:ke,shouldCenter:Te==="button",exitCode:l.exitCode})})}),b&&e.jsx("div",{className:c.stackItemOverlay,children:e.jsx(Ra,{element:b.element,title:b.title,onBack:Re})})]}),e.jsx(nt,{selectedStep:W,totalSteps:Le,currentStep:Ne,currentStack:ge,canGoPrev:Ie,canGoNext:Se,onPrev:fe,onNext:ye,onFirst:we,onLast:be,showGas:!0,placeholderMessage:"No trace steps available.",instructionDetails:f,cumulativeGas:R,onStackItemClick:$e,className:c.sidebarArea})]}),e.jsxs("section",{className:`${c.detailsSection} ${u?c.detailsSectionExpanded:""}`,"aria-labelledby":"transaction-details-heading",children:[e.jsx("div",{"data-testid":"details-header",className:c.detailsHeader,onClick:G,onKeyDown:Me,role:"button",tabIndex:0,"aria-expanded":u,"aria-controls":"transaction-details-content",children:e.jsx("div",{className:c.detailsTitle,children:e.jsx("span",{id:"transaction-details-heading",children:"TRANSACTION DETAILS"})})}),u&&e.jsx("div",{id:"transaction-details-content","data-testid":"details-content",className:c.detailsContent,children:e.jsx("div",{className:c.transactionDetailsPanelInTracePage,children:e.jsx(he,{result:l})})})]})]}),i&&l&&e.jsx("div",{className:c.loadingOverlay,role:"status","aria-live":"polite",children:e.jsx(P,{message:"Tracing new transaction...",subtext:"This may take a few moments",loading:!0})})]})]})}Je.createRoot(document.getElementById("root")).render(e.jsx(z.StrictMode,{children:e.jsx(Ye,{children:e.jsx(Ze,{children:e.jsx(Xe,{children:e.jsx(Qe,{loadingMessage:"Loading TxTracer...",children:e.jsx(In,{})})})})})}));
