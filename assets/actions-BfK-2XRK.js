import{j as t,r as x}from"./Badge-CYPGbJj9.js";import{s as n,T as f}from"./useTraceStepper-B5ZPfokB.js";import{E as y}from"./error-codes-B36bHDJL.js";const h=e=>e==null||e===0n?"0 TON":`${(Number(e)/1e9).toFixed(9).replace(/(\.[0-9]*[1-9])0+$/,"$1").replace(/\.0+$/,"")} TON`,g=e=>e?e==="external"?"External":String(e):"—",$=e=>t.jsx("span",{className:e?"booleanTrue":"booleanFalse",children:e?"Yes":"No"}),E=e=>e==null?"—":t.jsx("span",{className:"number-value",children:e.toString()}),_=(e,s,o)=>e?e.length<=s+o+3?e:`${e.substring(0,s)}...${e.substring(e.length-o)}`:"—";function w({exitCode:e,abi:s}){if(e===void 0)return t.jsx("span",{className:n.exitCode,children:"—"});const o=y[e]??{name:"Custom error",description:"User defined error",phase:"Compute phase"},r=s?.errors?.[e],a=r&&!o,l=o?.name??(a?"Custom error":""),p=r?.message??o?.description,i=o?.phase,u=t.jsxs("div",{className:n.tooltipContent,children:[p&&t.jsxs("div",{className:n.tooltipSection,children:[t.jsx("div",{className:n.tooltipLabel,children:"Description:"}),t.jsx("div",{className:n.tooltipDescription,children:p})]}),i&&t.jsxs("div",{className:n.tooltipSection,children:[t.jsx("div",{className:n.tooltipLabel,children:"Origin:"}),t.jsx("div",{className:n.tooltipPhase,children:i})]})]}),c=e===0||e===1,m=`${n.exitCode} ${c?n.success:n.error}`;return t.jsx(f,{content:u,variant:"hover",children:t.jsxs("span",{className:m,children:[e,l&&e!==0&&t.jsxs("span",{className:n.exitCodeName,children:[" (",l,")"]})]})})}const v="_opcodeChip_mv1pa_1",j="_opcodeText_mv1pa_12",N="_opcodeSubText_mv1pa_17",T="_copyButton_mv1pa_22",d={opcodeChip:v,opcodeText:j,opcodeSubText:N,copyButton:T},k=({opcode:e,abiName:s,showOpcode:o=!1})=>{const[r,a]=x.useState(!1),l=s??(e?`0x${e.toString(16)}`:"Empty"),p=s&&o&&e?`0x${e.toString(16)}`:void 0,i=e?`0x${e.toString(16)}`:"",u=x.useCallback(async c=>{if(c.stopPropagation(),!!i)try{await navigator.clipboard.writeText(i),a(!0)}catch(m){console.error("Failed to copy:",m)}},[i]);return x.useEffect(()=>{if(r){const c=setTimeout(()=>a(!1),2e3);return()=>clearTimeout(c)}},[r]),t.jsxs("div",{className:d.opcodeChip,children:[t.jsx("span",{className:d.opcodeText,children:l}),p&&t.jsx("span",{className:d.opcodeSubText,children:"· "+p}),i&&t.jsx("button",{className:d.copyButton,onClick:c=>{u(c).catch(console.error)},title:`Copy ${i}`,"aria-label":`Copy opcode ${i}`,children:r?t.jsx("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:t.jsx("polyline",{points:"20,6 9,17 4,12"})}):t.jsxs("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[t.jsx("rect",{x:"9",y:"9",width:"13",height:"13",rx:"2",ry:"2"}),t.jsx("path",{d:"m5,15 L5,5 a2,2 0 0,1 2,-2 l10,0"})]})})]})},O=e=>{switch(e.type){case"sendMsg":{const s=e.outMsg,o=s.info.type==="internal"?"Internal":"External",r=s.info.type==="internal"||s.info.type==="external-out"?s.info.dest:"unknown",a=typeof r=="string"?r:g(r),l=s.info.type==="internal"?h(s.info.value.coins):"";return{title:"Send Message",icon:"send-icon",description:`${o} → ${a}`,value:l}}case"setCode":return{title:"Set Code",icon:"code-icon",description:"Update contract code",value:""};case"reserve":return{title:"Reserve",icon:"reserve-icon",description:`Mode: ${e.mode}`,value:h(e.currency.coins)};default:return{title:"Unknown",icon:"unknown-icon",description:`Type: ${e.type}`,value:""}}};export{w as E,k as O,h as a,E as b,$ as c,g as f,O as g,_ as s};
