const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./index-BrCdVL5z.js","./Badge-BQoPhukz.js","./ton-vendor-BkcVSvwD.js","./ton-assembly-nn7KYO_c.js","./ton-sandbox-uER9kMRK.js","./Badge-DTFoUNfN.css","./monaco-editor-core-BNZEfIW9.js","./monaco-editor-core-GL-q52Lm.css","./error-codes-B36bHDJL.js","./index-CiNhpJcB.css"])))=>i.map(i=>d[i]);
import{j as r,r as L,a as G,w as et,x as Mi,R as X,q as ki,I as Ii,B as kt,F as vs,y as ys,i as bs,e as Ei,z as Ns,m as ws,h as Fe,A as Cs,C as js,b as Ts,G as Ss,T as Ms,H as ks,P as Is}from"./Badge-BQoPhukz.js";import Lt from"./index-B1-ESCh9.js";import{d as Es,g as $s}from"./ton-vendor-BkcVSvwD.js";import{c as Ds,i as Ls,d as As,a as Rs,u as Vs,n as kn,b as Os,T as $i,C as In}from"./useTraceStepper-DteFh8m7.js";import{_ as Fs}from"./monaco-editor-core-BNZEfIW9.js";import{a as se,g as Bs,f as tn,E as Ps,b as zs}from"./actions-EeWOQLeG.js";import"./ton-assembly-nn7KYO_c.js";import"./ton-sandbox-uER9kMRK.js";import"./error-codes-B36bHDJL.js";const qs=()=>r.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[r.jsx("path",{d:"M9 21h6"}),r.jsx("path",{d:"M12 17v4"}),r.jsx("path",{d:"M15 9.34V17a2 2 0 0 1-2 2H11a2 2 0 0 1-2-2v-7.66"}),r.jsx("path",{d:"M7.76 8.46A8 8 0 1 1 16.24 8.46"})]}),Ws=()=>r.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[r.jsx("path",{d:"M4.5 16.5c-1.5 1.26-2 5-2 5s3.74-.5 5-2c.71-.84.7-2.13-.09-2.91a2.18 2.18 0 0 0-2.91-.09z"}),r.jsx("path",{d:"m12 15-3-3a22 22 0 0 1 2-3.95A12.88 12.88 0 0 1 22 2c0 2.72-.78 7.5-6 11a22.35 22.35 0 0 1-4 2z"}),r.jsx("path",{d:"M9 12H4s.55-3.03 2-4c1.62-1.08 5 0 5 0"}),r.jsx("path",{d:"M12 15v5s3.03-.55 4-2c1.08-1.62 0-5 0-5"})]}),Hs=()=>r.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[r.jsx("path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8"}),r.jsx("path",{d:"M21 3v5h-5"}),r.jsx("path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16"}),r.jsx("path",{d:"M8 16H3v5"})]}),Us=()=>r.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:r.jsx("polyline",{points:"20,6 9,17 4,12"})}),Gs=()=>r.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[r.jsx("polyline",{points:"16,18 22,12 16,6"}),r.jsx("polyline",{points:"8,6 2,12 8,18"})]}),Js=()=>r.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:r.jsx("polyline",{points:"6,9 12,15 18,9"})}),Ks=()=>r.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:r.jsx("polyline",{points:"18,15 12,9 6,15"})});function Xs({url:e="ws://localhost:7743",onError:t}={}){const[n,i]=L.useState([]),[s,a]=L.useState(new Map),[o,l]=L.useState(""),[u,c]=L.useState(!1),[d,f]=L.useState(!1),h=L.useCallback(S=>{T(S),f(!0)},[]),p=L.useCallback(()=>{T([]),a(new Map),i([])},[]),[v,T]=L.useState([]);function k(S){try{return JSON.parse(S)}catch{return}}const C=L.useCallback((S,x)=>{x||T(w=>[...w,S]);const M=k(S.transactions);if(!M){console.error("Cannot parse transactions:",S);return}const N=S.testName??"unknown";a(w=>{const A=new Map(w);return A.set(N,S.contracts),A}),i(w=>w.find($=>$.testName===N)?(console.log("Updating existing test:",N),w.map($=>$.testName===N?{...$,transactions:{transactions:[...$.transactions.transactions,...M.transactions]},changes:[...$.changes,...S.changes]}:$)):(console.log("Creating new test:",N),[...w,{testName:N,transactions:M,timestamp:Date.now(),changes:S.changes}]))},[]),_=L.useCallback(S=>{const x=JSON.parse(S.data);switch(x.$){case"test-data":C(x,!1);break;default:console.warn("Unknown message type:",x)}},[C]),j=L.useCallback(S=>{switch(S.$){case"test-data":C(S,!0);break;default:console.warn("Unknown message type:",S)}},[C]);return L.useEffect(()=>{if(d)for(const S of v)j(S)},[j,d,v]),L.useEffect(()=>{const S=new WebSocket(e);return S.onopen=()=>{l(""),c(!0)},S.onmessage=_,S.onerror=()=>{const x="Cannot connect to the daemon. Run: yarn daemon";l(x),c(!1),t?.(x)},S.onclose=()=>{c(!1)},()=>{S.close()}},[e,_,t]),{tests:n,contractsByTest:s,error:o,isConnected:u,rawData:v,loadFromFile:h,clearFileData:p}}function _n(e,t){if(e.opcode===void 0)return;const n=e?.address;if(!n)return;const i=t.get(n.toString());if(i?.meta?.abi){const s=i?.meta?.abi.types?.find(a=>a.header===e.opcode);if(s)return s}for(const s of[...t.values()]){const a=s?.meta?.abi?.types?.find(o=>o.header===e.opcode);if(a)return a}}function Ys(e,t){const n=e.transaction.inMessage?.info?.src;if(!n)return;const i=t.transactions.filter(s=>s.transaction.inMessage?.info?.dest?.toString()===n?.toString());if(i.length!==0)for(const s of i){const a=s.outActions;if(a.length===0)continue;const o=a.filter(l=>l.type==="sendMsg");if(o.length!==0){for(const l of o)if(l.outMsg?.info?.dest?.toString()===e.address?.toString())return l.mode}}}const At={0:{name:"SendDefaultMode",description:`Ordinary message (default).

See: <https://docs.tact-lang.org/book/message-mode#base-modes>`},64:{name:"SendRemainingValue",description:`Carry all the remaining value of the inbound message in addition to the value initially indicated in the new message.

See: <https://docs.tact-lang.org/book/message-mode#base-modes>`},128:{name:"SendRemainingBalance",description:`Carry **all the remaining balance** of the current smart contract instead of the value originally indicated in the message.

See: <https://docs.tact-lang.org/book/message-mode#base-modes>`},1024:{name:"SendOnlyEstimateFee",description:`Doesn't send the message, only estimates the forward fees if the message-sending function computes those.

See:
* <https://docs.tact-lang.org/book/message-mode#base-modes>
* <https://docs.tact-lang.org/book/send#message-sending-functions>`},1:{name:"SendPayFwdFeesSeparately",description:`Pay forward fees separately from the message value.

See: <https://docs.tact-lang.org/book/message-mode#optional-flags>`},2:{name:"SendIgnoreErrors",description:`Ignore any errors arising while processing this message during the action phase.

See: <https://docs.tact-lang.org/book/message-mode#optional-flags>`},16:{name:"SendBounceIfActionFail",description:"Bounce transaction in case of any errors during action phase. Has no effect if flag +2, `SendIgnoreErrors` is used.\n\nSee: <https://docs.tact-lang.org/book/message-mode#optional-flags>"},32:{name:"SendDestroyIfZero",description:"Current account (contract) will be destroyed if its resulting balance is zero. This flag is often used with mode 128, `SendRemainingBalance`.\n\nSee: <https://docs.tact-lang.org/book/message-mode#optional-flags>"}};function Qs(e){const t=[];for(const[n,i]of Object.entries(At)){const s=parseInt(n);e&s&&t.push({name:i.name,value:s,description:i.description})}return t.length===0&&e===0&&t.push({name:At[0].name,value:0,description:At[0].description}),t}const Se={0:{name:"ReserveExact",description:"Reserves exactly the specified amount of nanoToncoin."},1:{name:"ReserveAllExcept",description:"Reserves all but the specified amount of nanoToncoin."},2:{name:"ReserveAtMost",description:"Reserves at most the specified amount of nanoToncoin."},4:{name:"ReserveAddOriginalBalance",description:"Increases the amount by the original balance of the current account (before the compute phase), including all extra currencies."},8:{name:"ReserveInvertSign",description:"Negates the amount value before performing the reservation."},16:{name:"ReserveBounceIfActionFail",description:"Bounces the transaction if the reservation fails."}};function Zs(e){const t=[];(e&3)===0?t.push({name:Se[0].name,value:0,description:Se[0].description}):(e&3)===1?t.push({name:Se[1].name,value:1,description:Se[1].description}):(e&3)===2&&t.push({name:Se[2].name,value:2,description:Se[2].description});for(const[n,i]of Object.entries(Se)){const s=parseInt(n);s>=4&&e&s&&t.push({name:i.name,value:s,description:i.description})}return t}const er=e=>{if(e!==void 0)try{return G.beginCell().storeUint(4,3).storeUint(0,8).storeUint(e,256).asSlice().loadAddress()}catch{return}};function tr(e){const t=e.inMessage,n=t?.info?.type==="internal"?t.info.bounced:!1;let i;const s=t?.body?.asSlice();return s&&(n&&s.loadUint(32),s.remainingBits>=32&&(i=s.loadUint(32))),i}function nr(e){return e.inMessage?.info?.type==="internal"?{}:{}}const nn=(e,t,n)=>{const i=n.get(e);if(i)return i;const s=e.parsedTransaction??G.loadTransaction(G.Cell.fromHex(e.transaction).asSlice()),a=er(s.address),{computeInfo:o,amount:l,money:u}=ar(e),{outActions:c,c5:d}=ir(e.fields.vmLogs),f={address:a,transaction:s,fields:e.fields,parent:void 0,opcode:tr(s),computeInfo:o,money:u,amount:l,outActions:c,c5:d,data:nr(s),children:[]};n.set(e,f);const h=t.find(p=>p.parsedTransaction?.lt.toString()===e.parentId);return f.parent=h?nn(h,t,n):void 0,f.children=e.childrenIds.map(p=>t.find(v=>v.parsedTransaction?.lt.toString()===p)).filter(p=>p!==void 0).map(p=>nn(p,t,n)),f},ir=e=>{let t=[],n;if(!e)return{outActions:t,c5:n};for(const i of e.split(`
`))if(i.startsWith("final c5:")){const[s,a]=sr(i);t=s,n=a}return{outActions:t,c5:n}},sr=e=>{const t=Buffer.from(e.slice(12,-1),"hex"),n=G.Cell.fromBoc(t)[0],i=n.beginParse();return[G.loadOutList(i),n]},rr=e=>{let t=0n;for(const n of e.outMessages.values())n.info.type==="internal"&&(t+=n.info.value.coins);return t},ar=e=>{const t=G.loadTransaction(G.Cell.fromHex(e.transaction).asSlice());if(!t.inMessage)throw new Error("No in_message was found in result tx");const n=t.inMessage.info.type==="internal"?t.inMessage.info.value.coins:void 0,i=rr(t),s=t.totalFees.coins;if(t.description.type!=="generic")throw new Error("TxTracer doesn't support non-generic transaction. Given type: "+t.description.type);const a=t.description.computePhase,o=a.type==="skipped"?"skipped":{success:a.success,exitCode:a.exitCode===0?t.description.actionPhase?.resultCode??0:a.exitCode,vmSteps:a.vmSteps,gasUsed:a.gasUsed,gasFees:a.gasFees},l=t.inMessage.info.type==="internal"?t.inMessage.info.forwardFee:0n;return{money:{sentTotal:i,totalFees:s,forwardFee:l},amount:n,computeInfo:o}},or=e=>e.map(t=>nn(t,e,new Map));function Di(e){return e.stateInit?G.loadStateInit(G.Cell.fromHex(e.stateInit).asSlice()):void 0}function lr(e,t){return e.find(n=>Di(n)?.code?.toBoc()?.toString("hex")===t?.toBoc()?.toString("hex"))}function En(e){if(e.meta?.treasurySeed)return e.meta?.treasurySeed;if(e.meta?.wrapperName)return e.meta?.wrapperName}function cr(e,t){const n=En(e);if(n)return n;const s=Di(e)?.code;if(s){const a=lr(t,s);if(a){const o=En(a);if(o)return o}}return"Unknown Contract"}function ur(e={}){const t=Xs(e),n=L.useMemo(()=>{const s=new Map;for(const a of t.rawData)a.testName&&s.set(a.testName,a);return s},[t.rawData]);return{tests:L.useMemo(()=>t.tests.map(s=>{const a=s.transactions.transactions.map(f=>({...f,transaction:f.transaction,parsedTransaction:G.loadTransaction(G.Cell.fromHex(f.transaction).asSlice())})),o=or(a),l=s.testName??"unknown",u=t.contractsByTest.get(l)??[],c=u.map((f,h)=>{const p=G.Address.parse(f.address),v=String.fromCharCode(65+h%26),T=cr(f,u);return{...f,address:p,stateInit:f.stateInit?G.loadStateInit(G.Cell.fromHex(f.stateInit).asSlice()):void 0,account:G.loadShardAccount(G.Cell.fromHex(f.account).asSlice()),letter:v,displayName:T,kind:f.meta?.treasurySeed!==void 0?"treasury":"user-contract"}}),d=new Map(c.map(f=>[f.address.toString(),f]));return{testName:s.testName,transactions:o,timestamp:s.timestamp,contracts:d,changes:s.changes}}),[t.tests,t.contractsByTest]),error:t.error,isConnected:t.isConnected,isSharedData:t.rawData.length>0,rawData:t.rawData,rawDataByTest:n,clearFileData:t.clearFileData,loadFromFile:t.loadFromFile}}function dr(e){var t=0,n=e.children,i=n&&n.length;if(!i)t=1;else for(;--i>=0;)t+=n[i].value;e.value=t}function hr(){return this.eachAfter(dr)}function fr(e){var t=this,n,i=[t],s,a,o;do for(n=i.reverse(),i=[];t=n.pop();)if(e(t),s=t.children,s)for(a=0,o=s.length;a<o;++a)i.push(s[a]);while(i.length);return this}function pr(e){for(var t=this,n=[t],i,s;t=n.pop();)if(e(t),i=t.children,i)for(s=i.length-1;s>=0;--s)n.push(i[s]);return this}function mr(e){for(var t=this,n=[t],i=[],s,a,o;t=n.pop();)if(i.push(t),s=t.children,s)for(a=0,o=s.length;a<o;++a)n.push(s[a]);for(;t=i.pop();)e(t);return this}function gr(e){return this.eachAfter(function(t){for(var n=+e(t.data)||0,i=t.children,s=i&&i.length;--s>=0;)n+=i[s].value;t.value=n})}function xr(e){return this.eachBefore(function(t){t.children&&t.children.sort(e)})}function _r(e){for(var t=this,n=vr(t,e),i=[t];t!==n;)t=t.parent,i.push(t);for(var s=i.length;e!==n;)i.splice(s,0,e),e=e.parent;return i}function vr(e,t){if(e===t)return e;var n=e.ancestors(),i=t.ancestors(),s=null;for(e=n.pop(),t=i.pop();e===t;)s=e,e=n.pop(),t=i.pop();return s}function yr(){for(var e=this,t=[e];e=e.parent;)t.push(e);return t}function br(){var e=[];return this.each(function(t){e.push(t)}),e}function Nr(){var e=[];return this.eachBefore(function(t){t.children||e.push(t)}),e}function wr(){var e=this,t=[];return e.each(function(n){n!==e&&t.push({source:n.parent,target:n})}),t}function vn(e,t){var n=new Je(e),i=+e.value&&(n.value=e.value),s,a=[n],o,l,u,c;for(t==null&&(t=jr);s=a.pop();)if(i&&(s.value=+s.data.value),(l=t(s.data))&&(c=l.length))for(s.children=new Array(c),u=c-1;u>=0;--u)a.push(o=s.children[u]=new Je(l[u])),o.parent=s,o.depth=s.depth+1;return n.eachBefore(Sr)}function Cr(){return vn(this).eachBefore(Tr)}function jr(e){return e.children}function Tr(e){e.data=e.data.data}function Sr(e){var t=0;do e.height=t;while((e=e.parent)&&e.height<++t)}function Je(e){this.data=e,this.depth=this.height=0,this.parent=null}Je.prototype=vn.prototype={constructor:Je,count:hr,each:fr,eachAfter:mr,eachBefore:pr,sum:gr,sort:xr,path:_r,ancestors:yr,descendants:br,leaves:Nr,links:wr,copy:Cr};function Mr(e,t){return e.parent===t.parent?1:2}function Rt(e){var t=e.children;return t?t[0]:e.t}function Vt(e){var t=e.children;return t?t[t.length-1]:e.t}function kr(e,t,n){var i=n/(t.i-e.i);t.c-=i,t.s+=n,e.c+=i,t.z+=n,t.m+=n}function Ir(e){for(var t=0,n=0,i=e.children,s=i.length,a;--s>=0;)a=i[s],a.z+=t,a.m+=t,t+=a.s+(n+=a.c)}function Er(e,t,n){return e.a.parent===t.parent?e.a:n}function mt(e,t){this._=e,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=t}mt.prototype=Object.create(Je.prototype);function $r(e){for(var t=new mt(e,0),n,i=[t],s,a,o,l;n=i.pop();)if(a=n._.children)for(n.children=new Array(l=a.length),o=l-1;o>=0;--o)i.push(s=n.children[o]=new mt(a[o],o)),s.parent=n;return(t.parent=new mt(null,0)).children=[t],t}function Dr(){var e=Mr,t=1,n=1,i=null;function s(c){var d=$r(c);if(d.eachAfter(a),d.parent.m=-d.z,d.eachBefore(o),i)c.eachBefore(u);else{var f=c,h=c,p=c;c.eachBefore(function(_){_.x<f.x&&(f=_),_.x>h.x&&(h=_),_.depth>p.depth&&(p=_)});var v=f===h?1:e(f,h)/2,T=v-f.x,k=t/(h.x+v+T),C=n/(p.depth||1);c.eachBefore(function(_){_.x=(_.x+T)*k,_.y=_.depth*C})}return c}function a(c){var d=c.children,f=c.parent.children,h=c.i?f[c.i-1]:null;if(d){Ir(c);var p=(d[0].z+d[d.length-1].z)/2;h?(c.z=h.z+e(c._,h._),c.m=c.z-p):c.z=p}else h&&(c.z=h.z+e(c._,h._));c.parent.A=l(c,h,c.parent.A||f[0])}function o(c){c._.x=c.z+c.parent.m,c.m+=c.parent.m}function l(c,d,f){if(d){for(var h=c,p=c,v=d,T=h.parent.children[0],k=h.m,C=p.m,_=v.m,j=T.m,S;v=Vt(v),h=Rt(h),v&&h;)T=Rt(T),p=Vt(p),p.a=c,S=v.z+_-h.z-k+e(v._,h._),S>0&&(kr(Er(v,c,f),c,S),k+=S,C+=S),_+=v.m,k+=h.m,j+=T.m,C+=p.m;v&&!Vt(p)&&(p.t=v,p.m+=_-C),h&&!Rt(T)&&(T.t=h,T.m+=k-j,f=c)}return f}function u(c){c.x*=t,c.y=c.depth*n}return s.separation=function(c){return arguments.length?(e=c,s):e},s.size=function(c){return arguments.length?(i=!1,t=+c[0],n=+c[1],s):i?null:[t,n]},s.nodeSize=function(c){return arguments.length?(i=!0,t=+c[0],n=+c[1],s):i?[t,n]:null},s}var sn="http://www.w3.org/1999/xhtml";const $n={svg:"http://www.w3.org/2000/svg",xhtml:sn,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function It(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),$n.hasOwnProperty(t)?{space:$n[t],local:e}:e}function Lr(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===sn&&t.documentElement.namespaceURI===sn?t.createElement(e):t.createElementNS(n,e)}}function Ar(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function Li(e){var t=It(e);return(t.local?Ar:Lr)(t)}function Rr(){}function yn(e){return e==null?Rr:function(){return this.querySelector(e)}}function Vr(e){typeof e!="function"&&(e=yn(e));for(var t=this._groups,n=t.length,i=new Array(n),s=0;s<n;++s)for(var a=t[s],o=a.length,l=i[s]=new Array(o),u,c,d=0;d<o;++d)(u=a[d])&&(c=e.call(u,u.__data__,d,a))&&("__data__"in u&&(c.__data__=u.__data__),l[d]=c);return new oe(i,this._parents)}function Or(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function Fr(){return[]}function Ai(e){return e==null?Fr:function(){return this.querySelectorAll(e)}}function Br(e){return function(){return Or(e.apply(this,arguments))}}function Pr(e){typeof e=="function"?e=Br(e):e=Ai(e);for(var t=this._groups,n=t.length,i=[],s=[],a=0;a<n;++a)for(var o=t[a],l=o.length,u,c=0;c<l;++c)(u=o[c])&&(i.push(e.call(u,u.__data__,c,o)),s.push(u));return new oe(i,s)}function Ri(e){return function(){return this.matches(e)}}function Vi(e){return function(t){return t.matches(e)}}var zr=Array.prototype.find;function qr(e){return function(){return zr.call(this.children,e)}}function Wr(){return this.firstElementChild}function Hr(e){return this.select(e==null?Wr:qr(typeof e=="function"?e:Vi(e)))}var Ur=Array.prototype.filter;function Gr(){return Array.from(this.children)}function Jr(e){return function(){return Ur.call(this.children,e)}}function Kr(e){return this.selectAll(e==null?Gr:Jr(typeof e=="function"?e:Vi(e)))}function Xr(e){typeof e!="function"&&(e=Ri(e));for(var t=this._groups,n=t.length,i=new Array(n),s=0;s<n;++s)for(var a=t[s],o=a.length,l=i[s]=[],u,c=0;c<o;++c)(u=a[c])&&e.call(u,u.__data__,c,a)&&l.push(u);return new oe(i,this._parents)}function Oi(e){return new Array(e.length)}function Yr(){return new oe(this._enter||this._groups.map(Oi),this._parents)}function bt(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}bt.prototype={constructor:bt,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function Qr(e){return function(){return e}}function Zr(e,t,n,i,s,a){for(var o=0,l,u=t.length,c=a.length;o<c;++o)(l=t[o])?(l.__data__=a[o],i[o]=l):n[o]=new bt(e,a[o]);for(;o<u;++o)(l=t[o])&&(s[o]=l)}function ea(e,t,n,i,s,a,o){var l,u,c=new Map,d=t.length,f=a.length,h=new Array(d),p;for(l=0;l<d;++l)(u=t[l])&&(h[l]=p=o.call(u,u.__data__,l,t)+"",c.has(p)?s[l]=u:c.set(p,u));for(l=0;l<f;++l)p=o.call(e,a[l],l,a)+"",(u=c.get(p))?(i[l]=u,u.__data__=a[l],c.delete(p)):n[l]=new bt(e,a[l]);for(l=0;l<d;++l)(u=t[l])&&c.get(h[l])===u&&(s[l]=u)}function ta(e){return e.__data__}function na(e,t){if(!arguments.length)return Array.from(this,ta);var n=t?ea:Zr,i=this._parents,s=this._groups;typeof e!="function"&&(e=Qr(e));for(var a=s.length,o=new Array(a),l=new Array(a),u=new Array(a),c=0;c<a;++c){var d=i[c],f=s[c],h=f.length,p=ia(e.call(d,d&&d.__data__,c,i)),v=p.length,T=l[c]=new Array(v),k=o[c]=new Array(v),C=u[c]=new Array(h);n(d,f,T,k,C,p,t);for(var _=0,j=0,S,x;_<v;++_)if(S=T[_]){for(_>=j&&(j=_+1);!(x=k[j])&&++j<v;);S._next=x||null}}return o=new oe(o,i),o._enter=l,o._exit=u,o}function ia(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function sa(){return new oe(this._exit||this._groups.map(Oi),this._parents)}function ra(e,t,n){var i=this.enter(),s=this,a=this.exit();return typeof e=="function"?(i=e(i),i&&(i=i.selection())):i=i.append(e+""),t!=null&&(s=t(s),s&&(s=s.selection())),n==null?a.remove():n(a),i&&s?i.merge(s).order():s}function aa(e){for(var t=e.selection?e.selection():e,n=this._groups,i=t._groups,s=n.length,a=i.length,o=Math.min(s,a),l=new Array(s),u=0;u<o;++u)for(var c=n[u],d=i[u],f=c.length,h=l[u]=new Array(f),p,v=0;v<f;++v)(p=c[v]||d[v])&&(h[v]=p);for(;u<s;++u)l[u]=n[u];return new oe(l,this._parents)}function oa(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var i=e[t],s=i.length-1,a=i[s],o;--s>=0;)(o=i[s])&&(a&&o.compareDocumentPosition(a)^4&&a.parentNode.insertBefore(o,a),a=o);return this}function la(e){e||(e=ca);function t(f,h){return f&&h?e(f.__data__,h.__data__):!f-!h}for(var n=this._groups,i=n.length,s=new Array(i),a=0;a<i;++a){for(var o=n[a],l=o.length,u=s[a]=new Array(l),c,d=0;d<l;++d)(c=o[d])&&(u[d]=c);u.sort(t)}return new oe(s,this._parents).order()}function ca(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function ua(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function da(){return Array.from(this)}function ha(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var i=e[t],s=0,a=i.length;s<a;++s){var o=i[s];if(o)return o}return null}function fa(){let e=0;for(const t of this)++e;return e}function pa(){return!this.node()}function ma(e){for(var t=this._groups,n=0,i=t.length;n<i;++n)for(var s=t[n],a=0,o=s.length,l;a<o;++a)(l=s[a])&&e.call(l,l.__data__,a,s);return this}function ga(e){return function(){this.removeAttribute(e)}}function xa(e){return function(){this.removeAttributeNS(e.space,e.local)}}function _a(e,t){return function(){this.setAttribute(e,t)}}function va(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function ya(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function ba(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function Na(e,t){var n=It(e);if(arguments.length<2){var i=this.node();return n.local?i.getAttributeNS(n.space,n.local):i.getAttribute(n)}return this.each((t==null?n.local?xa:ga:typeof t=="function"?n.local?ba:ya:n.local?va:_a)(n,t))}function Fi(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function wa(e){return function(){this.style.removeProperty(e)}}function Ca(e,t,n){return function(){this.style.setProperty(e,t,n)}}function ja(e,t,n){return function(){var i=t.apply(this,arguments);i==null?this.style.removeProperty(e):this.style.setProperty(e,i,n)}}function Ta(e,t,n){return arguments.length>1?this.each((t==null?wa:typeof t=="function"?ja:Ca)(e,t,n??"")):Re(this.node(),e)}function Re(e,t){return e.style.getPropertyValue(t)||Fi(e).getComputedStyle(e,null).getPropertyValue(t)}function Sa(e){return function(){delete this[e]}}function Ma(e,t){return function(){this[e]=t}}function ka(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function Ia(e,t){return arguments.length>1?this.each((t==null?Sa:typeof t=="function"?ka:Ma)(e,t)):this.node()[e]}function Bi(e){return e.trim().split(/^|\s+/)}function bn(e){return e.classList||new Pi(e)}function Pi(e){this._node=e,this._names=Bi(e.getAttribute("class")||"")}Pi.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function zi(e,t){for(var n=bn(e),i=-1,s=t.length;++i<s;)n.add(t[i])}function qi(e,t){for(var n=bn(e),i=-1,s=t.length;++i<s;)n.remove(t[i])}function Ea(e){return function(){zi(this,e)}}function $a(e){return function(){qi(this,e)}}function Da(e,t){return function(){(t.apply(this,arguments)?zi:qi)(this,e)}}function La(e,t){var n=Bi(e+"");if(arguments.length<2){for(var i=bn(this.node()),s=-1,a=n.length;++s<a;)if(!i.contains(n[s]))return!1;return!0}return this.each((typeof t=="function"?Da:t?Ea:$a)(n,t))}function Aa(){this.textContent=""}function Ra(e){return function(){this.textContent=e}}function Va(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function Oa(e){return arguments.length?this.each(e==null?Aa:(typeof e=="function"?Va:Ra)(e)):this.node().textContent}function Fa(){this.innerHTML=""}function Ba(e){return function(){this.innerHTML=e}}function Pa(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function za(e){return arguments.length?this.each(e==null?Fa:(typeof e=="function"?Pa:Ba)(e)):this.node().innerHTML}function qa(){this.nextSibling&&this.parentNode.appendChild(this)}function Wa(){return this.each(qa)}function Ha(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Ua(){return this.each(Ha)}function Ga(e){var t=typeof e=="function"?e:Li(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function Ja(){return null}function Ka(e,t){var n=typeof e=="function"?e:Li(e),i=t==null?Ja:typeof t=="function"?t:yn(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),i.apply(this,arguments)||null)})}function Xa(){var e=this.parentNode;e&&e.removeChild(this)}function Ya(){return this.each(Xa)}function Qa(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Za(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function eo(e){return this.select(e?Za:Qa)}function to(e){return arguments.length?this.property("__data__",e):this.node().__data__}function no(e){return function(t){e.call(this,t,this.__data__)}}function io(e){return e.trim().split(/^|\s+/).map(function(t){var n="",i=t.indexOf(".");return i>=0&&(n=t.slice(i+1),t=t.slice(0,i)),{type:t,name:n}})}function so(e){return function(){var t=this.__on;if(t){for(var n=0,i=-1,s=t.length,a;n<s;++n)a=t[n],(!e.type||a.type===e.type)&&a.name===e.name?this.removeEventListener(a.type,a.listener,a.options):t[++i]=a;++i?t.length=i:delete this.__on}}}function ro(e,t,n){return function(){var i=this.__on,s,a=no(t);if(i){for(var o=0,l=i.length;o<l;++o)if((s=i[o]).type===e.type&&s.name===e.name){this.removeEventListener(s.type,s.listener,s.options),this.addEventListener(s.type,s.listener=a,s.options=n),s.value=t;return}}this.addEventListener(e.type,a,n),s={type:e.type,name:e.name,value:t,listener:a,options:n},i?i.push(s):this.__on=[s]}}function ao(e,t,n){var i=io(e+""),s,a=i.length,o;if(arguments.length<2){var l=this.node().__on;if(l){for(var u=0,c=l.length,d;u<c;++u)for(s=0,d=l[u];s<a;++s)if((o=i[s]).type===d.type&&o.name===d.name)return d.value}return}for(l=t?ro:so,s=0;s<a;++s)this.each(l(i[s],t,n));return this}function Wi(e,t,n){var i=Fi(e),s=i.CustomEvent;typeof s=="function"?s=new s(t,n):(s=i.document.createEvent("Event"),n?(s.initEvent(t,n.bubbles,n.cancelable),s.detail=n.detail):s.initEvent(t,!1,!1)),e.dispatchEvent(s)}function oo(e,t){return function(){return Wi(this,e,t)}}function lo(e,t){return function(){return Wi(this,e,t.apply(this,arguments))}}function co(e,t){return this.each((typeof t=="function"?lo:oo)(e,t))}function*uo(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var i=e[t],s=0,a=i.length,o;s<a;++s)(o=i[s])&&(yield o)}var Hi=[null];function oe(e,t){this._groups=e,this._parents=t}function tt(){return new oe([[document.documentElement]],Hi)}function ho(){return this}oe.prototype=tt.prototype={constructor:oe,select:Vr,selectAll:Pr,selectChild:Hr,selectChildren:Kr,filter:Xr,data:na,enter:Yr,exit:sa,join:ra,merge:aa,selection:ho,order:oa,sort:la,call:ua,nodes:da,node:ha,size:fa,empty:pa,each:ma,attr:Na,style:Ta,property:Ia,classed:La,text:Oa,html:za,raise:Wa,lower:Ua,append:Ga,insert:Ka,remove:Ya,clone:eo,datum:to,on:ao,dispatch:co,[Symbol.iterator]:uo};function ne(e){return typeof e=="string"?new oe([[document.querySelector(e)]],[document.documentElement]):new oe([[e]],Hi)}function fo(e){let t;for(;t=e.sourceEvent;)e=t;return e}function Me(e,t){if(e=fo(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var i=n.createSVGPoint();return i.x=e.clientX,i.y=e.clientY,i=i.matrixTransform(t.getScreenCTM().inverse()),[i.x,i.y]}if(t.getBoundingClientRect){var s=t.getBoundingClientRect();return[e.clientX-s.left-t.clientLeft,e.clientY-s.top-t.clientTop]}}return[e.pageX,e.pageY]}var po={value:()=>{}};function Nn(){for(var e=0,t=arguments.length,n={},i;e<t;++e){if(!(i=arguments[e]+"")||i in n||/[\s.]/.test(i))throw new Error("illegal type: "+i);n[i]=[]}return new gt(n)}function gt(e){this._=e}function mo(e,t){return e.trim().split(/^|\s+/).map(function(n){var i="",s=n.indexOf(".");if(s>=0&&(i=n.slice(s+1),n=n.slice(0,s)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:i}})}gt.prototype=Nn.prototype={constructor:gt,on:function(e,t){var n=this._,i=mo(e+"",n),s,a=-1,o=i.length;if(arguments.length<2){for(;++a<o;)if((s=(e=i[a]).type)&&(s=go(n[s],e.name)))return s;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++a<o;)if(s=(e=i[a]).type)n[s]=Dn(n[s],e.name,t);else if(t==null)for(s in n)n[s]=Dn(n[s],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new gt(e)},call:function(e,t){if((s=arguments.length-2)>0)for(var n=new Array(s),i=0,s,a;i<s;++i)n[i]=arguments[i+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(a=this._[e],i=0,s=a.length;i<s;++i)a[i].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var i=this._[e],s=0,a=i.length;s<a;++s)i[s].value.apply(t,n)}};function go(e,t){for(var n=0,i=e.length,s;n<i;++n)if((s=e[n]).name===t)return s.value}function Dn(e,t,n){for(var i=0,s=e.length;i<s;++i)if(e[i].name===t){e[i]=po,e=e.slice(0,i).concat(e.slice(i+1));break}return n!=null&&e.push({name:t,value:n}),e}const rn={capture:!0,passive:!1};function an(e){e.preventDefault(),e.stopImmediatePropagation()}function xo(e){var t=e.document.documentElement,n=ne(e).on("dragstart.drag",an,rn);"onselectstart"in t?n.on("selectstart.drag",an,rn):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function _o(e,t){var n=e.document.documentElement,i=ne(e).on("dragstart.drag",null);t&&(i.on("click.drag",an,rn),setTimeout(function(){i.on("click.drag",null)},0)),"onselectstart"in n?i.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}function wn(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function Ui(e,t){var n=Object.create(e.prototype);for(var i in t)n[i]=t[i];return n}function nt(){}var Ke=.7,Nt=1/Ke,Ae="\\s*([+-]?\\d+)\\s*",Xe="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",ge="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",vo=/^#([0-9a-f]{3,8})$/,yo=new RegExp(`^rgb\\(${Ae},${Ae},${Ae}\\)$`),bo=new RegExp(`^rgb\\(${ge},${ge},${ge}\\)$`),No=new RegExp(`^rgba\\(${Ae},${Ae},${Ae},${Xe}\\)$`),wo=new RegExp(`^rgba\\(${ge},${ge},${ge},${Xe}\\)$`),Co=new RegExp(`^hsl\\(${Xe},${ge},${ge}\\)$`),jo=new RegExp(`^hsla\\(${Xe},${ge},${ge},${Xe}\\)$`),Ln={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};wn(nt,Ye,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:An,formatHex:An,formatHex8:To,formatHsl:So,formatRgb:Rn,toString:Rn});function An(){return this.rgb().formatHex()}function To(){return this.rgb().formatHex8()}function So(){return Gi(this).formatHsl()}function Rn(){return this.rgb().formatRgb()}function Ye(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=vo.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?Vn(t):n===3?new re(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?it(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?it(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=yo.exec(e))?new re(t[1],t[2],t[3],1):(t=bo.exec(e))?new re(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=No.exec(e))?it(t[1],t[2],t[3],t[4]):(t=wo.exec(e))?it(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=Co.exec(e))?Bn(t[1],t[2]/100,t[3]/100,1):(t=jo.exec(e))?Bn(t[1],t[2]/100,t[3]/100,t[4]):Ln.hasOwnProperty(e)?Vn(Ln[e]):e==="transparent"?new re(NaN,NaN,NaN,0):null}function Vn(e){return new re(e>>16&255,e>>8&255,e&255,1)}function it(e,t,n,i){return i<=0&&(e=t=n=NaN),new re(e,t,n,i)}function Mo(e){return e instanceof nt||(e=Ye(e)),e?(e=e.rgb(),new re(e.r,e.g,e.b,e.opacity)):new re}function on(e,t,n,i){return arguments.length===1?Mo(e):new re(e,t,n,i??1)}function re(e,t,n,i){this.r=+e,this.g=+t,this.b=+n,this.opacity=+i}wn(re,on,Ui(nt,{brighter(e){return e=e==null?Nt:Math.pow(Nt,e),new re(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Ke:Math.pow(Ke,e),new re(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new re(Ee(this.r),Ee(this.g),Ee(this.b),wt(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:On,formatHex:On,formatHex8:ko,formatRgb:Fn,toString:Fn}));function On(){return`#${Ie(this.r)}${Ie(this.g)}${Ie(this.b)}`}function ko(){return`#${Ie(this.r)}${Ie(this.g)}${Ie(this.b)}${Ie((isNaN(this.opacity)?1:this.opacity)*255)}`}function Fn(){const e=wt(this.opacity);return`${e===1?"rgb(":"rgba("}${Ee(this.r)}, ${Ee(this.g)}, ${Ee(this.b)}${e===1?")":`, ${e})`}`}function wt(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Ee(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Ie(e){return e=Ee(e),(e<16?"0":"")+e.toString(16)}function Bn(e,t,n,i){return i<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new fe(e,t,n,i)}function Gi(e){if(e instanceof fe)return new fe(e.h,e.s,e.l,e.opacity);if(e instanceof nt||(e=Ye(e)),!e)return new fe;if(e instanceof fe)return e;e=e.rgb();var t=e.r/255,n=e.g/255,i=e.b/255,s=Math.min(t,n,i),a=Math.max(t,n,i),o=NaN,l=a-s,u=(a+s)/2;return l?(t===a?o=(n-i)/l+(n<i)*6:n===a?o=(i-t)/l+2:o=(t-n)/l+4,l/=u<.5?a+s:2-a-s,o*=60):l=u>0&&u<1?0:o,new fe(o,l,u,e.opacity)}function Io(e,t,n,i){return arguments.length===1?Gi(e):new fe(e,t,n,i??1)}function fe(e,t,n,i){this.h=+e,this.s=+t,this.l=+n,this.opacity=+i}wn(fe,Io,Ui(nt,{brighter(e){return e=e==null?Nt:Math.pow(Nt,e),new fe(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Ke:Math.pow(Ke,e),new fe(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,i=n+(n<.5?n:1-n)*t,s=2*n-i;return new re(Ot(e>=240?e-240:e+120,s,i),Ot(e,s,i),Ot(e<120?e+240:e-120,s,i),this.opacity)},clamp(){return new fe(Pn(this.h),st(this.s),st(this.l),wt(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=wt(this.opacity);return`${e===1?"hsl(":"hsla("}${Pn(this.h)}, ${st(this.s)*100}%, ${st(this.l)*100}%${e===1?")":`, ${e})`}`}}));function Pn(e){return e=(e||0)%360,e<0?e+360:e}function st(e){return Math.max(0,Math.min(1,e||0))}function Ot(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const Ji=e=>()=>e;function Eo(e,t){return function(n){return e+n*t}}function $o(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(i){return Math.pow(e+i*t,n)}}function Do(e){return(e=+e)==1?Ki:function(t,n){return n-t?$o(t,n,e):Ji(isNaN(t)?n:t)}}function Ki(e,t){var n=t-e;return n?Eo(e,n):Ji(isNaN(e)?t:e)}const zn=function e(t){var n=Do(t);function i(s,a){var o=n((s=on(s)).r,(a=on(a)).r),l=n(s.g,a.g),u=n(s.b,a.b),c=Ki(s.opacity,a.opacity);return function(d){return s.r=o(d),s.g=l(d),s.b=u(d),s.opacity=c(d),s+""}}return i.gamma=e,i}(1);function Te(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}var ln=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Ft=new RegExp(ln.source,"g");function Lo(e){return function(){return e}}function Ao(e){return function(t){return e(t)+""}}function Ro(e,t){var n=ln.lastIndex=Ft.lastIndex=0,i,s,a,o=-1,l=[],u=[];for(e=e+"",t=t+"";(i=ln.exec(e))&&(s=Ft.exec(t));)(a=s.index)>n&&(a=t.slice(n,a),l[o]?l[o]+=a:l[++o]=a),(i=i[0])===(s=s[0])?l[o]?l[o]+=s:l[++o]=s:(l[++o]=null,u.push({i:o,x:Te(i,s)})),n=Ft.lastIndex;return n<t.length&&(a=t.slice(n),l[o]?l[o]+=a:l[++o]=a),l.length<2?u[0]?Ao(u[0].x):Lo(t):(t=u.length,function(c){for(var d=0,f;d<t;++d)l[(f=u[d]).i]=f.x(c);return l.join("")})}var qn=180/Math.PI,cn={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Xi(e,t,n,i,s,a){var o,l,u;return(o=Math.sqrt(e*e+t*t))&&(e/=o,t/=o),(u=e*n+t*i)&&(n-=e*u,i-=t*u),(l=Math.sqrt(n*n+i*i))&&(n/=l,i/=l,u/=l),e*i<t*n&&(e=-e,t=-t,u=-u,o=-o),{translateX:s,translateY:a,rotate:Math.atan2(t,e)*qn,skewX:Math.atan(u)*qn,scaleX:o,scaleY:l}}var rt;function Vo(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?cn:Xi(t.a,t.b,t.c,t.d,t.e,t.f)}function Oo(e){return e==null||(rt||(rt=document.createElementNS("http://www.w3.org/2000/svg","g")),rt.setAttribute("transform",e),!(e=rt.transform.baseVal.consolidate()))?cn:(e=e.matrix,Xi(e.a,e.b,e.c,e.d,e.e,e.f))}function Yi(e,t,n,i){function s(c){return c.length?c.pop()+" ":""}function a(c,d,f,h,p,v){if(c!==f||d!==h){var T=p.push("translate(",null,t,null,n);v.push({i:T-4,x:Te(c,f)},{i:T-2,x:Te(d,h)})}else(f||h)&&p.push("translate("+f+t+h+n)}function o(c,d,f,h){c!==d?(c-d>180?d+=360:d-c>180&&(c+=360),h.push({i:f.push(s(f)+"rotate(",null,i)-2,x:Te(c,d)})):d&&f.push(s(f)+"rotate("+d+i)}function l(c,d,f,h){c!==d?h.push({i:f.push(s(f)+"skewX(",null,i)-2,x:Te(c,d)}):d&&f.push(s(f)+"skewX("+d+i)}function u(c,d,f,h,p,v){if(c!==f||d!==h){var T=p.push(s(p)+"scale(",null,",",null,")");v.push({i:T-4,x:Te(c,f)},{i:T-2,x:Te(d,h)})}else(f!==1||h!==1)&&p.push(s(p)+"scale("+f+","+h+")")}return function(c,d){var f=[],h=[];return c=e(c),d=e(d),a(c.translateX,c.translateY,d.translateX,d.translateY,f,h),o(c.rotate,d.rotate,f,h),l(c.skewX,d.skewX,f,h),u(c.scaleX,c.scaleY,d.scaleX,d.scaleY,f,h),c=d=null,function(p){for(var v=-1,T=h.length,k;++v<T;)f[(k=h[v]).i]=k.x(p);return f.join("")}}}var Fo=Yi(Vo,"px, ","px)","deg)"),Bo=Yi(Oo,", ",")",")"),Po=1e-12;function Wn(e){return((e=Math.exp(e))+1/e)/2}function zo(e){return((e=Math.exp(e))-1/e)/2}function qo(e){return((e=Math.exp(2*e))-1)/(e+1)}const Wo=function e(t,n,i){function s(a,o){var l=a[0],u=a[1],c=a[2],d=o[0],f=o[1],h=o[2],p=d-l,v=f-u,T=p*p+v*v,k,C;if(T<Po)C=Math.log(h/c)/t,k=function(N){return[l+N*p,u+N*v,c*Math.exp(t*N*C)]};else{var _=Math.sqrt(T),j=(h*h-c*c+i*T)/(2*c*n*_),S=(h*h-c*c-i*T)/(2*h*n*_),x=Math.log(Math.sqrt(j*j+1)-j),M=Math.log(Math.sqrt(S*S+1)-S);C=(M-x)/t,k=function(N){var w=N*C,A=Wn(x),$=c/(n*_)*(A*qo(t*w+x)-zo(x));return[l+$*p,u+$*v,c*A/Wn(t*w+x)]}}return k.duration=C*1e3*t/Math.SQRT2,k}return s.rho=function(a){var o=Math.max(.001,+a),l=o*o,u=l*l;return e(o,l,u)},s}(Math.SQRT2,2,4);var Ve=0,He=0,Be=0,Qi=1e3,Ct,Ue,jt=0,$e=0,Et=0,Qe=typeof performance=="object"&&performance.now?performance:Date,Zi=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function Cn(){return $e||(Zi(Ho),$e=Qe.now()+Et)}function Ho(){$e=0}function Tt(){this._call=this._time=this._next=null}Tt.prototype=es.prototype={constructor:Tt,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?Cn():+n)+(t==null?0:+t),!this._next&&Ue!==this&&(Ue?Ue._next=this:Ct=this,Ue=this),this._call=e,this._time=n,un()},stop:function(){this._call&&(this._call=null,this._time=1/0,un())}};function es(e,t,n){var i=new Tt;return i.restart(e,t,n),i}function Uo(){Cn(),++Ve;for(var e=Ct,t;e;)(t=$e-e._time)>=0&&e._call.call(void 0,t),e=e._next;--Ve}function Hn(){$e=(jt=Qe.now())+Et,Ve=He=0;try{Uo()}finally{Ve=0,Jo(),$e=0}}function Go(){var e=Qe.now(),t=e-jt;t>Qi&&(Et-=t,jt=e)}function Jo(){for(var e,t=Ct,n,i=1/0;t;)t._call?(i>t._time&&(i=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:Ct=n);Ue=e,un(i)}function un(e){if(!Ve){He&&(He=clearTimeout(He));var t=e-$e;t>24?(e<1/0&&(He=setTimeout(Hn,e-Qe.now()-Et)),Be&&(Be=clearInterval(Be))):(Be||(jt=Qe.now(),Be=setInterval(Go,Qi)),Ve=1,Zi(Hn))}}function Un(e,t,n){var i=new Tt;return t=t==null?0:+t,i.restart(s=>{i.stop(),e(s+t)},t,n),i}var Ko=Nn("start","end","cancel","interrupt"),Xo=[],ts=0,Gn=1,dn=2,xt=3,Jn=4,hn=5,_t=6;function $t(e,t,n,i,s,a){var o=e.__transition;if(!o)e.__transition={};else if(n in o)return;Yo(e,n,{name:t,index:i,group:s,on:Ko,tween:Xo,time:a.time,delay:a.delay,duration:a.duration,ease:a.ease,timer:null,state:ts})}function jn(e,t){var n=me(e,t);if(n.state>ts)throw new Error("too late; already scheduled");return n}function xe(e,t){var n=me(e,t);if(n.state>xt)throw new Error("too late; already running");return n}function me(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function Yo(e,t,n){var i=e.__transition,s;i[t]=n,n.timer=es(a,0,n.time);function a(c){n.state=Gn,n.timer.restart(o,n.delay,n.time),n.delay<=c&&o(c-n.delay)}function o(c){var d,f,h,p;if(n.state!==Gn)return u();for(d in i)if(p=i[d],p.name===n.name){if(p.state===xt)return Un(o);p.state===Jn?(p.state=_t,p.timer.stop(),p.on.call("interrupt",e,e.__data__,p.index,p.group),delete i[d]):+d<t&&(p.state=_t,p.timer.stop(),p.on.call("cancel",e,e.__data__,p.index,p.group),delete i[d])}if(Un(function(){n.state===xt&&(n.state=Jn,n.timer.restart(l,n.delay,n.time),l(c))}),n.state=dn,n.on.call("start",e,e.__data__,n.index,n.group),n.state===dn){for(n.state=xt,s=new Array(h=n.tween.length),d=0,f=-1;d<h;++d)(p=n.tween[d].value.call(e,e.__data__,n.index,n.group))&&(s[++f]=p);s.length=f+1}}function l(c){for(var d=c<n.duration?n.ease.call(null,c/n.duration):(n.timer.restart(u),n.state=hn,1),f=-1,h=s.length;++f<h;)s[f].call(e,d);n.state===hn&&(n.on.call("end",e,e.__data__,n.index,n.group),u())}function u(){n.state=_t,n.timer.stop(),delete i[t];for(var c in i)return;delete e.__transition}}function vt(e,t){var n=e.__transition,i,s,a=!0,o;if(n){t=t==null?null:t+"";for(o in n){if((i=n[o]).name!==t){a=!1;continue}s=i.state>dn&&i.state<hn,i.state=_t,i.timer.stop(),i.on.call(s?"interrupt":"cancel",e,e.__data__,i.index,i.group),delete n[o]}a&&delete e.__transition}}function Qo(e){return this.each(function(){vt(this,e)})}function Zo(e,t){var n,i;return function(){var s=xe(this,e),a=s.tween;if(a!==n){i=n=a;for(var o=0,l=i.length;o<l;++o)if(i[o].name===t){i=i.slice(),i.splice(o,1);break}}s.tween=i}}function el(e,t,n){var i,s;if(typeof n!="function")throw new Error;return function(){var a=xe(this,e),o=a.tween;if(o!==i){s=(i=o).slice();for(var l={name:t,value:n},u=0,c=s.length;u<c;++u)if(s[u].name===t){s[u]=l;break}u===c&&s.push(l)}a.tween=s}}function tl(e,t){var n=this._id;if(e+="",arguments.length<2){for(var i=me(this.node(),n).tween,s=0,a=i.length,o;s<a;++s)if((o=i[s]).name===e)return o.value;return null}return this.each((t==null?Zo:el)(n,e,t))}function Tn(e,t,n){var i=e._id;return e.each(function(){var s=xe(this,i);(s.value||(s.value={}))[t]=n.apply(this,arguments)}),function(s){return me(s,i).value[t]}}function ns(e,t){var n;return(typeof t=="number"?Te:t instanceof Ye?zn:(n=Ye(t))?(t=n,zn):Ro)(e,t)}function nl(e){return function(){this.removeAttribute(e)}}function il(e){return function(){this.removeAttributeNS(e.space,e.local)}}function sl(e,t,n){var i,s=n+"",a;return function(){var o=this.getAttribute(e);return o===s?null:o===i?a:a=t(i=o,n)}}function rl(e,t,n){var i,s=n+"",a;return function(){var o=this.getAttributeNS(e.space,e.local);return o===s?null:o===i?a:a=t(i=o,n)}}function al(e,t,n){var i,s,a;return function(){var o,l=n(this),u;return l==null?void this.removeAttribute(e):(o=this.getAttribute(e),u=l+"",o===u?null:o===i&&u===s?a:(s=u,a=t(i=o,l)))}}function ol(e,t,n){var i,s,a;return function(){var o,l=n(this),u;return l==null?void this.removeAttributeNS(e.space,e.local):(o=this.getAttributeNS(e.space,e.local),u=l+"",o===u?null:o===i&&u===s?a:(s=u,a=t(i=o,l)))}}function ll(e,t){var n=It(e),i=n==="transform"?Bo:ns;return this.attrTween(e,typeof t=="function"?(n.local?ol:al)(n,i,Tn(this,"attr."+e,t)):t==null?(n.local?il:nl)(n):(n.local?rl:sl)(n,i,t))}function cl(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function ul(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function dl(e,t){var n,i;function s(){var a=t.apply(this,arguments);return a!==i&&(n=(i=a)&&ul(e,a)),n}return s._value=t,s}function hl(e,t){var n,i;function s(){var a=t.apply(this,arguments);return a!==i&&(n=(i=a)&&cl(e,a)),n}return s._value=t,s}function fl(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var i=It(e);return this.tween(n,(i.local?dl:hl)(i,t))}function pl(e,t){return function(){jn(this,e).delay=+t.apply(this,arguments)}}function ml(e,t){return t=+t,function(){jn(this,e).delay=t}}function gl(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?pl:ml)(t,e)):me(this.node(),t).delay}function xl(e,t){return function(){xe(this,e).duration=+t.apply(this,arguments)}}function _l(e,t){return t=+t,function(){xe(this,e).duration=t}}function vl(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?xl:_l)(t,e)):me(this.node(),t).duration}function yl(e,t){if(typeof t!="function")throw new Error;return function(){xe(this,e).ease=t}}function bl(e){var t=this._id;return arguments.length?this.each(yl(t,e)):me(this.node(),t).ease}function Nl(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;xe(this,e).ease=n}}function wl(e){if(typeof e!="function")throw new Error;return this.each(Nl(this._id,e))}function Cl(e){typeof e!="function"&&(e=Ri(e));for(var t=this._groups,n=t.length,i=new Array(n),s=0;s<n;++s)for(var a=t[s],o=a.length,l=i[s]=[],u,c=0;c<o;++c)(u=a[c])&&e.call(u,u.__data__,c,a)&&l.push(u);return new we(i,this._parents,this._name,this._id)}function jl(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,i=t.length,s=n.length,a=Math.min(i,s),o=new Array(i),l=0;l<a;++l)for(var u=t[l],c=n[l],d=u.length,f=o[l]=new Array(d),h,p=0;p<d;++p)(h=u[p]||c[p])&&(f[p]=h);for(;l<i;++l)o[l]=t[l];return new we(o,this._parents,this._name,this._id)}function Tl(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function Sl(e,t,n){var i,s,a=Tl(t)?jn:xe;return function(){var o=a(this,e),l=o.on;l!==i&&(s=(i=l).copy()).on(t,n),o.on=s}}function Ml(e,t){var n=this._id;return arguments.length<2?me(this.node(),n).on.on(e):this.each(Sl(n,e,t))}function kl(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function Il(){return this.on("end.remove",kl(this._id))}function El(e){var t=this._name,n=this._id;typeof e!="function"&&(e=yn(e));for(var i=this._groups,s=i.length,a=new Array(s),o=0;o<s;++o)for(var l=i[o],u=l.length,c=a[o]=new Array(u),d,f,h=0;h<u;++h)(d=l[h])&&(f=e.call(d,d.__data__,h,l))&&("__data__"in d&&(f.__data__=d.__data__),c[h]=f,$t(c[h],t,n,h,c,me(d,n)));return new we(a,this._parents,t,n)}function $l(e){var t=this._name,n=this._id;typeof e!="function"&&(e=Ai(e));for(var i=this._groups,s=i.length,a=[],o=[],l=0;l<s;++l)for(var u=i[l],c=u.length,d,f=0;f<c;++f)if(d=u[f]){for(var h=e.call(d,d.__data__,f,u),p,v=me(d,n),T=0,k=h.length;T<k;++T)(p=h[T])&&$t(p,t,n,T,h,v);a.push(h),o.push(d)}return new we(a,o,t,n)}var Dl=tt.prototype.constructor;function Ll(){return new Dl(this._groups,this._parents)}function Al(e,t){var n,i,s;return function(){var a=Re(this,e),o=(this.style.removeProperty(e),Re(this,e));return a===o?null:a===n&&o===i?s:s=t(n=a,i=o)}}function is(e){return function(){this.style.removeProperty(e)}}function Rl(e,t,n){var i,s=n+"",a;return function(){var o=Re(this,e);return o===s?null:o===i?a:a=t(i=o,n)}}function Vl(e,t,n){var i,s,a;return function(){var o=Re(this,e),l=n(this),u=l+"";return l==null&&(u=l=(this.style.removeProperty(e),Re(this,e))),o===u?null:o===i&&u===s?a:(s=u,a=t(i=o,l))}}function Ol(e,t){var n,i,s,a="style."+t,o="end."+a,l;return function(){var u=xe(this,e),c=u.on,d=u.value[a]==null?l||(l=is(t)):void 0;(c!==n||s!==d)&&(i=(n=c).copy()).on(o,s=d),u.on=i}}function Fl(e,t,n){var i=(e+="")=="transform"?Fo:ns;return t==null?this.styleTween(e,Al(e,i)).on("end.style."+e,is(e)):typeof t=="function"?this.styleTween(e,Vl(e,i,Tn(this,"style."+e,t))).each(Ol(this._id,e)):this.styleTween(e,Rl(e,i,t),n).on("end.style."+e,null)}function Bl(e,t,n){return function(i){this.style.setProperty(e,t.call(this,i),n)}}function Pl(e,t,n){var i,s;function a(){var o=t.apply(this,arguments);return o!==s&&(i=(s=o)&&Bl(e,o,n)),i}return a._value=t,a}function zl(e,t,n){var i="style."+(e+="");if(arguments.length<2)return(i=this.tween(i))&&i._value;if(t==null)return this.tween(i,null);if(typeof t!="function")throw new Error;return this.tween(i,Pl(e,t,n??""))}function ql(e){return function(){this.textContent=e}}function Wl(e){return function(){var t=e(this);this.textContent=t??""}}function Hl(e){return this.tween("text",typeof e=="function"?Wl(Tn(this,"text",e)):ql(e==null?"":e+""))}function Ul(e){return function(t){this.textContent=e.call(this,t)}}function Gl(e){var t,n;function i(){var s=e.apply(this,arguments);return s!==n&&(t=(n=s)&&Ul(s)),t}return i._value=e,i}function Jl(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,Gl(e))}function Kl(){for(var e=this._name,t=this._id,n=ss(),i=this._groups,s=i.length,a=0;a<s;++a)for(var o=i[a],l=o.length,u,c=0;c<l;++c)if(u=o[c]){var d=me(u,t);$t(u,e,n,c,o,{time:d.time+d.delay+d.duration,delay:0,duration:d.duration,ease:d.ease})}return new we(i,this._parents,e,n)}function Xl(){var e,t,n=this,i=n._id,s=n.size();return new Promise(function(a,o){var l={value:o},u={value:function(){--s===0&&a()}};n.each(function(){var c=xe(this,i),d=c.on;d!==e&&(t=(e=d).copy(),t._.cancel.push(l),t._.interrupt.push(l),t._.end.push(u)),c.on=t}),s===0&&a()})}var Yl=0;function we(e,t,n,i){this._groups=e,this._parents=t,this._name=n,this._id=i}function ss(){return++Yl}var _e=tt.prototype;we.prototype={constructor:we,select:El,selectAll:$l,selectChild:_e.selectChild,selectChildren:_e.selectChildren,filter:Cl,merge:jl,selection:Ll,transition:Kl,call:_e.call,nodes:_e.nodes,node:_e.node,size:_e.size,empty:_e.empty,each:_e.each,on:Ml,attr:ll,attrTween:fl,style:Fl,styleTween:zl,text:Hl,textTween:Jl,remove:Il,tween:tl,delay:gl,duration:vl,ease:bl,easeVarying:wl,end:Xl,[Symbol.iterator]:_e[Symbol.iterator]};function Ql(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var Zl={time:null,delay:0,duration:250,ease:Ql};function ec(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function tc(e){var t,n;e instanceof we?(t=e._id,e=e._name):(t=ss(),(n=Zl).time=Cn(),e=e==null?null:e+"");for(var i=this._groups,s=i.length,a=0;a<s;++a)for(var o=i[a],l=o.length,u,c=0;c<l;++c)(u=o[c])&&$t(u,e,t,c,o,n||ec(u,t));return new we(i,this._parents,e,t)}tt.prototype.interrupt=Qo;tt.prototype.transition=tc;const at=e=>()=>e;function nc(e,{sourceEvent:t,target:n,transform:i,dispatch:s}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:i,enumerable:!0,configurable:!0},_:{value:s}})}function be(e,t,n){this.k=e,this.x=t,this.y=n}be.prototype={constructor:be,scale:function(e){return e===1?this:new be(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new be(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var St=new be(1,0,0);be.prototype;function Bt(e){e.stopImmediatePropagation()}function Pe(e){e.preventDefault(),e.stopImmediatePropagation()}function ic(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function sc(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function Kn(){return this.__zoom||St}function rc(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function ac(){return navigator.maxTouchPoints||"ontouchstart"in this}function oc(e,t,n){var i=e.invertX(t[0][0])-n[0][0],s=e.invertX(t[1][0])-n[1][0],a=e.invertY(t[0][1])-n[0][1],o=e.invertY(t[1][1])-n[1][1];return e.translate(s>i?(i+s)/2:Math.min(0,i)||Math.max(0,s),o>a?(a+o)/2:Math.min(0,a)||Math.max(0,o))}function Pt(){var e=ic,t=sc,n=oc,i=rc,s=ac,a=[0,1/0],o=[[-1/0,-1/0],[1/0,1/0]],l=250,u=Wo,c=Nn("start","zoom","end"),d,f,h,p=500,v=150,T=0,k=10;function C(m){m.property("__zoom",Kn).on("wheel.zoom",w,{passive:!1}).on("mousedown.zoom",A).on("dblclick.zoom",$).filter(s).on("touchstart.zoom",P).on("touchmove.zoom",U).on("touchend.zoom touchcancel.zoom",I).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}C.transform=function(m,b,g,E){var R=m.selection?m.selection():m;R.property("__zoom",Kn),m!==R?x(m,b,g,E):R.interrupt().each(function(){M(this,arguments).event(E).start().zoom(null,typeof b=="function"?b.apply(this,arguments):b).end()})},C.scaleBy=function(m,b,g,E){C.scaleTo(m,function(){var R=this.__zoom.k,V=typeof b=="function"?b.apply(this,arguments):b;return R*V},g,E)},C.scaleTo=function(m,b,g,E){C.transform(m,function(){var R=t.apply(this,arguments),V=this.__zoom,O=g==null?S(R):typeof g=="function"?g.apply(this,arguments):g,q=V.invert(O),Y=typeof b=="function"?b.apply(this,arguments):b;return n(j(_(V,Y),O,q),R,o)},g,E)},C.translateBy=function(m,b,g,E){C.transform(m,function(){return n(this.__zoom.translate(typeof b=="function"?b.apply(this,arguments):b,typeof g=="function"?g.apply(this,arguments):g),t.apply(this,arguments),o)},null,E)},C.translateTo=function(m,b,g,E,R){C.transform(m,function(){var V=t.apply(this,arguments),O=this.__zoom,q=E==null?S(V):typeof E=="function"?E.apply(this,arguments):E;return n(St.translate(q[0],q[1]).scale(O.k).translate(typeof b=="function"?-b.apply(this,arguments):-b,typeof g=="function"?-g.apply(this,arguments):-g),V,o)},E,R)};function _(m,b){return b=Math.max(a[0],Math.min(a[1],b)),b===m.k?m:new be(b,m.x,m.y)}function j(m,b,g){var E=b[0]-g[0]*m.k,R=b[1]-g[1]*m.k;return E===m.x&&R===m.y?m:new be(m.k,E,R)}function S(m){return[(+m[0][0]+ +m[1][0])/2,(+m[0][1]+ +m[1][1])/2]}function x(m,b,g,E){m.on("start.zoom",function(){M(this,arguments).event(E).start()}).on("interrupt.zoom end.zoom",function(){M(this,arguments).event(E).end()}).tween("zoom",function(){var R=this,V=arguments,O=M(R,V).event(E),q=t.apply(R,V),Y=g==null?S(q):typeof g=="function"?g.apply(R,V):g,le=Math.max(q[1][0]-q[0][0],q[1][1]-q[0][1]),Q=R.__zoom,ce=typeof b=="function"?b.apply(R,V):b,ue=u(Q.invert(Y).concat(le/Q.k),ce.invert(Y).concat(le/ce.k));return function(de){if(de===1)de=ce;else{var he=ue(de),Oe=le/he[2];de=new be(Oe,Y[0]-he[0]*Oe,Y[1]-he[1]*Oe)}O.zoom(null,de)}})}function M(m,b,g){return!g&&m.__zooming||new N(m,b)}function N(m,b){this.that=m,this.args=b,this.active=0,this.sourceEvent=null,this.extent=t.apply(m,b),this.taps=0}N.prototype={event:function(m){return m&&(this.sourceEvent=m),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(m,b){return this.mouse&&m!=="mouse"&&(this.mouse[1]=b.invert(this.mouse[0])),this.touch0&&m!=="touch"&&(this.touch0[1]=b.invert(this.touch0[0])),this.touch1&&m!=="touch"&&(this.touch1[1]=b.invert(this.touch1[0])),this.that.__zoom=b,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(m){var b=ne(this.that).datum();c.call(m,this.that,new nc(m,{sourceEvent:this.sourceEvent,target:C,transform:this.that.__zoom,dispatch:c}),b)}};function w(m,...b){if(!e.apply(this,arguments))return;var g=M(this,b).event(m),E=this.__zoom,R=Math.max(a[0],Math.min(a[1],E.k*Math.pow(2,i.apply(this,arguments)))),V=Me(m);if(g.wheel)(g.mouse[0][0]!==V[0]||g.mouse[0][1]!==V[1])&&(g.mouse[1]=E.invert(g.mouse[0]=V)),clearTimeout(g.wheel);else{if(E.k===R)return;g.mouse=[V,E.invert(V)],vt(this),g.start()}Pe(m),g.wheel=setTimeout(O,v),g.zoom("mouse",n(j(_(E,R),g.mouse[0],g.mouse[1]),g.extent,o));function O(){g.wheel=null,g.end()}}function A(m,...b){if(h||!e.apply(this,arguments))return;var g=m.currentTarget,E=M(this,b,!0).event(m),R=ne(m.view).on("mousemove.zoom",Y,!0).on("mouseup.zoom",le,!0),V=Me(m,g),O=m.clientX,q=m.clientY;xo(m.view),Bt(m),E.mouse=[V,this.__zoom.invert(V)],vt(this),E.start();function Y(Q){if(Pe(Q),!E.moved){var ce=Q.clientX-O,ue=Q.clientY-q;E.moved=ce*ce+ue*ue>T}E.event(Q).zoom("mouse",n(j(E.that.__zoom,E.mouse[0]=Me(Q,g),E.mouse[1]),E.extent,o))}function le(Q){R.on("mousemove.zoom mouseup.zoom",null),_o(Q.view,E.moved),Pe(Q),E.event(Q).end()}}function $(m,...b){if(e.apply(this,arguments)){var g=this.__zoom,E=Me(m.changedTouches?m.changedTouches[0]:m,this),R=g.invert(E),V=g.k*(m.shiftKey?.5:2),O=n(j(_(g,V),E,R),t.apply(this,b),o);Pe(m),l>0?ne(this).transition().duration(l).call(x,O,E,m):ne(this).call(C.transform,O,E,m)}}function P(m,...b){if(e.apply(this,arguments)){var g=m.touches,E=g.length,R=M(this,b,m.changedTouches.length===E).event(m),V,O,q,Y;for(Bt(m),O=0;O<E;++O)q=g[O],Y=Me(q,this),Y=[Y,this.__zoom.invert(Y),q.identifier],R.touch0?!R.touch1&&R.touch0[2]!==Y[2]&&(R.touch1=Y,R.taps=0):(R.touch0=Y,V=!0,R.taps=1+!!d);d&&(d=clearTimeout(d)),V&&(R.taps<2&&(f=Y[0],d=setTimeout(function(){d=null},p)),vt(this),R.start())}}function U(m,...b){if(this.__zooming){var g=M(this,b).event(m),E=m.changedTouches,R=E.length,V,O,q,Y;for(Pe(m),V=0;V<R;++V)O=E[V],q=Me(O,this),g.touch0&&g.touch0[2]===O.identifier?g.touch0[0]=q:g.touch1&&g.touch1[2]===O.identifier&&(g.touch1[0]=q);if(O=g.that.__zoom,g.touch1){var le=g.touch0[0],Q=g.touch0[1],ce=g.touch1[0],ue=g.touch1[1],de=(de=ce[0]-le[0])*de+(de=ce[1]-le[1])*de,he=(he=ue[0]-Q[0])*he+(he=ue[1]-Q[1])*he;O=_(O,Math.sqrt(de/he)),q=[(le[0]+ce[0])/2,(le[1]+ce[1])/2],Y=[(Q[0]+ue[0])/2,(Q[1]+ue[1])/2]}else if(g.touch0)q=g.touch0[0],Y=g.touch0[1];else return;g.zoom("touch",n(j(O,q,Y),g.extent,o))}}function I(m,...b){if(this.__zooming){var g=M(this,b).event(m),E=m.changedTouches,R=E.length,V,O;for(Bt(m),h&&clearTimeout(h),h=setTimeout(function(){h=null},p),V=0;V<R;++V)O=E[V],g.touch0&&g.touch0[2]===O.identifier?delete g.touch0:g.touch1&&g.touch1[2]===O.identifier&&delete g.touch1;if(g.touch1&&!g.touch0&&(g.touch0=g.touch1,delete g.touch1),g.touch0)g.touch0[1]=this.__zoom.invert(g.touch0[0]);else if(g.end(),g.taps===2&&(O=Me(O,this),Math.hypot(f[0]-O[0],f[1]-O[1])<k)){var q=ne(this).on("dblclick.zoom");q&&q.apply(this,arguments)}}}return C.wheelDelta=function(m){return arguments.length?(i=typeof m=="function"?m:at(+m),C):i},C.filter=function(m){return arguments.length?(e=typeof m=="function"?m:at(!!m),C):e},C.touchable=function(m){return arguments.length?(s=typeof m=="function"?m:at(!!m),C):s},C.extent=function(m){return arguments.length?(t=typeof m=="function"?m:at([[+m[0][0],+m[0][1]],[+m[1][0],+m[1][1]]]),C):t},C.scaleExtent=function(m){return arguments.length?(a[0]=+m[0],a[1]=+m[1],C):[a[0],a[1]]},C.translateExtent=function(m){return arguments.length?(o[0][0]=+m[0][0],o[1][0]=+m[1][0],o[0][1]=+m[0][1],o[1][1]=+m[1][1],C):[[o[0][0],o[0][1]],[o[1][0],o[1][1]]]},C.constrain=function(m){return arguments.length?(n=m,C):n},C.duration=function(m){return arguments.length?(l=+m,C):l},C.interpolate=function(m){return arguments.length?(u=m,C):u},C.on=function(){var m=c.on.apply(c,arguments);return m===c?C:m},C.clickDistance=function(m){return arguments.length?(T=(m=+m)*m,C):Math.sqrt(T)},C.tapDistance=function(m){return arguments.length?(k=+m,C):k},C}var Xn=Object.prototype.hasOwnProperty;function Ge(e,t){var n,i;if(e===t)return!0;if(e&&t&&(n=e.constructor)===t.constructor){if(n===Date)return e.getTime()===t.getTime();if(n===RegExp)return e.toString()===t.toString();if(n===Array){if((i=e.length)===t.length)for(;i--&&Ge(e[i],t[i]););return i===-1}if(!n||typeof e=="object"){i=0;for(n in e)if(Xn.call(e,n)&&++i&&!Xn.call(t,n)||!(n in t)||!Ge(e[n],t[n]))return!1;return Object.keys(t).length===i}}return e!==e&&t!==t}var zt={exports:{}},Yn;function lc(){return Yn||(Yn=1,function(e){var t=function(){function n(h,p){return p!=null&&h instanceof p}var i;try{i=Map}catch{i=function(){}}var s;try{s=Set}catch{s=function(){}}var a;try{a=Promise}catch{a=function(){}}function o(h,p,v,T,k){typeof p=="object"&&(v=p.depth,T=p.prototype,k=p.includeNonEnumerable,p=p.circular);var C=[],_=[],j=typeof Buffer<"u";typeof p>"u"&&(p=!0),typeof v>"u"&&(v=1/0);function S(x,M){if(x===null)return null;if(M===0)return x;var N,w;if(typeof x!="object")return x;if(n(x,i))N=new i;else if(n(x,s))N=new s;else if(n(x,a))N=new a(function(E,R){x.then(function(V){E(S(V,M-1))},function(V){R(S(V,M-1))})});else if(o.__isArray(x))N=[];else if(o.__isRegExp(x))N=new RegExp(x.source,f(x)),x.lastIndex&&(N.lastIndex=x.lastIndex);else if(o.__isDate(x))N=new Date(x.getTime());else{if(j&&Buffer.isBuffer(x))return Buffer.allocUnsafe?N=Buffer.allocUnsafe(x.length):N=new Buffer(x.length),x.copy(N),N;n(x,Error)?N=Object.create(x):typeof T>"u"?(w=Object.getPrototypeOf(x),N=Object.create(w)):(N=Object.create(T),w=T)}if(p){var A=C.indexOf(x);if(A!=-1)return _[A];C.push(x),_.push(N)}n(x,i)&&x.forEach(function(E,R){var V=S(R,M-1),O=S(E,M-1);N.set(V,O)}),n(x,s)&&x.forEach(function(E){var R=S(E,M-1);N.add(R)});for(var $ in x){var P;w&&(P=Object.getOwnPropertyDescriptor(w,$)),!(P&&P.set==null)&&(N[$]=S(x[$],M-1))}if(Object.getOwnPropertySymbols)for(var U=Object.getOwnPropertySymbols(x),$=0;$<U.length;$++){var I=U[$],m=Object.getOwnPropertyDescriptor(x,I);m&&!m.enumerable&&!k||(N[I]=S(x[I],M-1),m.enumerable||Object.defineProperty(N,I,{enumerable:!1}))}if(k)for(var b=Object.getOwnPropertyNames(x),$=0;$<b.length;$++){var g=b[$],m=Object.getOwnPropertyDescriptor(x,g);m&&m.enumerable||(N[g]=S(x[g],M-1),Object.defineProperty(N,g,{enumerable:!1}))}return N}return S(h,v)}o.clonePrototype=function(p){if(p===null)return null;var v=function(){};return v.prototype=p,new v};function l(h){return Object.prototype.toString.call(h)}o.__objToStr=l;function u(h){return typeof h=="object"&&l(h)==="[object Date]"}o.__isDate=u;function c(h){return typeof h=="object"&&l(h)==="[object Array]"}o.__isArray=c;function d(h){return typeof h=="object"&&l(h)==="[object RegExp]"}o.__isRegExp=d;function f(h){var p="";return h.global&&(p+="g"),h.ignoreCase&&(p+="i"),h.multiline&&(p+="m"),p}return o.__getRegExpFlags=f,o}();e.exports&&(e.exports=t)}(zt)),zt.exports}var cc=lc();const ee=Es(cc);var ot,uc=new Uint8Array(16);function dc(){if(!ot&&(ot=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!ot))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return ot(uc)}const hc=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function fc(e){return typeof e=="string"&&hc.test(e)}var Z=[];for(var qt=0;qt<256;++qt)Z.push((qt+256).toString(16).substr(1));function pc(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=(Z[e[t+0]]+Z[e[t+1]]+Z[e[t+2]]+Z[e[t+3]]+"-"+Z[e[t+4]]+Z[e[t+5]]+"-"+Z[e[t+6]]+Z[e[t+7]]+"-"+Z[e[t+8]]+Z[e[t+9]]+"-"+Z[e[t+10]]+Z[e[t+11]]+Z[e[t+12]]+Z[e[t+13]]+Z[e[t+14]]+Z[e[t+15]]).toLowerCase();if(!fc(n))throw TypeError("Stringified UUID is invalid");return n}function Wt(e,t,n){e=e||{};var i=e.random||(e.rng||dc)();return i[6]=i[6]&15|64,i[8]=i[8]&63|128,pc(i)}var lt={exports:{}},Ht={exports:{}},Ut,Qn;function mc(){if(Qn)return Ut;Qn=1;var e="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return Ut=e,Ut}var Gt,Zn;function gc(){if(Zn)return Gt;Zn=1;var e=mc();function t(){}function n(){}return n.resetWarningCache=t,Gt=function(){function i(o,l,u,c,d,f){if(f!==e){var h=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw h.name="Invariant Violation",h}}i.isRequired=i;function s(){return i}var a={array:i,bigint:i,bool:i,func:i,number:i,object:i,string:i,symbol:i,any:i,arrayOf:s,element:i,elementType:i,instanceOf:s,node:i,objectOf:s,oneOf:s,oneOfType:s,shape:s,exact:s,checkPropTypes:n,resetWarningCache:t};return a.PropTypes=a,a},Gt}var ei;function Dt(){return ei||(ei=1,Ht.exports=gc()()),Ht.exports}var ct={exports:{}},Jt,ti;function xc(){return ti||(ti=1,Jt=function(){for(var t=arguments.length,n=[],i=0;i<t;i++)n[i]=arguments[i];if(n=n.filter(function(s){return s!=null}),n.length!==0)return n.length===1?n[0]:n.reduce(function(s,a){return function(){s.apply(this,arguments),a.apply(this,arguments)}})}),Jt}var Kt,ni;function _c(){if(ni)return Kt;ni=1;var e=function(){};return Kt=e,Kt}function rs(){var e=this.constructor.getDerivedStateFromProps(this.props,this.state);e!=null&&this.setState(e)}function as(e){function t(n){var i=this.constructor.getDerivedStateFromProps(e,n);return i??null}this.setState(t.bind(this))}function os(e,t){try{var n=this.props,i=this.state;this.props=e,this.state=t,this.__reactInternalSnapshotFlag=!0,this.__reactInternalSnapshot=this.getSnapshotBeforeUpdate(n,i)}finally{this.props=n,this.state=i}}rs.__suppressDeprecationWarning=!0;as.__suppressDeprecationWarning=!0;os.__suppressDeprecationWarning=!0;function vc(e){var t=e.prototype;if(!t||!t.isReactComponent)throw new Error("Can only polyfill class components");if(typeof e.getDerivedStateFromProps!="function"&&typeof t.getSnapshotBeforeUpdate!="function")return e;var n=null,i=null,s=null;if(typeof t.componentWillMount=="function"?n="componentWillMount":typeof t.UNSAFE_componentWillMount=="function"&&(n="UNSAFE_componentWillMount"),typeof t.componentWillReceiveProps=="function"?i="componentWillReceiveProps":typeof t.UNSAFE_componentWillReceiveProps=="function"&&(i="UNSAFE_componentWillReceiveProps"),typeof t.componentWillUpdate=="function"?s="componentWillUpdate":typeof t.UNSAFE_componentWillUpdate=="function"&&(s="UNSAFE_componentWillUpdate"),n!==null||i!==null||s!==null){var a=e.displayName||e.name,o=typeof e.getDerivedStateFromProps=="function"?"getDerivedStateFromProps()":"getSnapshotBeforeUpdate()";throw Error(`Unsafe legacy lifecycles will not be called for components using new component APIs.

`+a+" uses "+o+" but also contains the following legacy lifecycles:"+(n!==null?`
  `+n:"")+(i!==null?`
  `+i:"")+(s!==null?`
  `+s:"")+`

The above lifecycles should be removed. Learn more about this warning here:
https://fb.me/react-async-component-lifecycle-hooks`)}if(typeof e.getDerivedStateFromProps=="function"&&(t.componentWillMount=rs,t.componentWillReceiveProps=as),typeof t.getSnapshotBeforeUpdate=="function"){if(typeof t.componentDidUpdate!="function")throw new Error("Cannot polyfill getSnapshotBeforeUpdate() for components that do not define componentDidUpdate() on the prototype");t.componentWillUpdate=os;var l=t.componentDidUpdate;t.componentDidUpdate=function(c,d,f){var h=this.__reactInternalSnapshotFlag?this.__reactInternalSnapshot:f;l.call(this,c,d,h)}}return e}const yc=Object.freeze(Object.defineProperty({__proto__:null,polyfill:vc},Symbol.toStringTag,{value:"Module"})),bc=$s(yc);var ze={},ii;function Nc(){if(ii)return ze;ii=1,ze.__esModule=!0,ze.getChildMapping=t,ze.mergeChildMappings=n;var e=et();function t(i){if(!i)return i;var s={};return e.Children.map(i,function(a){return a}).forEach(function(a){s[a.key]=a}),s}function n(i,s){i=i||{},s=s||{};function a(p){return s.hasOwnProperty(p)?s[p]:i[p]}var o={},l=[];for(var u in i)s.hasOwnProperty(u)?l.length&&(o[u]=l,l=[]):l.push(u);var c=void 0,d={};for(var f in s){if(o.hasOwnProperty(f))for(c=0;c<o[f].length;c++){var h=o[f][c];d[o[f][c]]=a(h)}d[f]=a(f)}for(c=0;c<l.length;c++)d[l[c]]=a(l[c]);return d}return ze}var si;function ls(){return si||(si=1,function(e,t){t.__esModule=!0;var n=Object.assign||function(_){for(var j=1;j<arguments.length;j++){var S=arguments[j];for(var x in S)Object.prototype.hasOwnProperty.call(S,x)&&(_[x]=S[x])}return _},i=xc(),s=h(i),a=et(),o=h(a),l=Dt(),u=h(l),c=_c();h(c);var d=bc,f=Nc();function h(_){return _&&_.__esModule?_:{default:_}}function p(_,j){if(!(_ instanceof j))throw new TypeError("Cannot call a class as a function")}function v(_,j){if(!_)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return j&&(typeof j=="object"||typeof j=="function")?j:_}function T(_,j){if(typeof j!="function"&&j!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof j);_.prototype=Object.create(j&&j.prototype,{constructor:{value:_,enumerable:!1,writable:!0,configurable:!0}}),j&&(Object.setPrototypeOf?Object.setPrototypeOf(_,j):_.__proto__=j)}u.default.any,u.default.func,u.default.node;var k={component:"span",childFactory:function(j){return j}},C=function(_){T(j,_);function j(S,x){p(this,j);var M=v(this,_.call(this,S,x));return M.performAppear=function(N,w){M.currentlyTransitioningKeys[N]=!0,w.componentWillAppear?w.componentWillAppear(M._handleDoneAppearing.bind(M,N,w)):M._handleDoneAppearing(N,w)},M._handleDoneAppearing=function(N,w){w&&w.componentDidAppear&&w.componentDidAppear(),delete M.currentlyTransitioningKeys[N];var A=(0,f.getChildMapping)(M.props.children);(!A||!A.hasOwnProperty(N))&&M.performLeave(N,w)},M.performEnter=function(N,w){M.currentlyTransitioningKeys[N]=!0,w.componentWillEnter?w.componentWillEnter(M._handleDoneEntering.bind(M,N,w)):M._handleDoneEntering(N,w)},M._handleDoneEntering=function(N,w){w&&w.componentDidEnter&&w.componentDidEnter(),delete M.currentlyTransitioningKeys[N];var A=(0,f.getChildMapping)(M.props.children);(!A||!A.hasOwnProperty(N))&&M.performLeave(N,w)},M.performLeave=function(N,w){M.currentlyTransitioningKeys[N]=!0,w&&w.componentWillLeave?w.componentWillLeave(M._handleDoneLeaving.bind(M,N,w)):M._handleDoneLeaving(N,w)},M._handleDoneLeaving=function(N,w){w&&w.componentDidLeave&&w.componentDidLeave(),delete M.currentlyTransitioningKeys[N];var A=(0,f.getChildMapping)(M.props.children);A&&A.hasOwnProperty(N)?M.keysToEnter.push(N):M.setState(function($){var P=n({},$.children);return delete P[N],{children:P}})},M.childRefs=Object.create(null),M.currentlyTransitioningKeys={},M.keysToEnter=[],M.keysToLeave=[],M.state={children:(0,f.getChildMapping)(S.children)},M}return j.prototype.componentDidMount=function(){var x=this.state.children;for(var M in x)x[M]&&this.performAppear(M,this.childRefs[M])},j.getDerivedStateFromProps=function(x,M){var N=(0,f.getChildMapping)(x.children),w=M.children;return{children:(0,f.mergeChildMappings)(w,N)}},j.prototype.componentDidUpdate=function(x,M){var N=this,w=(0,f.getChildMapping)(this.props.children),A=M.children;for(var $ in w){var P=A&&A.hasOwnProperty($);w[$]&&!P&&!this.currentlyTransitioningKeys[$]&&this.keysToEnter.push($)}for(var U in A){var I=w&&w.hasOwnProperty(U);A[U]&&!I&&!this.currentlyTransitioningKeys[U]&&this.keysToLeave.push(U)}var m=this.keysToEnter;this.keysToEnter=[],m.forEach(function(g){return N.performEnter(g,N.childRefs[g])});var b=this.keysToLeave;this.keysToLeave=[],b.forEach(function(g){return N.performLeave(g,N.childRefs[g])})},j.prototype.render=function(){var x=this,M=[],N=function(P){var U=x.state.children[P];if(U){var I=typeof U.ref!="string",m=x.props.childFactory(U),b=function(E){x.childRefs[P]=E};m===U&&I&&(b=(0,s.default)(U.ref,b)),M.push(o.default.cloneElement(m,{key:P,ref:b}))}};for(var w in this.state.children)N(w);var A=n({},this.props);return delete A.transitionLeave,delete A.transitionName,delete A.transitionAppear,delete A.transitionEnter,delete A.childFactory,delete A.transitionLeaveTimeout,delete A.transitionEnterTimeout,delete A.transitionAppearTimeout,delete A.component,o.default.createElement(this.props.component,A,M)},j}(o.default.Component);C.displayName="TransitionGroup",C.propTypes={},C.defaultProps=k,t.default=(0,d.polyfill)(C),e.exports=t.default}(ct,ct.exports)),ct.exports}var ut={exports:{}},dt={exports:{}},Xt={exports:{}},ri;function Sn(){return ri||(ri=1,function(e){function t(n){return n&&n.__esModule?n:{default:n}}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}(Xt)),Xt.exports}var ht={exports:{}},ai;function wc(){return ai||(ai=1,function(e,t){t.__esModule=!0,t.default=n;function n(i,s){return i.classList?!!s&&i.classList.contains(s):(" "+(i.className.baseVal||i.className)+" ").indexOf(" "+s+" ")!==-1}e.exports=t.default}(ht,ht.exports)),ht.exports}var oi;function Cc(){return oi||(oi=1,function(e,t){var n=Sn();t.__esModule=!0,t.default=s;var i=n(wc());function s(a,o){a.classList?a.classList.add(o):(0,i.default)(a,o)||(typeof a.className=="string"?a.className=a.className+" "+o:a.setAttribute("class",(a.className&&a.className.baseVal||"")+" "+o))}e.exports=t.default}(dt,dt.exports)),dt.exports}var Yt,li;function jc(){if(li)return Yt;li=1;function e(t,n){return t.replace(new RegExp("(^|\\s)"+n+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}return Yt=function(n,i){n.classList?n.classList.remove(i):typeof n.className=="string"?n.className=e(n.className,i):n.setAttribute("class",e(n.className&&n.className.baseVal||"",i))},Yt}var ft={exports:{}},pt={exports:{}},ci;function cs(){return ci||(ci=1,function(e,t){t.__esModule=!0,t.default=void 0;var n=!!(typeof window<"u"&&window.document&&window.document.createElement);t.default=n,e.exports=t.default}(pt,pt.exports)),pt.exports}var ui;function Tc(){return ui||(ui=1,function(e,t){var n=Sn();t.__esModule=!0,t.default=void 0;var i=n(cs()),s=["","webkit","moz","o","ms"],a="clearTimeout",o=d,l,u=function(p,v){return p+(p?v[0].toUpperCase()+v.substr(1):v)+"AnimationFrame"};i.default&&s.some(function(h){var p=u(h,"request");if(p in window)return a=u(h,"cancel"),o=function(T){return window[p](T)}});var c=new Date().getTime();function d(h){var p=new Date().getTime(),v=Math.max(0,16-(p-c)),T=setTimeout(h,v);return c=p,T}l=function(p){return o(p)},l.cancel=function(h){window[a]&&typeof window[a]=="function"&&window[a](h)};var f=l;t.default=f,e.exports=t.default}(ft,ft.exports)),ft.exports}var W={},di;function Sc(){if(di)return W;di=1;var e=Sn();W.__esModule=!0,W.default=W.animationEnd=W.animationDelay=W.animationTiming=W.animationDuration=W.animationName=W.transitionEnd=W.transitionDuration=W.transitionDelay=W.transitionTiming=W.transitionProperty=W.transform=void 0;var t=e(cs()),n="transform";W.transform=n;var i,s,a;W.animationEnd=a,W.transitionEnd=s;var o,l,u,c;W.transitionDelay=c,W.transitionTiming=u,W.transitionDuration=l,W.transitionProperty=o;var d,f,h,p;if(W.animationDelay=p,W.animationTiming=h,W.animationDuration=f,W.animationName=d,t.default){var v=k();i=v.prefix,W.transitionEnd=s=v.transitionEnd,W.animationEnd=a=v.animationEnd,W.transform=n=i+"-"+n,W.transitionProperty=o=i+"-transition-property",W.transitionDuration=l=i+"-transition-duration",W.transitionDelay=c=i+"-transition-delay",W.transitionTiming=u=i+"-transition-timing-function",W.animationName=d=i+"-animation-name",W.animationDuration=f=i+"-animation-duration",W.animationTiming=h=i+"-animation-delay",W.animationDelay=p=i+"-animation-timing-function"}var T={transform:n,end:s,property:o,timing:u,delay:c,duration:l};W.default=T;function k(){for(var C=document.createElement("div").style,_={O:function($){return"o"+$.toLowerCase()},Moz:function($){return $.toLowerCase()},Webkit:function($){return"webkit"+$},ms:function($){return"MS"+$}},j=Object.keys(_),S,x,M="",N=0;N<j.length;N++){var w=j[N];if(w+"TransitionProperty"in C){M="-"+w.toLowerCase(),S=_[w]("TransitionEnd"),x=_[w]("AnimationEnd");break}}return!S&&"transitionProperty"in C&&(S="transitionend"),!x&&"animationName"in C&&(x="animationend"),C=null,{animationEnd:x,transitionEnd:S,prefix:M}}return W}var De={},hi;function us(){if(hi)return De;hi=1,De.__esModule=!0,De.nameShape=void 0,De.transitionTimeout=s;var e=et();i(e);var t=Dt(),n=i(t);function i(a){return a&&a.__esModule?a:{default:a}}function s(a){var o="transition"+a+"Timeout",l="transition"+a;return function(u){if(u[l]){if(u[o]==null)return new Error(o+" wasn't supplied to CSSTransitionGroup: this can cause unreliable animations and won't be supported in a future version of React. See https://fb.me/react-animation-transition-group-timeout for more information.");if(typeof u[o]!="number")return new Error(o+" must be a number (in milliseconds)")}return null}}return De.nameShape=n.default.oneOfType([n.default.string,n.default.shape({enter:n.default.string,leave:n.default.string,active:n.default.string}),n.default.shape({enter:n.default.string,enterActive:n.default.string,leave:n.default.string,leaveActive:n.default.string,appear:n.default.string,appearActive:n.default.string})]),De}var fi;function Mc(){return fi||(fi=1,function(e,t){t.__esModule=!0;var n=Object.assign||function(N){for(var w=1;w<arguments.length;w++){var A=arguments[w];for(var $ in A)Object.prototype.hasOwnProperty.call(A,$)&&(N[$]=A[$])}return N},i=Cc(),s=k(i),a=jc(),o=k(a),l=Tc(),u=k(l),c=Sc(),d=et(),f=k(d),h=Dt(),p=k(h),v=Mi(),T=us();function k(N){return N&&N.__esModule?N:{default:N}}function C(N,w){if(!(N instanceof w))throw new TypeError("Cannot call a class as a function")}function _(N,w){if(!N)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return w&&(typeof w=="object"||typeof w=="function")?w:N}function j(N,w){if(typeof w!="function"&&w!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof w);N.prototype=Object.create(w&&w.prototype,{constructor:{value:N,enumerable:!1,writable:!0,configurable:!0}}),w&&(Object.setPrototypeOf?Object.setPrototypeOf(N,w):N.__proto__=w)}var S=[];c.transitionEnd&&S.push(c.transitionEnd),c.animationEnd&&S.push(c.animationEnd);function x(N,w){return S.length?S.forEach(function(A){return N.addEventListener(A,w,!1)}):setTimeout(w,0),function(){S.length&&S.forEach(function(A){return N.removeEventListener(A,w,!1)})}}p.default.node,T.nameShape.isRequired,p.default.bool,p.default.bool,p.default.bool,p.default.number,p.default.number,p.default.number;var M=function(N){j(w,N);function w(A,$){C(this,w);var P=_(this,N.call(this,A,$));return P.componentWillAppear=function(U){P.props.appear?P.transition("appear",U,P.props.appearTimeout):U()},P.componentWillEnter=function(U){P.props.enter?P.transition("enter",U,P.props.enterTimeout):U()},P.componentWillLeave=function(U){P.props.leave?P.transition("leave",U,P.props.leaveTimeout):U()},P.classNameAndNodeQueue=[],P.transitionTimeouts=[],P}return w.prototype.componentWillUnmount=function(){this.unmounted=!0,this.timeout&&clearTimeout(this.timeout),this.transitionTimeouts.forEach(function($){clearTimeout($)}),this.classNameAndNodeQueue.length=0},w.prototype.transition=function($,P,U){var I=(0,v.findDOMNode)(this);if(!I){P&&P();return}var m=this.props.name[$]||this.props.name+"-"+$,b=this.props.name[$+"Active"]||m+"-active",g=null,E=void 0;(0,s.default)(I,m),this.queueClassAndNode(b,I);var R=function(O){O&&O.target!==I||(clearTimeout(g),E&&E(),(0,o.default)(I,m),(0,o.default)(I,b),E&&E(),P&&P())};U?(g=setTimeout(R,U),this.transitionTimeouts.push(g)):c.transitionEnd&&(E=x(I,R))},w.prototype.queueClassAndNode=function($,P){var U=this;this.classNameAndNodeQueue.push({className:$,node:P}),this.rafHandle||(this.rafHandle=(0,u.default)(function(){return U.flushClassNameAndNodeQueue()}))},w.prototype.flushClassNameAndNodeQueue=function(){this.unmounted||this.classNameAndNodeQueue.forEach(function($){$.node.scrollTop,(0,s.default)($.node,$.className)}),this.classNameAndNodeQueue.length=0,this.rafHandle=null},w.prototype.render=function(){var $=n({},this.props);return delete $.name,delete $.appear,delete $.enter,delete $.leave,delete $.appearTimeout,delete $.enterTimeout,delete $.leaveTimeout,delete $.children,f.default.cloneElement(f.default.Children.only(this.props.children),$)},w}(f.default.Component);M.displayName="CSSTransitionGroupChild",M.propTypes={},t.default=M,e.exports=t.default}(ut,ut.exports)),ut.exports}var pi;function kc(){return pi||(pi=1,function(e,t){t.__esModule=!0;var n=Object.assign||function(_){for(var j=1;j<arguments.length;j++){var S=arguments[j];for(var x in S)Object.prototype.hasOwnProperty.call(S,x)&&(_[x]=S[x])}return _},i=et(),s=h(i),a=Dt(),o=h(a),l=ls(),u=h(l),c=Mc(),d=h(c),f=us();function h(_){return _&&_.__esModule?_:{default:_}}function p(_,j){if(!(_ instanceof j))throw new TypeError("Cannot call a class as a function")}function v(_,j){if(!_)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return j&&(typeof j=="object"||typeof j=="function")?j:_}function T(_,j){if(typeof j!="function"&&j!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof j);_.prototype=Object.create(j&&j.prototype,{constructor:{value:_,enumerable:!1,writable:!0,configurable:!0}}),j&&(Object.setPrototypeOf?Object.setPrototypeOf(_,j):_.__proto__=j)}f.nameShape.isRequired,o.default.bool,o.default.bool,o.default.bool,(0,f.transitionTimeout)("Appear"),(0,f.transitionTimeout)("Enter"),(0,f.transitionTimeout)("Leave");var k={transitionAppear:!1,transitionEnter:!0,transitionLeave:!0},C=function(_){T(j,_);function j(){var S,x,M;p(this,j);for(var N=arguments.length,w=Array(N),A=0;A<N;A++)w[A]=arguments[A];return M=(S=(x=v(this,_.call.apply(_,[this].concat(w))),x),x._wrapChild=function($){return s.default.createElement(d.default,{name:x.props.transitionName,appear:x.props.transitionAppear,enter:x.props.transitionEnter,leave:x.props.transitionLeave,appearTimeout:x.props.transitionAppearTimeout,enterTimeout:x.props.transitionEnterTimeout,leaveTimeout:x.props.transitionLeaveTimeout},$)},S),v(x,M)}return j.prototype.render=function(){return s.default.createElement(u.default,n({},this.props,{childFactory:this._wrapChild}))},j}(s.default.Component);C.displayName="CSSTransitionGroup",C.propTypes={},C.defaultProps=k,t.default=C,e.exports=t.default}(lt,lt.exports)),lt.exports}var Qt,mi;function Ic(){if(mi)return Qt;mi=1;var e=kc(),t=s(e),n=ls(),i=s(n);function s(a){return a&&a.__esModule?a:{default:a}}return Qt={TransitionGroup:i.default,CSSTransitionGroup:t.default},Qt}var Ec=Ic();const $c=e=>e.enableLegacyTransitions?X.createElement(Ec.TransitionGroup,{component:e.component,className:e.className,transform:e.transform},e.children):X.createElement("g",{className:e.className,transform:e.transform},e.children),Dc=15,gi={title:{textAnchor:"start",x:40},attribute:{x:40,dy:"1.2em"}},Lc=({nodeDatum:e,toggleNode:t,onNodeClick:n,onNodeMouseOver:i,onNodeMouseOut:s})=>X.createElement(X.Fragment,null,X.createElement("circle",{r:Dc,onClick:a=>{t(),n(a)},onMouseOver:i,onMouseOut:s}),X.createElement("g",{className:"rd3t-label"},X.createElement("text",Object.assign({className:"rd3t-label__title"},gi.title),e.name),X.createElement("text",{className:"rd3t-label__attributes"},e.attributes&&Object.entries(e.attributes).map(([a,o],l)=>X.createElement("tspan",Object.assign({key:`${a}-${l}`},gi.attribute),a,": ",typeof o=="boolean"?o.toString():o)))));class Ac extends X.Component{constructor(){super(...arguments),this.nodeRef=null,this.state={transform:this.setTransform(this.props.position,this.props.parent,this.props.orientation,!0),initialStyle:{opacity:0},wasClicked:!1},this.shouldNodeTransform=(t,n,i,s)=>n.subscriptions!==t.subscriptions||n.position.x!==t.position.x||n.position.y!==t.position.y||n.orientation!==t.orientation||s.wasClicked!==i.wasClicked,this.renderNodeElement=()=>{const{data:t,hierarchyPointNode:n,renderCustomNodeElement:i}=this.props,s=typeof i=="function"?i:Lc,a={hierarchyPointNode:n,nodeDatum:t,toggleNode:this.handleNodeToggle,onNodeClick:this.handleOnClick,onNodeMouseOver:this.handleOnMouseOver,onNodeMouseOut:this.handleOnMouseOut,addChildren:this.handleAddChildren};return s(a)},this.handleNodeToggle=()=>{this.setState({wasClicked:!0}),this.props.onNodeToggle(this.props.data.__rd3t.id)},this.handleOnClick=t=>{this.setState({wasClicked:!0}),this.props.onNodeClick(this.props.hierarchyPointNode,t)},this.handleOnMouseOver=t=>{this.props.onNodeMouseOver(this.props.hierarchyPointNode,t)},this.handleOnMouseOut=t=>{this.props.onNodeMouseOut(this.props.hierarchyPointNode,t)},this.handleAddChildren=t=>{this.props.handleAddChildrenToNode(this.props.data.__rd3t.id,t)}}componentDidMount(){this.commitTransform()}componentDidUpdate(){this.state.wasClicked&&(this.props.centerNode(this.props.hierarchyPointNode),this.setState({wasClicked:!1})),this.commitTransform()}shouldComponentUpdate(t,n){return this.shouldNodeTransform(this.props,t,this.state,n)}setTransform(t,n,i,s=!1){if(s){const a=n!=null,o=a?n.x:0,l=a?n.y:0;return i==="horizontal"?`translate(${l},${o})`:`translate(${o},${l})`}return i==="horizontal"?`translate(${t.y},${t.x})`:`translate(${t.x},${t.y})`}applyTransform(t,n,i=1,s=()=>{}){this.props.enableLegacyTransitions?ne(this.nodeRef).transition().duration(n).attr("transform",t).style("opacity",i).on("end",s):(ne(this.nodeRef).attr("transform",t).style("opacity",i),s())}commitTransform(){const{orientation:t,transitionDuration:n,position:i,parent:s}=this.props,a=this.setTransform(i,s,t);this.applyTransform(a,n)}componentWillLeave(t){const{orientation:n,transitionDuration:i,position:s,parent:a}=this.props,o=this.setTransform(s,a,n,!0);this.applyTransform(o,i,0,t)}render(){const{data:t,nodeClassName:n}=this.props;return X.createElement("g",{id:t.__rd3t.id,ref:i=>{this.nodeRef=i},style:this.state.initialStyle,className:[t.children&&t.children.length>0?"rd3t-node":"rd3t-leaf-node",n].join(" ").trim(),transform:this.state.transform},this.renderNodeElement())}}var fn=Math.PI,pn=2*fn,ke=1e-6,Rc=pn-ke;function mn(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function ds(){return new mn}mn.prototype=ds.prototype={constructor:mn,moveTo:function(e,t){this._+="M"+(this._x0=this._x1=+e)+","+(this._y0=this._y1=+t)},closePath:function(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(e,t){this._+="L"+(this._x1=+e)+","+(this._y1=+t)},quadraticCurveTo:function(e,t,n,i){this._+="Q"+ +e+","+ +t+","+(this._x1=+n)+","+(this._y1=+i)},bezierCurveTo:function(e,t,n,i,s,a){this._+="C"+ +e+","+ +t+","+ +n+","+ +i+","+(this._x1=+s)+","+(this._y1=+a)},arcTo:function(e,t,n,i,s){e=+e,t=+t,n=+n,i=+i,s=+s;var a=this._x1,o=this._y1,l=n-e,u=i-t,c=a-e,d=o-t,f=c*c+d*d;if(s<0)throw new Error("negative radius: "+s);if(this._x1===null)this._+="M"+(this._x1=e)+","+(this._y1=t);else if(f>ke)if(!(Math.abs(d*l-u*c)>ke)||!s)this._+="L"+(this._x1=e)+","+(this._y1=t);else{var h=n-a,p=i-o,v=l*l+u*u,T=h*h+p*p,k=Math.sqrt(v),C=Math.sqrt(f),_=s*Math.tan((fn-Math.acos((v+f-T)/(2*k*C)))/2),j=_/C,S=_/k;Math.abs(j-1)>ke&&(this._+="L"+(e+j*c)+","+(t+j*d)),this._+="A"+s+","+s+",0,0,"+ +(d*h>c*p)+","+(this._x1=e+S*l)+","+(this._y1=t+S*u)}},arc:function(e,t,n,i,s,a){e=+e,t=+t,n=+n,a=!!a;var o=n*Math.cos(i),l=n*Math.sin(i),u=e+o,c=t+l,d=1^a,f=a?i-s:s-i;if(n<0)throw new Error("negative radius: "+n);this._x1===null?this._+="M"+u+","+c:(Math.abs(this._x1-u)>ke||Math.abs(this._y1-c)>ke)&&(this._+="L"+u+","+c),n&&(f<0&&(f=f%pn+pn),f>Rc?this._+="A"+n+","+n+",0,1,"+d+","+(e-o)+","+(t-l)+"A"+n+","+n+",0,1,"+d+","+(this._x1=u)+","+(this._y1=c):f>ke&&(this._+="A"+n+","+n+",0,"+ +(f>=fn)+","+d+","+(this._x1=e+n*Math.cos(s))+","+(this._y1=t+n*Math.sin(s))))},rect:function(e,t,n,i){this._+="M"+(this._x0=this._x1=+e)+","+(this._y0=this._y1=+t)+"h"+ +n+"v"+ +i+"h"+-n+"Z"},toString:function(){return this._}};function xi(e){return function(){return e}}function Vc(e){return e[0]}function Oc(e){return e[1]}var Fc=Array.prototype.slice;function Bc(e){return e.source}function Pc(e){return e.target}function hs(e){var t=Bc,n=Pc,i=Vc,s=Oc,a=null;function o(){var l,u=Fc.call(arguments),c=t.apply(this,u),d=n.apply(this,u);if(a||(a=l=ds()),e(a,+i.apply(this,(u[0]=c,u)),+s.apply(this,u),+i.apply(this,(u[0]=d,u)),+s.apply(this,u)),l)return a=null,l+""||null}return o.source=function(l){return arguments.length?(t=l,o):t},o.target=function(l){return arguments.length?(n=l,o):n},o.x=function(l){return arguments.length?(i=typeof l=="function"?l:xi(+l),o):i},o.y=function(l){return arguments.length?(s=typeof l=="function"?l:xi(+l),o):s},o.context=function(l){return arguments.length?(a=l??null,o):a},o}function zc(e,t,n,i,s){e.moveTo(t,n),e.bezierCurveTo(t=(t+i)/2,n,t,s,i,s)}function qc(e,t,n,i,s){e.moveTo(t,n),e.bezierCurveTo(t,n=(n+s)/2,i,n,i,s)}function Wc(){return hs(zc)}function Hc(){return hs(qc)}class Uc extends X.PureComponent{constructor(){super(...arguments),this.linkRef=null,this.state={initialStyle:{opacity:0}},this.handleOnClick=t=>{this.props.onClick(this.props.linkData.source,this.props.linkData.target,t)},this.handleOnMouseOver=t=>{this.props.onMouseOver(this.props.linkData.source,this.props.linkData.target,t)},this.handleOnMouseOut=t=>{this.props.onMouseOut(this.props.linkData.source,this.props.linkData.target,t)}}componentDidMount(){this.applyOpacity(1,this.props.transitionDuration)}componentWillLeave(t){this.applyOpacity(0,this.props.transitionDuration,t)}applyOpacity(t,n,i=()=>{}){this.props.enableLegacyTransitions?ne(this.linkRef).transition().duration(n).style("opacity",t).on("end",i):(ne(this.linkRef).style("opacity",t),i())}drawStepPath(t,n){const{source:i,target:s}=t,a=s.y-i.y;return n==="horizontal"?`M${i.y},${i.x} H${i.y+a/2} V${s.x} H${s.y}`:`M${i.x},${i.y} V${i.y+a/2} H${s.x} V${s.y}`}drawDiagonalPath(t,n){const{source:i,target:s}=t;return n==="horizontal"?Wc()({source:[i.y,i.x],target:[s.y,s.x]}):Hc()({source:[i.x,i.y],target:[s.x,s.y]})}drawStraightPath(t,n){const{source:i,target:s}=t;return n==="horizontal"?`M${i.y},${i.x}L${s.y},${s.x}`:`M${i.x},${i.y}L${s.x},${s.y}`}drawElbowPath(t,n){return n==="horizontal"?`M${t.source.y},${t.source.x}V${t.target.x}H${t.target.y}`:`M${t.source.x},${t.source.y}V${t.target.y}H${t.target.x}`}drawPath(){const{linkData:t,orientation:n,pathFunc:i}=this.props;return typeof i=="function"?i(t,n):i==="elbow"?this.drawElbowPath(t,n):i==="straight"?this.drawStraightPath(t,n):i==="step"?this.drawStepPath(t,n):this.drawDiagonalPath(t,n)}getClassNames(){const{linkData:t,orientation:n,pathClassFunc:i}=this.props,s=["rd3t-link"];return typeof i=="function"&&s.push(i(t,n)),s.join(" ").trim()}render(){const{linkData:t}=this.props;return X.createElement("path",{ref:n=>{this.linkRef=n},style:Object.assign({},this.state.initialStyle),className:this.getClassNames(),d:this.drawPath(),onClick:this.handleOnClick,onMouseOver:this.handleOnMouseOver,onMouseOut:this.handleOnMouseOut,"data-source-id":t.source.id,"data-target-id":t.target.id})}}const Gc=`
/* Tree */
.rd3t-tree-container {
  width: 100%;
  height: 100%;
}

.rd3t-grabbable {
  cursor: move; /* fallback if grab cursor is unsupported */
  cursor: grab;
  cursor: -moz-grab;
  cursor: -webkit-grab;
}
.rd3t-grabbable:active {
    cursor: grabbing;
    cursor: -moz-grabbing;
    cursor: -webkit-grabbing;
}

/* Node */
.rd3t-node {
  cursor: pointer;
  fill: #777;
  stroke: #000;
  stroke-width: 2;
}

.rd3t-leaf-node {
  cursor: pointer;
  fill: transparent;
  stroke: #000;
  stroke-width: 1;
}

.rd3t-label__title {
  fill: #000;
  stroke: none;
  font-weight: bolder;
}

.rd3t-label__attributes {
  fill: #777;
  stroke: none;
  font-weight: bolder;
  font-size: smaller;
}

/* Link */
.rd3t-link {
  fill: none;
  stroke: #000;
}
`;class ae extends X.Component{constructor(){super(...arguments),this.state={dataRef:this.props.data,data:ae.assignInternalProperties(ee(this.props.data)),d3:ae.calculateD3Geometry(this.props),isTransitioning:!1,isInitialRenderForDataset:!0,dataKey:this.props.dataKey},this.internalState={targetNode:null,isTransitioning:!1},this.svgInstanceRef=`rd3t-svg-${Wt()}`,this.gInstanceRef=`rd3t-g-${Wt()}`,this.handleNodeToggle=t=>{const n=ee(this.state.data),s=this.findNodesById(t,n,[])[0];this.props.collapsible&&!this.state.isTransitioning&&(s.__rd3t.collapsed?(ae.expandNode(s),this.props.shouldCollapseNeighborNodes&&this.collapseNeighborNodes(s,n)):ae.collapseNode(s),this.props.enableLegacyTransitions?(this.setState({data:n,isTransitioning:!0}),setTimeout(()=>this.setState({isTransitioning:!1}),this.props.transitionDuration+10)):this.setState({data:n}),this.internalState.targetNode=s)},this.handleAddChildrenToNode=(t,n)=>{const i=ee(this.state.data),s=this.findNodesById(t,i,[]);if(s.length>0){const a=s[0],o=a.__rd3t.depth,l=ee(n).map(u=>ae.assignInternalProperties([u],o+1));a.children.push(...l.flat()),this.setState({data:i})}},this.handleOnNodeClickCb=(t,n)=>{const{onNodeClick:i}=this.props;i&&typeof i=="function"&&(n.persist(),i(ee(t),n))},this.handleOnLinkClickCb=(t,n,i)=>{const{onLinkClick:s}=this.props;s&&typeof s=="function"&&(i.persist(),s(ee(t),ee(n),i))},this.handleOnNodeMouseOverCb=(t,n)=>{const{onNodeMouseOver:i}=this.props;i&&typeof i=="function"&&(n.persist(),i(ee(t),n))},this.handleOnLinkMouseOverCb=(t,n,i)=>{const{onLinkMouseOver:s}=this.props;s&&typeof s=="function"&&(i.persist(),s(ee(t),ee(n),i))},this.handleOnNodeMouseOutCb=(t,n)=>{const{onNodeMouseOut:i}=this.props;i&&typeof i=="function"&&(n.persist(),i(ee(t),n))},this.handleOnLinkMouseOutCb=(t,n,i)=>{const{onLinkMouseOut:s}=this.props;s&&typeof s=="function"&&(i.persist(),s(ee(t),ee(n),i))},this.centerNode=t=>{const{dimensions:n,orientation:i,zoom:s,centeringTransitionDuration:a}=this.props;if(n){const o=ne(`.${this.gInstanceRef}`),l=ne(`.${this.svgInstanceRef}`),u=this.state.d3.scale;let c,d;i==="horizontal"?(d=-t.x*u+n.height/2,c=-t.y*u+n.width/2):(c=-t.x*u+n.width/2,d=-t.y*u+n.height/2),o.transition().duration(a).attr("transform","translate("+c+","+d+")scale("+u+")"),l.call(Pt().transform,St.translate(c,d).scale(s))}},this.getNodeClassName=(t,n)=>{const{rootNodeClassName:i,branchNodeClassName:s,leafNodeClassName:a}=this.props;return t!=null?n.children?s:a:i}}static getDerivedStateFromProps(t,n){let i=null;const s=!t.dataKey||n.dataKey!==t.dataKey;t.data!==n.dataRef&&s&&(i={dataRef:t.data,data:ae.assignInternalProperties(ee(t.data)),isInitialRenderForDataset:!0,dataKey:t.dataKey});const a=ae.calculateD3Geometry(t);return Ge(a,n.d3)||(i=i||{},i.d3=a),i}componentDidMount(){this.bindZoomListener(this.props),this.setState({isInitialRenderForDataset:!1})}componentDidUpdate(t){this.props.data!==t.data&&this.setState({isInitialRenderForDataset:!1}),(!Ge(this.props.translate,t.translate)||!Ge(this.props.scaleExtent,t.scaleExtent)||this.props.zoomable!==t.zoomable||this.props.draggable!==t.draggable||this.props.zoom!==t.zoom||this.props.enableLegacyTransitions!==t.enableLegacyTransitions)&&this.bindZoomListener(this.props),typeof this.props.onUpdate=="function"&&this.props.onUpdate({node:this.internalState.targetNode?ee(this.internalState.targetNode):null,zoom:this.state.d3.scale,translate:this.state.d3.translate}),this.internalState.targetNode=null}setInitialTreeDepth(t,n){t.forEach(i=>{i.data.__rd3t.collapsed=i.depth>=n})}bindZoomListener(t){const{zoomable:n,scaleExtent:i,translate:s,zoom:a,onUpdate:o,hasInteractiveNodes:l}=t,u=ne(`.${this.svgInstanceRef}`),c=ne(`.${this.gInstanceRef}`);u.call(Pt().transform,St.translate(s.x,s.y).scale(a)),u.call(Pt().scaleExtent(n?[i.min,i.max]:[a,a]).filter(d=>l?d.target.classList.contains(this.svgInstanceRef)||d.target.classList.contains(this.gInstanceRef)||d.shiftKey:!0).on("zoom",d=>{!this.props.draggable&&["mousemove","touchmove","dblclick"].includes(d.sourceEvent.type)||(c.attr("transform",d.transform),typeof o=="function"&&(o({node:null,zoom:d.transform.k,translate:{x:d.transform.x,y:d.transform.y}}),this.state.d3.scale=d.transform.k,this.state.d3.translate={x:d.transform.x,y:d.transform.y}))}))}static assignInternalProperties(t,n=0){return(Array.isArray(t)?t:[t]).map(s=>{const a=s;return a.__rd3t={id:null,depth:null,collapsed:!1},a.__rd3t.id=Wt(),a.__rd3t.depth=n,a.children&&a.children.length>0&&(a.children=ae.assignInternalProperties(a.children,n+1)),a})}findNodesById(t,n,i){return i.length>0||(i=i.concat(n.filter(s=>s.__rd3t.id===t)),n.forEach(s=>{s.children&&s.children.length>0&&(i=this.findNodesById(t,s.children,i))})),i}findNodesAtDepth(t,n,i){return i=i.concat(n.filter(s=>s.__rd3t.depth===t)),n.forEach(s=>{s.children&&s.children.length>0&&(i=this.findNodesAtDepth(t,s.children,i))}),i}static collapseNode(t){t.__rd3t.collapsed=!0,t.children&&t.children.length>0&&t.children.forEach(n=>{ae.collapseNode(n)})}static expandNode(t){t.__rd3t.collapsed=!1}collapseNeighborNodes(t,n){this.findNodesAtDepth(t.__rd3t.depth,n,[]).filter(s=>s.__rd3t.id!==t.__rd3t.id).forEach(s=>ae.collapseNode(s))}generateTree(){const{initialDepth:t,depthFactor:n,separation:i,nodeSize:s,orientation:a}=this.props,{isInitialRenderForDataset:o}=this.state,u=Dr().nodeSize(a==="horizontal"?[s.y,s.x]:[s.x,s.y]).separation((f,h)=>f.parent.data.__rd3t.id===h.parent.data.__rd3t.id?i.siblings:i.nonSiblings)(vn(this.state.data[0],f=>f.__rd3t.collapsed?null:f.children));let c=u.descendants();const d=u.links();return t!==void 0&&o&&this.setInitialTreeDepth(c,t),n&&c.forEach(f=>{f.y=f.depth*n}),{nodes:c,links:d}}static calculateD3Geometry(t){let n;return t.zoom>t.scaleExtent.max?n=t.scaleExtent.max:t.zoom<t.scaleExtent.min?n=t.scaleExtent.min:n=t.zoom,{translate:t.translate,scale:n}}render(){const{nodes:t,links:n}=this.generateTree(),{renderCustomNodeElement:i,orientation:s,pathFunc:a,transitionDuration:o,nodeSize:l,depthFactor:u,initialDepth:c,separation:d,enableLegacyTransitions:f,svgClassName:h,pathClassFunc:p}=this.props,{translate:v,scale:T}=this.state.d3,k=Object.assign(Object.assign(Object.assign({},l),d),{depthFactor:u,initialDepth:c});return X.createElement("div",{className:"rd3t-tree-container rd3t-grabbable"},X.createElement("style",null,Gc),X.createElement("svg",{className:`rd3t-svg ${this.svgInstanceRef} ${h}`,width:"100%",height:"100%"},X.createElement($c,{enableLegacyTransitions:f,component:"g",className:`rd3t-g ${this.gInstanceRef}`,transform:`translate(${v.x},${v.y}) scale(${T})`},n.map((C,_)=>X.createElement(Uc,{key:"link-"+_,orientation:s,pathFunc:a,pathClassFunc:p,linkData:C,onClick:this.handleOnLinkClickCb,onMouseOver:this.handleOnLinkMouseOverCb,onMouseOut:this.handleOnLinkMouseOutCb,enableLegacyTransitions:f,transitionDuration:o})),t.map((C,_)=>{const{data:j,x:S,y:x,parent:M}=C;return X.createElement(Ac,{key:"node-"+_,data:j,position:{x:S,y:x},hierarchyPointNode:C,parent:M,nodeClassName:this.getNodeClassName(M,j),renderCustomNodeElement:i,nodeSize:l,orientation:s,enableLegacyTransitions:f,transitionDuration:o,onNodeToggle:this.handleNodeToggle,onNodeClick:this.handleOnNodeClickCb,onNodeMouseOver:this.handleOnNodeMouseOverCb,onNodeMouseOut:this.handleOnNodeMouseOutCb,handleAddChildrenToNode:this.handleAddChildrenToNode,subscriptions:k,centerNode:this.centerNode})}))))}}ae.defaultProps={onNodeClick:void 0,onNodeMouseOver:void 0,onNodeMouseOut:void 0,onLinkClick:void 0,onLinkMouseOver:void 0,onLinkMouseOut:void 0,onUpdate:void 0,orientation:"horizontal",translate:{x:0,y:0},pathFunc:"diagonal",pathClassFunc:void 0,transitionDuration:500,depthFactor:void 0,collapsible:!0,initialDepth:void 0,zoomable:!0,draggable:!0,zoom:1,scaleExtent:{min:.1,max:1},nodeSize:{x:140,y:140},separation:{siblings:1,nonSiblings:2},shouldCollapseNeighborNodes:!1,svgClassName:"",rootNodeClassName:"",branchNodeClassName:"",leafNodeClassName:"",renderCustomNodeElement:void 0,enableLegacyTransitions:!1,hasInteractiveNodes:!1,dimensions:void 0,centeringTransitionDuration:800,dataKey:void 0};function Ce(e,t,n){const i={};let s=e;const a=t.fields;for(let o=0;o<a.length;o++){const l=a[o];try{if(l.type.kind==="simple")if(l.type.type==="address")l.type.optional?i[l.name]=s.loadMaybeAddress():i[l.name]=s.loadAddress();else if(l.type.type==="bool")i[l.name]=s.loadUintBig(1);else if(l.type.type==="uint"&&typeof l.type.format=="number")i[l.name]=s.loadUintBig(l.type.format);else if(l.type.type==="int"&&typeof l.type.format=="number")i[l.name]=s.loadIntBig(l.type.format);else if(l.type.type==="uint"&&typeof l.type.format=="string")l.type.format==="varuint16"?i[l.name]=s.loadVarUintBig(4):l.type.format==="varuint32"?i[l.name]=s.loadVarUintBig(8):l.type.format==="coins"&&(i[l.name]=s.loadCoins());else if(l.type.type==="int"&&typeof l.type.format=="string")l.type.format==="varint16"?i[l.name]=s.loadVarIntBig(4):l.type.format==="varint32"&&(i[l.name]=s.loadVarUintBig(8));else if(l.type.type==="cell"||l.type.type==="string"||l.type.type==="builder")l.type.optional?s.loadUint(1)&&(i[l.name]=s.loadRef()):i[l.name]=s.loadRef();else if(l.type.format==="ref")i[l.name]=s.loadRef();else if(l.type.type==="slice"&&l.type.format==="remainder")i[l.name]=s.asCell().asSlice();else{const u=l.type.type;if(l.type.optional){if(s.loadUint(1)){const d=n.find(f=>f.name===u);d&&(i[l.name]={$:"sub-object",value:Ce(s,d,n)})}else i[l.name]=null;continue}else{const c=n.find(d=>d.name===u);if(c){i[l.name]={$:"sub-object",value:Ce(s,c,n)};continue}}console.log("skip",l);return}}catch(u){if(u instanceof Error&&u.message.includes("Invalid address: 3")){s.loadUint(1),o--;continue}if(u instanceof Error&&u.message.includes("is out of bounds")&&s.remainingRefs>0){console.log("retry"),o--,s=s.loadRef().beginParse();continue}console.error(`Error while parsing ${l.name} of ${t.name} at index ${o}: ${u}`)}}return i}const Jc="_container_ti76x_1",Kc="_field_ti76x_7",Xc="_fieldHeader_ti76x_14",Yc="_fieldName_ti76x_21",Qc="_fieldValue_ti76x_30",Zc="_stringValue_ti76x_39",eu="_numberValue_ti76x_50",tu="_booleanTrue_ti76x_56",nu="_booleanFalse_ti76x_62",iu="_nullValue_ti76x_68",su="_unknownValue_ti76x_74",ru="_errorText_ti76x_79",au="_cellValue_ti76x_86",ou="_sliceValue_ti76x_87",lu="_cellLabel_ti76x_94",cu="_sliceLabel_ti76x_95",uu="_subObject_ti76x_102",du="_objectValue_ti76x_109",hu="_arrayValue_ti76x_117",fu="_arrayLabel_ti76x_124",pu="_arrayItem_ti76x_132",mu="_arrayIndex_ti76x_140",gu="_arrayItemValue_ti76x_147",xu="_diffContainer_ti76x_173",_u="_diffValue_ti76x_179",vu="_diffOldValue_ti76x_185",yu="_diffNewValue_ti76x_194",bu="_unchanged_ti76x_233",J={container:Jc,field:Kc,fieldHeader:Xc,fieldName:Yc,fieldValue:Qc,stringValue:Zc,numberValue:eu,booleanTrue:tu,booleanFalse:nu,nullValue:iu,unknownValue:su,errorText:ru,cellValue:au,sliceValue:ou,cellLabel:lu,sliceLabel:cu,subObject:uu,objectValue:du,arrayValue:hu,arrayLabel:fu,arrayItem:pu,arrayIndex:mu,arrayItemValue:gu,diffContainer:xu,diffValue:_u,diffOldValue:vu,diffNewValue:yu,unchanged:bu};function Ze({data:e,dataBefore:t,contracts:n,depth:i=0,maxDepth:s=10}){if(i>s)return r.jsx("span",{className:J.errorText,children:"Max depth reached"});const a=t!==void 0;return r.jsx("div",{className:J.container,children:Object.entries(e).map(([o,l])=>{const u=t?.[o],c=a&&!gn(u,l);return r.jsxs("div",{className:J.field,children:[r.jsx("div",{className:J.fieldHeader,children:r.jsxs("span",{className:J.fieldName,children:[o,":"]})}),r.jsx("div",{className:J.fieldValue,children:a&&c?r.jsxs("div",{className:J.diffValue,children:[r.jsx("div",{className:J.diffOldValue,children:r.jsx(yt,{value:u,contracts:n,depth:i,maxDepth:s})}),r.jsx("div",{className:J.diffNewValue,children:r.jsx(yt,{value:l,contracts:n,depth:i,maxDepth:s})})]}):r.jsx("div",{className:a?J.unchanged:void 0,children:r.jsx(yt,{value:l,contracts:n,depth:i,maxDepth:s})})})]},o)})})}function yt({value:e,contracts:t,depth:n,maxDepth:i}){if(e instanceof G.Address)return r.jsx(pe,{address:e.toString(),contracts:t});if(e instanceof G.Cell)return r.jsx("div",{className:J.cellValue,children:r.jsx(Ne,{title:"cell hex",content:e.toBoc().toString("hex")})});if(e instanceof G.Slice)return r.jsx("div",{className:J.sliceValue,children:r.jsx(Ne,{title:"slice hex",content:e.asCell().toBoc().toString("hex")})});if(typeof e=="bigint")return r.jsx("span",{className:J.numberValue,children:e.toString()});if(typeof e=="number")return r.jsx("span",{className:J.numberValue,children:e.toString()});if(typeof e=="boolean")return r.jsx("span",{className:e?J.booleanTrue:J.booleanFalse,children:e?"true":"false"});if(typeof e=="string")return r.jsxs("span",{className:J.stringValue,children:['"',e,'"']});if(e==null)return r.jsx("span",{className:J.nullValue,children:"null"});if(e&&typeof e=="object"&&"$"in e&&e.$==="sub-object"&&"value"in e&&e.value){const s=e.value;return r.jsx("div",{className:J.subObject,children:r.jsx(Ze,{data:s,contracts:t,depth:n+1,maxDepth:i})})}if(Array.isArray(e))return r.jsxs("div",{className:J.arrayValue,children:[r.jsxs("div",{className:J.arrayLabel,children:["[",e.length," items]"]}),e.map((s,a)=>r.jsxs("div",{className:J.arrayItem,children:[r.jsxs("span",{className:J.arrayIndex,children:["[",a,"]:"]}),r.jsx("div",{className:J.arrayItemValue,children:r.jsx(yt,{value:s,contracts:t,depth:n+1,maxDepth:i})})]},a))]});if(typeof e=="object"&&!Array.isArray(e))try{const s=e;return r.jsx("div",{className:J.objectValue,children:r.jsx(Ze,{data:s,contracts:t,depth:n+1,maxDepth:i})})}catch{return r.jsx("span",{className:J.unknownValue,children:JSON.stringify(e)})}return r.jsx("span",{className:J.unknownValue,children:"something"})}function gn(e,t){if(e===t)return!0;if(e instanceof G.Address&&t instanceof G.Address)return e.toString()===t.toString();if(e instanceof G.Cell&&t instanceof G.Cell)return e.toBoc().toString("hex")===t.toBoc().toString("hex");if(e instanceof G.Slice&&t instanceof G.Slice)return e.asCell().toBoc().toString("hex")===t.asCell().toBoc().toString("hex");if(typeof e=="bigint"&&typeof t=="bigint")return e===t;if(Array.isArray(e)&&Array.isArray(t))return e.length!==t.length?!1:e.every((n,i)=>gn(n,t[i]));if(typeof e=="object"&&typeof t=="object"&&e!==null&&t!==null){const n=e,i=t,s=Object.keys(n),a=Object.keys(i);return s.length!==a.length?!1:s.every(o=>gn(n[o],i[o]))}return!1}function Nu(){const[e,t]=L.useState(null),[n,i]=L.useState(!1),s=L.useRef(null),a=L.useRef(0),o=L.useCallback(()=>{s.current&&(clearTimeout(s.current),s.current=null)},[]),l=L.useCallback((h,p,v)=>{const T={width:window.innerWidth,height:window.innerHeight},k=10,C=[{placement:"right",x:h.right+k,y:h.top+h.height/2-v/2,score:0},{placement:"left",x:h.left-p-k,y:h.top+h.height/2-v/2,score:0},{placement:"bottom",x:h.left+h.width/2-p/2,y:h.bottom+k,score:0},{placement:"top",x:h.left+h.width/2-p/2,y:h.top-v-k,score:0}];C.forEach(x=>{const M=x.x>=k&&x.x+p<=T.width-k,N=x.y>=k&&x.y+v<=T.height-k;M&&N&&(x.score+=100),x.x<k&&(x.score-=(k-x.x)*2),x.x+p>T.width-k&&(x.score-=(x.x+p-T.width+k)*2),x.y<k&&(x.score-=(k-x.y)*2),x.y+v>T.height-k&&(x.score-=(x.y+v-T.height+k)*2);const w=x.x,A=T.width-(x.x+p),$=x.y,P=T.height-(x.y+v);x.score+=Math.min(w,A,$,P)});const _=C.reduce((x,M)=>M.score>x.score?M:x),j=Math.max(k,Math.min(_.x,T.width-p-k)),S=Math.max(k,Math.min(_.y,T.height-v-k));return{x:j,y:S,placement:_.placement}},[]),u=L.useCallback(h=>{o();const p=`tooltip-${++a.current}`;t({...h,id:p})},[o]),c=L.useCallback((h=!1)=>{!h&&n||(o(),s.current=setTimeout(()=>{t(null),i(!1)},0))},[n,o]),d=L.useCallback(()=>{o(),t(null),i(!1)},[o]),f=L.useCallback(h=>{h?(o(),i(!0)):(i(!1),c(!0))},[o,c]);return L.useEffect(()=>()=>{o()},[o]),{tooltip:e,showTooltip:u,hideTooltip:c,forceHideTooltip:d,isTooltipHovered:n,setIsTooltipHovered:f,calculateOptimalPosition:l}}var wu=Mi();const Cu="_tooltip_b2n1m_1",ju="_tooltipVisible_b2n1m_18",Tu="_content_b2n1m_23",Su="_bridge_b2n1m_28",Le={tooltip:Cu,tooltipVisible:ju,content:Tu,bridge:Su};function Mu(e,t,n){switch(n){case"right":return new DOMRect(e.right,Math.min(e.top,t.top)-20,t.left-e.right,Math.max(e.bottom,t.bottom+20)-Math.min(e.top,t.top)+20*2);case"left":return new DOMRect(t.right,Math.min(e.top,t.top)-20,e.left-t.right,Math.max(e.bottom,t.bottom+20)-Math.min(e.top,t.top)+20*2);case"bottom":return new DOMRect(Math.min(e.left,t.left)-20,e.bottom,Math.max(e.right,t.right+20)-Math.min(e.left,t.left)+20*2,t.top-e.bottom);case"top":return new DOMRect(Math.min(e.left,t.left)-20,t.bottom,Math.max(e.right,t.right+20)-Math.min(e.left,t.left)+20*2,e.top-t.bottom)}}function ku({content:e,triggerRect:t,onMouseEnter:n,onMouseLeave:i,onForceHide:s,calculateOptimalPosition:a}){const o=L.useRef(null),l=L.useRef(null),[u,c]=L.useState({x:0,y:0,placement:"right"}),[d,f]=L.useState(!1),[h,p]=L.useState(null);L.useEffect(()=>{if(!o.current)return;const T=o.current.getBoundingClientRect(),k=a(t,T.width??400,T.height??200);c(k);const C=new DOMRect(k.x,k.y,T.width||400,T.height||200),_=Mu(t,C,k.placement);p(_),f(!0)},[t,a]),L.useEffect(()=>{const T=_=>{o.current&&!o.current.contains(_.target)&&l.current&&!l.current.contains(_.target)&&(s?s():i())},k=_=>{_.key==="Escape"&&(s?s():i())},C=()=>{s?s():i()};return document.addEventListener("mousedown",T),document.addEventListener("keydown",k),window.addEventListener("blur",C),()=>{document.removeEventListener("mousedown",T),document.removeEventListener("keydown",k),window.removeEventListener("blur",C)}},[i,s]);const v=r.jsxs(r.Fragment,{children:[h&&r.jsx("div",{ref:l,className:`${Le.bridge} ${Le[`bridge--${u.placement}`]}`,style:{left:h.x,top:h.y,width:h.width,height:h.height},onMouseEnter:n,onMouseLeave:i}),r.jsx("div",{ref:o,className:`${Le.tooltip} ${Le[`tooltip--${u.placement}`]} ${d?Le.tooltipVisible:""}`,style:{left:u.x,top:u.y,pointerEvents:"auto"},onMouseEnter:n,onMouseLeave:i,children:r.jsx("div",{className:Le.content,children:e})})]});return wu.createPortal(v,document.body)}const Iu="_container_1cn0r_1",Eu="_tabsContainer_1cn0r_7",$u="_tab_1cn0r_7",Du="_tabActive_1cn0r_34",Lu="_treeContainer_1cn0r_56",Au="_treeWrapper_1cn0r_63",Ru="_edgeStyle_1cn0r_82",Vu="_edgeStyleWithInit_1cn0r_87",Ou="_edgeStyleBounced_1cn0r_91",Fu="_edgeTextTitle_1cn0r_95",Bu="_edgeText_1cn0r_95",Pu="_edgeTextContent_1cn0r_118",zu="_tooltipContent_1cn0r_180",qu="_tooltipField_1cn0r_186",Wu="_tooltipFieldLabel_1cn0r_192",Hu="_tooltipFieldValue_1cn0r_199",Uu="_tooltipSubValue_1cn0r_208",Gu="_contractStateData_1cn0r_215",Ju="_foreignObjectContainer_1cn0r_223",Ku="_iconSvg_1cn0r_230",Xu="_transactionDetails_1cn0r_241",Yu="_contractDetails_1cn0r_245",Qu="_topText_1cn0r_258",Zu="_bottonText_1cn0r_264",z={container:Iu,tabsContainer:Eu,tab:$u,tabActive:Du,treeContainer:Lu,treeWrapper:Au,edgeStyle:Ru,edgeStyleWithInit:Vu,edgeStyleBounced:Ou,edgeTextTitle:Fu,edgeText:Bu,edgeTextContent:Pu,tooltipContent:zu,tooltipField:qu,tooltipFieldLabel:Wu,tooltipFieldValue:Hu,tooltipSubValue:Uu,contractStateData:Gu,foreignObjectContainer:Ju,iconSvg:Ku,transactionDetails:Xu,contractDetails:Yu,topText:Qu,bottonText:Zu},_i=(e,t)=>{if(!e)return"unknown";const n=e.toString(),i=t.get(n);if(i){const s=i.displayName;if(s!=="Unknown Contract")return s}return n.slice(0,4)+"..."+n.slice(n.length-4)},ed=e=>{if(!e)return"unknown";const t=e.toString();return t.slice(0,6)+"..."+t.slice(t.length-6)},Mt=(e,t)=>e?.types?.find(n=>n.name===`${t}$Data`),fs=e=>{switch(e){case"ExtendedShardedJettonWallet":return"JettonWalletSharded";case"ExtendedShardedJettonMinter":return"JettonMinterSharded";case"ExtendedJettonWallet":return"JettonWallet";case"ExtendedJettonMinter":return"JettonMinter";case"ExtendedLPJettonWallet":return"LPJettonWallet";case"ExtendedLPJettonMinter":return"LPJettonMinter"}return e},td=(e,t)=>{if(!e.meta?.abi){if(e.kind==="treasury")return;for(const[,n]of t){if(!n.meta?.abi)continue;const i=vi(e,n.meta?.abi);if(i)return i}return}return vi(e,e.meta?.abi)},vi=(e,t)=>{if(e.kind==="treasury")return;const n=e.stateInit?.data;if(n){const i=G.Cell.fromHex(n.toBoc().toString("hex")),s=Mt(t,e.displayName);if(s)return Ce(i.asSlice(),s,t.types??[]);const a=fs(e.displayName),o=Mt(t,a);if(o)return Ce(i.asSlice(),o,t.types??[])}},yi=(e,t)=>{if(!(!e||t.kind==="treasury"))try{const n=G.Cell.fromHex(e),i=Mt(t.meta?.abi??void 0,t.displayName);if(i)return Ce(n.asSlice(),i,t.meta?.abi?.types??[]);const s=fs(t.displayName),a=Mt(t.meta?.abi??void 0,s);if(a)return Ce(n.asSlice(),a,t.meta?.abi?.types??[])}catch(n){console.error("Error parsing contract state from string:",n)}};function nd({data:e}){return r.jsxs("div",{className:z.tooltipContent,children:[r.jsxs("div",{className:z.tooltipField,children:[r.jsx("div",{className:z.tooltipFieldLabel,children:"From Address"}),r.jsx("div",{className:z.tooltipFieldValue,children:e.fromAddress})]}),r.jsxs("div",{className:z.tooltipField,children:[r.jsx("div",{className:z.tooltipFieldLabel,children:"Compute Phase"}),r.jsxs("div",{className:z.tooltipFieldValue,children:[e.computePhase.success?"Success":"Failed",e.computePhase.exitCode!==void 0&&e.computePhase.exitCode!==0&&r.jsxs("span",{children:[" ","(Exit:"," ",e.computePhase.exitCode,")"]}),e.computePhase.gasUsed&&r.jsxs("div",{className:z.tooltipSubValue,children:["Gas Used: ",e.computePhase.gasUsed.toString()]}),e.computePhase.vmSteps!==void 0&&r.jsxs("div",{className:z.tooltipSubValue,children:["VM Steps: ",e.computePhase.vmSteps.toString()]})]})]}),r.jsxs("div",{className:z.tooltipField,children:[r.jsx("div",{className:z.tooltipFieldLabel,children:"Money"}),r.jsxs("div",{className:z.tooltipFieldValue,children:[r.jsxs("div",{children:["Sent Total: ",se(e.sentTotal)]}),r.jsxs("div",{className:z.tooltipSubValue,children:["Total Fees: ",se(e.fees.totalFees)]}),e.fees.gasFees&&r.jsxs("div",{className:z.tooltipSubValue,children:["Gas Fees: ",se(e.fees.gasFees)]})]})]})]})}function id({data:e,contracts:t}){return r.jsx("div",{className:z.tooltipContent,children:r.jsxs("div",{className:z.tooltipField,children:[r.jsx("div",{className:z.tooltipFieldLabel,children:"Contract State"}),r.jsx("div",{className:z.tooltipFieldValue,children:r.jsx("div",{className:z.contractStateData,children:e.contractState&&r.jsx(Ze,{data:e.contractState,dataBefore:e.contractStateBefore,contracts:t})})})]})})}function sd({testData:e}){const{tooltip:t,showTooltip:n,hideTooltip:i,forceHideTooltip:s,setIsTooltipHovered:a,calculateOptimalPosition:o}=Nu(),[l,u]=L.useState(null),[c,d]=L.useState(null),[f,h]=L.useState(null),p=L.useRef(null),v=e.contracts,T=L.useMemo(()=>e.transactions.filter(I=>!I.parent).sort((I,m)=>Number(I.transaction.lt-m.transaction.lt)),[e.transactions]),k=I=>{const m=[I],b=g=>{g.children.forEach(E=>{m.push(E),b(E)})};return b(I),m},C=L.useMemo(()=>{if(!f)return e.transactions;const I=T.find(m=>m.transaction.lt.toString()===f);return I?k(I):e.transactions},[e.transactions,f,T]),_=I=>{h(I),u(null),d(null)},j=I=>{const m=(V,O=0)=>!V.children||V.children.length===0?O:Math.max(...V.children.map(q=>m(q,O+1))),b=V=>!V.children||V.children.length===0?1:V.children.reduce((O,q)=>O+b(q),0),g=b(I),E=m(I),R=g<=2?g*80+20:g*100+100;return{height:Math.max(100,R),width:Math.max(800,E*200+200)}},S=L.useMemo(()=>{const I=new Map;for(let m=0;m<C.length;m++){const b=C[m];I.set(b.transaction.lt.toString(),b)}return I},[C]),x=I=>{const m=S.get(I);m&&(l?.transaction.lt.toString()===I?(u(null),d(null)):(u(m),d(null)))},M=I=>{const m=v.get(I);m&&(c?.address.toString()===I?d(null):d(m))},N=(I,m)=>{const b=I.currentTarget.getBoundingClientRect();p.current=b;const g=m.computeInfo,E={success:g!=="skipped"?g.success:!0,exitCode:g!=="skipped"?g.exitCode:void 0,gasUsed:g!=="skipped"?g.gasUsed:void 0,vmSteps:g!=="skipped"?g.vmSteps:void 0},R={gasFees:g!=="skipped"?g.gasFees:void 0,totalFees:m.money.totalFees},V=m.transaction.inMessage?.info?.src,q={fromAddress:V?ed(V):"unknown",computePhase:E,fees:R,sentTotal:m.money.sentTotal};n({x:b.left,y:b.top,content:r.jsx(nd,{data:q})})},w=(I,m)=>{if(!m?.address)return;const b=I.currentTarget.getBoundingClientRect();p.current=b;const g=v.get(m.address.toString());if(!g)return;const E=td(g,v),R=e.changes.find(q=>q.address===g.address.toString()&&m.transaction.lt.toString()===q.lt),V=R?.before?yi(R.before,g):void 0,O=R?.after?yi(R.after,g):E;if(O||V){const q={contractState:O,contractStateBefore:V,contractData:g};n({x:b.left,y:b.top,content:r.jsx(id,{data:q,contracts:v})})}},A=L.useMemo(()=>{const I=f?T.filter(b=>b.transaction.lt.toString()===f):T,m=b=>{const g=b.address,E=_i(g,v),R=b.transaction.description.type==="generic"?b.transaction.description.computePhase:null,V=b.transaction.inMessage,O=V?.init?.code!==void 0,q=V?.info?.type==="internal"?V.info.bounced:!1,Y=R?.type==="vm"?R.success:!0,le=R?.type==="vm"?R.exitCode===0?b.transaction.description.type==="generic"?b.transaction.description.actionPhase?.resultCode??0:0:R.exitCode:void 0,Q=b.transaction.inMessage?.info?.type==="internal"?b.transaction.inMessage?.info.value?.coins:void 0,ue=b.opcode?.toString(16),he=_n(b,v)?.name,Oe=g?v.get(g.toString())?.letter??"?":"?",Mn=b.transaction.lt.toString(),xs=l?.transaction.lt.toString()===Mn;return{name:`${E}`,attributes:{from:b.transaction.inMessage?.info?.src?.toString()??"unknown",to:b.transaction.inMessage?.info?.dest?.toString()??"unknown",lt:Mn,success:Y?"":"",exitCode:le?.toString()??"0",value:se(Q),opcode:he??(ue?`0x${ue}`:void 0)??"empty opcode",outMsgs:b.transaction.outMessagesCount.toString(),withInitCode:O,isBounced:q,contractLetter:Oe,isSelected:xs},children:b.children.map(_s=>m(_s))}};return I.length>0?{name:"",attributes:{isRoot:"true"},children:I.map(b=>m(b))}:{name:"No transactions",attributes:{},children:[]}},[T,v,l,f]),$=({nodeDatum:I,toggleNode:m})=>{if(I.attributes?.isRoot==="true")return r.jsxs("g",{children:[r.jsx("circle",{r:15,fill:"var(--color-background-secondary)",stroke:"var(--color-text-primary)",strokeWidth:1.5}),r.jsx("text",{fill:"var(--color-text-primary)",strokeWidth:"0",x:"0",y:"5",fontSize:"14",fontWeight:"bold",textAnchor:"middle",children:"BL"})]});const b=I.attributes?.opcode??"empty opcode",g=!Number.isNaN(Number.parseInt(b)),E=I.attributes?.isSelected,R=I.attributes?.lt,V=S.get(R);return r.jsxs("g",{children:[r.jsx("foreignObject",{width:"4",height:"6",x:"-20",y:"-3",className:z.foreignObjectContainer,children:r.jsx("svg",{width:"4",height:"6",viewBox:"0 0 4 5",xmlns:"http://www.w3.org/2000/svg",className:z.iconSvg,children:r.jsx("path",{d:"M0.400044 0.549983C0.648572 0.218612 1.11867 0.151455 1.45004 0.399983L3.45004 1.89998C3.6389 2.04162 3.75004 2.26392 3.75004 2.49998C3.75004 2.73605 3.6389 2.95834 3.45004 3.09998L1.45004 4.59998C1.11867 4.84851 0.648572 4.78135 0.400044 4.44998C0.151516 4.11861 0.218673 3.64851 0.550044 3.39998L1.75004 2.49998L0.550044 1.59998C0.218673 1.35145 0.151516 0.881354 0.400044 0.549983Z",fill:"var(--color-text-tertiary)"})})}),r.jsx("circle",{r:15,fill:E?"var(--color-text-primary)":I.attributes?.success===""?"var(--color-background-secondary)":"#ef4444",stroke:"var(--color-text-primary)",strokeWidth:1.5,onClick:()=>x(R),onMouseEnter:O=>{V?.address&&w(O,V)},onMouseLeave:()=>{i()},style:{cursor:"pointer"}}),r.jsx("text",{fill:E?"var(--color-background-primary)":"var(--color-text-primary)",strokeWidth:"0",x:"0",y:"5",fontSize:"14",fontWeight:"bold",textAnchor:"middle",style:{pointerEvents:"none"},children:I.attributes?.contractLetter}),r.jsx("foreignObject",{width:"150",height:"100",x:"-180",y:"-40",children:r.jsxs("div",{className:z.edgeText,onMouseEnter:O=>{V&&N(O,V)},onMouseLeave:()=>{i()},children:[r.jsxs("div",{className:z.topText,children:[r.jsx("p",{className:z.edgeTextTitle,children:I.name}),I.attributes?.value&&r.jsx("p",{className:z.edgeTextContent,children:I.attributes.value})]}),r.jsxs("div",{className:z.bottonText,children:[r.jsx("p",{className:z.edgeTextContent,children:g?r.jsxs(r.Fragment,{children:["Opcode: ",b]}):b}),I.attributes?.exitCode&&I.attributes?.exitCode!=="0"&&r.jsxs("p",{className:z.edgeTextContent,children:["Exit: ",I.attributes?.exitCode," | Success:"," ",I.attributes?.success===""?"true":"false"]})]})]})})]})},P=({target:I},m)=>{const b=I.data.attributes;return b&&b?.withInitCode?z.edgeStyle+` ${z.edgeStyleWithInit}`:b&&b?.isBounced?z.edgeStyle+` ${z.edgeStyleBounced}`:z.edgeStyle},U=j(A);return r.jsxs("div",{className:z.container,children:[T.length>1&&r.jsxs("div",{className:z.tabsContainer,children:[r.jsx("button",{className:`${z.tab} ${f?"":z.tabActive}`,onClick:()=>_(null),children:"All"}),T.map((I,m)=>{const b=_i(I.address,v),g=f===I.transaction.lt.toString();return r.jsxs("button",{className:`${z.tab} ${g?z.tabActive:""}`,onClick:()=>_(I.transaction.lt.toString()),children:["#",m+1,": ",b]},I.transaction.lt.toString())})]}),r.jsx("div",{className:z.treeContainer,style:{height:`${U.height}px`},children:r.jsxs("div",{className:z.treeWrapper,style:{width:`${U.width}px`},children:[r.jsx(ae,{data:A,orientation:"horizontal",pathFunc:I=>{const m=I.target.data.attributes??{};return m.isFirst?"M".concat(I.source.y.toString(),",").concat(I.source.x.toString(),"V").concat((I.target.x+10).toString(),"a10 10 0 0 1 10 -10H").concat((I.target.y-18).toString()):m.isLast?"M".concat(I.source.y.toString(),",").concat(I.source.x.toString(),"V").concat((I.target.x-10).toString(),"a10 10 0 0 0 10 10H").concat((I.target.y-18).toString()):"M".concat(I.source.y.toString(),",").concat(I.source.x.toString(),"V").concat(I.target.x.toString(),"H").concat((I.target.y-18).toString())},nodeSize:{x:200,y:120},separation:{siblings:.7,nonSiblings:1},renderCustomNodeElement:$,pathClassFunc:P,translate:{x:50,y:U.height/2},zoom:1,enableLegacyTransitions:!1,collapsible:!1,zoomable:!1,draggable:!1,pannable:!1,scaleExtent:{min:1,max:1}}),t&&p.current&&r.jsx(ku,{content:t.content,triggerRect:p.current,onMouseEnter:()=>a(!0),onMouseLeave:()=>a(!1),onForceHide:s,calculateOptimalPosition:o})]})}),l&&r.jsx("div",{className:z.transactionDetails,children:r.jsx(ff,{tx:l,testData:e,contracts:v,onContractClick:M})}),c&&r.jsx("div",{className:z.contractDetails,children:r.jsx(Kd,{contract:c,contracts:v,tests:[e],isDeployed:!0})})]})}const rd="_contractChip_19uoq_1",ad="_contractChipCopyButton_19uoq_21",od="_clickable_19uoq_25",ld="_contractLetter_19uoq_37",cd="_contractName_19uoq_51",ud="_contractAddress_19uoq_58",ve={contractChip:rd,contractChipCopyButton:ad,clickable:od,contractLetter:ld,contractName:cd,contractAddress:ud};function pe({address:e,contracts:t,onContractClick:n}){const[i,s]=L.useState(!1),a=L.useCallback(h=>{h.stopPropagation(),e&&navigator.clipboard.writeText(e).then(()=>{s(!0)}).catch(p=>{console.error("Failed to copy: ",p)})},[e]),o=L.useCallback(h=>{h.stopPropagation(),e&&n&&n(e)},[e,n]);L.useEffect(()=>{if(i){const h=setTimeout(()=>{s(!1)},1500);return()=>clearTimeout(h)}},[i]);const l=r.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",children:[r.jsx("rect",{x:"9",y:"9",width:"13",height:"13",rx:"2",ry:"2"}),r.jsx("path",{d:"M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"})]}),u=r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",children:r.jsx("polyline",{points:"20 6 9 17 4 12"})});if(!e)return r.jsx("span",{className:ve.contractChip,children:"Unknown"});const c=t.get(e),d=n!==void 0,f=r.jsxs(r.Fragment,{children:[c?r.jsxs(r.Fragment,{children:[r.jsx("span",{className:ve.contractLetter,children:c.letter}),r.jsx("span",{className:ve.contractName,children:c.displayName}),r.jsxs("span",{className:ve.contractAddress,children:["(",e.slice(0,6),"",e.slice(-6),")"]})]}):r.jsxs("span",{className:ve.contractAddress,children:[e.slice(0,6),"",e.slice(-6)]}),r.jsx("div",{onClick:a,onKeyDown:h=>{(h.key==="Enter"||h.key===" ")&&(h.preventDefault(),a(h))},className:ve.contractChipCopyButton,title:i?"Copied!":"Copy address","aria-label":i?"Copied to clipboard":"Copy address",role:"button",tabIndex:0,children:i?u:l})]});return d?r.jsx("button",{className:`${ve.contractChip} ${ve.clickable}`,onClick:o,title:"Click to view contract details",type:"button",children:f}):r.jsx("span",{className:ve.contractChip,children:f})}const dd="_opcodeChip_1h1rc_1",hd="_opcodeText_1h1rc_12",fd="_copyButton_1h1rc_17",Zt={opcodeChip:dd,opcodeText:hd,copyButton:fd},ps=({opcode:e,abiName:t})=>{const[n,i]=L.useState(!1),s=t??(e?`0x${e.toString(16)}`:"Empty"),a=e?`0x${e.toString(16)}`:"",o=L.useCallback(async l=>{if(l.stopPropagation(),!!a)try{await navigator.clipboard.writeText(a),i(!0)}catch(u){console.error("Failed to copy:",u)}},[a]);return L.useEffect(()=>{if(n){const l=setTimeout(()=>i(!1),2e3);return()=>clearTimeout(l)}},[n]),r.jsxs("div",{className:Zt.opcodeChip,children:[r.jsx("span",{className:Zt.opcodeText,children:s}),a&&r.jsx("button",{className:Zt.copyButton,onClick:l=>{o(l).catch(console.error)},title:`Copy ${a}`,"aria-label":`Copy opcode ${a}`,children:n?r.jsx("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:r.jsx("polyline",{points:"20,6 9,17 4,12"})}):r.jsxs("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[r.jsx("rect",{x:"9",y:"9",width:"13",height:"13",rx:"2",ry:"2"}),r.jsx("path",{d:"m5,15 L5,5 a2,2 0 0,1 2,-2 l10,0"})]})})]})},pd="_container_2lhva_1",md="_mainInformation_2lhva_4",gd="_contractChipHeader_2lhva_15",xd="_mainInformationRows_2lhva_19",_d="_mainInformationRowTitle_2lhva_31",vd="_mainInformationFooter_2lhva_35",yd="_mainInformationStatus_2lhva_39",bd="_active_2lhva_56",Nd="_inactive_2lhva_60",wd="_frozen_2lhva_64",Cd="_detailsInformation_2lhva_68",jd="_tabsContainer_2lhva_78",Td="_tab_2lhva_78",Sd="_tabContent_2lhva_102",Md="_codeSection_2lhva_106",kd="_stateSection_2lhva_112",Id="_parsedStateInitHeader_2lhva_118",Ed="_parsedStateInit_2lhva_118",$d="_txTableHeader_2lhva_270",Dd="_txTableHeaderCell_2lhva_278",Ld="_txTableHeaderCellValue_2lhva_284",Ad="_txTableLine_2lhva_288",Rd="_txTableCell_2lhva_302",Vd="_txTableCellOpcode_2lhva_307",Od="_externalInLabel_2lhva_318",Fd="_txTableCellValue_2lhva_323",Bd="_inMessage_2lhva_328",Pd="_addressShort_2lhva_340",zd="_noTransactionsMessage_2lhva_345",qd="_moreTransactionsMessage_2lhva_351",F={container:pd,mainInformation:md,contractChipHeader:gd,mainInformationRows:xd,mainInformationRowTitle:_d,mainInformationFooter:vd,mainInformationStatus:yd,active:bd,inactive:Nd,frozen:wd,detailsInformation:Cd,tabsContainer:jd,tab:Td,tabContent:Sd,codeSection:Md,stateSection:kd,parsedStateInitHeader:Id,parsedStateInit:Ed,txTableHeader:$d,txTableHeaderCell:Dd,txTableHeaderCellValue:Ld,txTableLine:Ad,txTableCell:Rd,txTableCellOpcode:Vd,externalInLabel:Od,txTableCellValue:Fd,inMessage:Bd,addressShort:Pd,noTransactionsMessage:zd,moreTransactionsMessage:qd};function Wd(e,t){return e.flatMap(n=>n.transactions.filter(i=>i.address?i.address.toString()===t.address.toString():!1))}const bi=(e,t=30)=>{if(e.length<=t)return r.jsx(r.Fragment,{children:e});const n=Math.floor(t/2),i=e.substring(0,n),s=e.substring(e.length-n);return r.jsxs("span",{title:e,className:F.truncatedMiddle,children:[i,r.jsx("span",{className:F.ellipsis,children:""}),s]})};function Hd(e,t){if(!e)return r.jsx("span",{className:F.addressShort,children:""});if(e.info.type==="internal"){const n=e.info.src;return r.jsx("div",{className:F.inMessage,children:t?r.jsx(r.Fragment,{children:r.jsx(pe,{address:n.toString(),contracts:t})}):r.jsx(r.Fragment,{children:r.jsx("span",{className:F.addressShort,children:bi(n.toString(),10)})})})}if(e.info.type==="external-in"){const n=e.info.src;return r.jsx("div",{className:F.inMessage,children:t?r.jsx(r.Fragment,{children:r.jsx(pe,{address:n?.toString(),contracts:t})}):r.jsx(r.Fragment,{children:r.jsx("span",{className:F.addressShort,children:bi(n?.toString()??"unknown",10)})})})}return r.jsx("span",{className:F.addressShort,children:"External"})}function Ni(e,t){return e.meta?.abi?.types?.find(n=>n.name===`${t}$Data`)}function Ud(e){switch(e){case"ExtendedShardedJettonWallet":return"JettonWalletSharded";case"ExtendedShardedJettonMinter":return"JettonMinterSharded";case"ExtendedJettonWallet":return"JettonWallet";case"ExtendedJettonMinter":return"JettonMinter";case"ExtendedLPJettonWallet":return"LPJettonWallet";case"ExtendedLPJettonMinter":return"LPJettonMinter"}return e}function Gd(e,t){if(e.meta?.abi===void 0){for(const[,n]of t){const i=wi(n);if(i)return i}return}return wi(e)}function wi(e){if(e.kind==="treasury")return;const t=e.stateInit?.data;if(t){const n=G.Cell.fromHex(t.toBoc().toString("hex")),i=Ni(e,e.displayName);if(i)return console.log(i),Ce(n.asSlice(),i,e.meta?.abi?.types??[]);const s=Ud(e.displayName),a=Ni(e,s);if(a)return console.log(a),Ce(n.asSlice(),a,e.meta?.abi?.types??[]);console.log(`no abi data for ${s}`,e.meta?.abi)}}function Jd({tx:e,contracts:t}){const n=e.opcode,i=_n(e,t),s=e.transaction.inMessage,a=s?.info?.type==="internal"?s?.info.value?.coins:void 0,o=s?.info?.type==="external-in";return r.jsxs("div",{className:F.txTableLine,children:[r.jsxs("div",{className:F.txTableCellOpcode,children:[r.jsx(ps,{opcode:n,abiName:i?.name}),o&&r.jsx("span",{className:F.externalInLabel,children:" (external-in)"})]}),r.jsx("div",{className:F.txTableCell,children:Hd(s,t)}),r.jsx("div",{className:`${F.txTableCell} ${F.txTableCellValue}`,children:se(a)})]})}function Kd({contract:e,contracts:t,tests:n,isDeployed:i}){const[s,a]=L.useState("history"),o=e.address.toString(),l=se(e.account.account?.storage?.balance?.coins),u=(e.meta?.treasurySeed?"Treasury":e.displayName)??"Unknown contract",c=e.account.account?.storage?.state?.type??"unknown",d=_=>{switch(_){case"active":return`${F.mainInformationStatus} ${F.active}`;case"frozen":return`${F.mainInformationStatus} ${F.frozen}`;case"uninit":case"unknown":default:return`${F.mainInformationStatus} ${F.inactive}`}},f=Gd(e,t),h=Wd(n,e),p=e.stateInit?.code?Ds.print(Ls.decompileCell(e.stateInit?.code)):"",v=e.stateInit?.code?.toBoc()?.toString("hex")??"",T=e.stateInit?.data?.toBoc()?.toString("hex")??"",k=e.stateInit?.data?.toString()??"",C=()=>f?r.jsx(Ze,{data:f,contracts:t}):null;return r.jsxs("div",{className:F.container,children:[r.jsxs("div",{className:F.mainInformation,children:[r.jsx("div",{className:F.contractChipHeader,children:r.jsx(pe,{address:o,contracts:t})}),r.jsxs("div",{className:F.mainInformationRows,children:[r.jsx("div",{className:F.mainInformationRowTitle,children:"Address"}),r.jsx("div",{children:o}),r.jsx("div",{className:F.mainInformationRowTitle,children:"Balance"}),r.jsx("div",{children:l}),r.jsx("div",{className:F.mainInformationRowTitle,children:"Contract type"}),r.jsx("div",{children:u})]}),r.jsx("div",{className:F.mainInformationFooter,children:r.jsx("div",{className:d(c),children:c})})]}),r.jsxs("div",{className:F.detailsInformation,children:[r.jsxs("div",{className:F.tabsContainer,children:[r.jsx("div",{className:`${F.tab} ${s==="history"?F.active:""}`,onClick:()=>a("history"),onKeyDown:_=>{(_.key==="Enter"||_.key===" ")&&(_.preventDefault(),a("history"))},role:"button",tabIndex:0,children:"History"}),r.jsx("div",{className:`${F.tab} ${s==="code"?F.active:""}`,onClick:()=>a("code"),onKeyDown:_=>{(_.key==="Enter"||_.key===" ")&&(_.preventDefault(),a("code"))},role:"button",tabIndex:0,children:"Code"}),r.jsx("div",{className:`${F.tab} ${s==="state-init"?F.active:""}`,onClick:()=>a("state-init"),onKeyDown:_=>{(_.key==="Enter"||_.key===" ")&&(_.preventDefault(),a("state-init"))},role:"button",tabIndex:0,children:"State Init"})]}),r.jsxs("div",{className:F.tabContent,children:[s==="history"&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:F.txTableHeader,children:[r.jsx("div",{className:F.txTableHeaderCell,children:"Operation"}),r.jsx("div",{className:F.txTableHeaderCell,children:"From"}),r.jsx("div",{className:`${F.txTableHeaderCell} ${F.txTableHeaderCellValue}`,children:"Value"})]}),h.length>0?h.map((_,j)=>r.jsx(Jd,{tx:_,contracts:t},j)):r.jsx("div",{className:F.txTableLine,children:r.jsx("div",{className:`${F.txTableCell} ${F.noTransactionsMessage}`,children:"No transactions found"})}),h.length>10&&r.jsx("div",{className:F.txTableLine,children:r.jsxs("div",{className:`${F.txTableCell} ${F.moreTransactionsMessage}`,children:["+",h.length-10," more transactions"]})})]}),s==="code"&&r.jsxs("div",{className:F.codeSection,children:[r.jsx(Ne,{title:"Assembly Code",content:p,variant:"assembly",placeholder:"No assembly code available"}),r.jsx(Ne,{title:"Hex",content:v,variant:"hex",placeholder:"No hex code available"})]}),s==="state-init"&&r.jsxs("div",{className:F.stateSection,children:[f&&r.jsxs("div",{children:[r.jsx("div",{className:F.parsedStateInitHeader,children:"Parsed Data"}),r.jsx("div",{className:F.parsedStateInit,children:C()})]}),r.jsx(Ne,{title:"Data Hex",content:T,variant:"hex",placeholder:"No init data available"}),r.jsx(Ne,{title:"Data Cells",content:k,variant:"hex",placeholder:"No init data available"})]})]})]})]})}const Xd="_container_1ytdt_1",Yd="_header_1ytdt_13",Qd="_title_1ytdt_22",Zd="_content_1ytdt_29",eh="_mainContent_1ytdt_36",th="_codeEditorArea_1ytdt_44",nh="_sidePanel_1ytdt_53",ih="_noTrace_1ytdt_58",sh="_inlineContainer_1ytdt_74",rh="_inlineContent_1ytdt_78",ah="_inlineMainContent_1ytdt_83",te={container:Xd,header:Yd,title:Qd,content:Zd,mainContent:eh,codeEditorArea:th,sidePanel:nh,noTrace:ih,inlineContainer:sh,inlineContent:rh,inlineMainContent:ah},oh=X.lazy(()=>Fs(()=>import("./index-BrCdVL5z.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9]),import.meta.url));function lh({tx:e,contracts:t,onClose:n,inline:i=!1}){const s=L.useMemo(()=>As(e,t),[e,t]),a=Rs(s?.traceInfo),{selectedStep:o,highlightLine:l,currentStep:u,currentStack:c,handlePrev:d,handleNext:f,goToFirstStep:h,goToLastStep:p,canGoPrev:v,canGoNext:T,findStepByLine:k,transitionType:C,totalSteps:_}=Vs(s?.traceInfo),j=L.useMemo(()=>s?.traceInfo?s.traceInfo.steps.map(w=>({name:w.instructionName,gasCost:kn(w)})):[],[s]),S=L.useMemo(()=>{if(!s?.traceInfo?.steps||o<=0)return 0;let w=0;for(let A=0;A<o;A++){const $=s.traceInfo.steps[A];if($){const P=kn($);isNaN(P)||(w+=P)}}return w},[o,s?.traceInfo?.steps]);if(!s){const w=i?te.inlineContainer:te.container;return r.jsxs("div",{className:w,children:[!i&&r.jsxs("div",{className:te.header,children:[r.jsx("h3",{className:te.title,children:"Transaction Trace"}),n&&r.jsx("button",{onClick:n,className:te.closeButton,"aria-label":"Close trace viewer",children:r.jsx(ki,{size:20})})]}),r.jsx("div",{className:te.content,children:r.jsx("div",{className:te.noTrace,children:"No trace available for this transaction. The transaction may have been skipped or no VM logs were generated."})})]})}const x=i?te.inlineContainer:te.container,M=i?te.inlineContent:te.content,N=i?te.inlineMainContent:te.mainContent;return r.jsx("div",{className:x,children:r.jsx("div",{className:M,children:r.jsxs("div",{className:N,children:[r.jsx("div",{className:te.codeEditorArea,children:r.jsx(L.Suspense,{fallback:r.jsx(Ii,{message:"Loading Editor...",loading:!0}),children:r.jsx(oh,{code:s.code,highlightLine:l,lineExecutionData:a,onLineClick:k,shouldCenter:C==="button",exitCode:s.exitCode})})}),r.jsx(Os,{selectedStep:o,totalSteps:_,currentStep:u,currentStack:c,canGoPrev:v,canGoNext:T,onPrev:d,onNext:f,onFirst:h,onLast:p,showGas:!0,placeholderMessage:"No trace steps available.",instructionDetails:j,cumulativeGas:S,onStackItemClick:()=>{},className:te.sidePanel})]})})})}const ch="_container_qq78z_1",uh="_constant_qq78z_8",dh="_plus_qq78z_24",hh="_empty_qq78z_30",qe={container:ch,constant:uh,plus:dh,empty:hh};function xn({mode:e}){if(e===void 0)return r.jsx("span",{className:qe.empty,children:"No mode"});const t=Qs(e);return t.length===0?r.jsxs("span",{className:qe.empty,children:["Unknown mode: ",e]}):r.jsx("div",{className:qe.container,children:t.map((n,i)=>r.jsxs("div",{children:[i>0&&r.jsx("span",{className:qe.plus,children:" + "}),r.jsx($i,{content:n.description,enableMarkdown:!0,children:r.jsxs("span",{className:qe.constant,children:[n.name," (",n.value,")"]})})]},n.value))})}const fh="_container_qq78z_1",ph="_constant_qq78z_8",mh="_plus_qq78z_24",gh="_empty_qq78z_30",We={container:fh,constant:ph,plus:mh,empty:gh};function xh({mode:e}){if(e===void 0)return r.jsx("span",{className:We.empty,children:"No mode"});const t=Zs(e);return t.length===0?r.jsxs("span",{className:We.empty,children:["Unknown mode: ",e]}):r.jsx("div",{className:We.container,children:t.map((n,i)=>r.jsxs("div",{children:[i>0&&r.jsx("span",{className:We.plus,children:" + "}),r.jsx($i,{content:n.description,enableMarkdown:!0,children:r.jsxs("span",{className:We.constant,children:[n.name," (",n.value,")"]})})]},n.value))})}const _h="_container_ls0r1_1",vh="_scrollWrapper_ls0r1_6",yh="_emptyState_ls0r1_12",bh="_actionsList_ls0r1_20",Nh="_actionCard_ls0r1_27",wh="_actionIcon_ls0r1_50",Ch="_actionCardSelected_ls0r1_59",jh="_actionTitleText_ls0r1_63",Th="_actionContent_ls0r1_67",Sh="_actionTitle_ls0r1_63",Mh="_actionDescription_ls0r1_90",kh="_actionDescriptionWithChip_ls0r1_99",Ih="_actionValue_ls0r1_108",Eh="_detailsContainer_ls0r1_115",$h="_actionDetails_ls0r1_120",Dh="_detailsHeader_ls0r1_124",Lh="_detailsContent_ls0r1_134",Ah="_detailRow_ls0r1_140",Rh="_detailLabel_ls0r1_147",Vh="_detailValue_ls0r1_155",Oh="_booleanTrue_ls0r1_162",Fh="_booleanFalse_ls0r1_168",D={container:_h,scrollWrapper:vh,emptyState:yh,actionsList:bh,actionCard:Nh,actionIcon:wh,actionCardSelected:Ch,actionTitleText:jh,actionContent:Th,actionTitle:Sh,actionDescription:Mh,actionDescriptionWithChip:kh,actionValue:Ih,detailsContainer:Eh,actionDetails:$h,detailsHeader:Dh,detailsContent:Lh,detailRow:Ah,detailLabel:Rh,detailValue:Vh,booleanTrue:Oh,booleanFalse:Fh},Bh=e=>{switch(e){case"sendMsg":return r.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",children:r.jsx("path",{d:"M22 2L11 13M22 2L15 22L11 13L2 9L22 2Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})});case"setCode":return r.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",children:r.jsx("path",{d:"M16 18L22 12L16 6M8 6L2 12L8 18",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})});case"reserve":return r.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",children:r.jsx("path",{d:"M12 1V23M17 5H9.5C8.57174 5 7.6815 5.36875 7.02513 6.02513C6.36875 6.6815 6 7.57174 6 8.5C6 9.42826 6.36875 10.3185 7.02513 10.9749C7.6815 11.6313 8.57174 12 9.5 12H14.5C15.4283 12 16.3185 12.3687 16.9749 13.0251C17.6313 13.6815 18 14.5717 18 15.5C18 16.4283 17.6313 17.3185 16.9749 17.9749C16.3185 18.6313 15.4283 19 14.5 19H6",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})});case"changeLibrary":return r.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",children:r.jsx("path",{d:"M4 19V5C4 3.89543 4.89543 3 6 3H18C19.1046 3 20 5V19L12 14L4 19Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})});default:return r.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",children:[r.jsx("circle",{cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"2"}),r.jsx("path",{d:"M9 9h6v6H9z",fill:"currentColor"})]})}},Ci=e=>r.jsx("span",{className:e?D.booleanTrue:D.booleanFalse,children:e?"Yes":"No"}),Ph=(e,t,n,i)=>{switch(e.type){case"sendMsg":{const s=e.outMsg,a=s.info;return r.jsxs("div",{className:D.actionDetails,children:[r.jsx("div",{className:D.detailsHeader,children:r.jsx("h4",{children:"Details"})}),r.jsxs("div",{className:D.detailsContent,children:[r.jsxs("div",{className:D.detailRow,children:[r.jsx("span",{className:D.detailLabel,children:"Mode:"}),r.jsx("div",{className:D.detailValue,children:r.jsx(xn,{mode:e.mode})})]}),r.jsxs("div",{className:D.detailRow,children:[r.jsx("span",{className:D.detailLabel,children:"Type:"}),r.jsx("span",{className:D.detailValue,children:a.type})]}),a.type==="internal"&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:D.detailRow,children:[r.jsx("span",{className:D.detailLabel,children:"From:"}),r.jsx("div",{className:D.detailValue,children:r.jsx(pe,{address:t,contracts:n,onContractClick:i})})]}),r.jsxs("div",{className:D.detailRow,children:[r.jsx("span",{className:D.detailLabel,children:"To:"}),r.jsx("div",{className:D.detailValue,children:r.jsx(pe,{address:tn(a.dest),contracts:n,onContractClick:i})})]}),r.jsxs("div",{className:D.detailRow,children:[r.jsx("span",{className:D.detailLabel,children:"Value:"}),r.jsx("span",{className:D.detailValue,children:se(a.value.coins)})]}),r.jsxs("div",{className:D.detailRow,children:[r.jsx("span",{className:D.detailLabel,children:"Bounce:"}),r.jsx("span",{className:D.detailValue,children:Ci(a.bounce)})]}),r.jsxs("div",{className:D.detailRow,children:[r.jsx("span",{className:D.detailLabel,children:"Bounced:"}),r.jsx("span",{className:D.detailValue,children:Ci(a.bounced)})]})]}),a.type==="external-out"&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:D.detailRow,children:[r.jsx("span",{className:D.detailLabel,children:"From:"}),r.jsx("div",{className:D.detailValue,children:r.jsx(pe,{address:t,contracts:n,onContractClick:i})})]}),r.jsxs("div",{className:D.detailRow,children:[r.jsx("span",{className:D.detailLabel,children:"To:"}),r.jsx("div",{className:D.detailValue,children:a.dest?r.jsx(pe,{address:tn(a.dest),contracts:n,onContractClick:i}):"External"})]})]}),r.jsxs("div",{className:D.detailRow,children:[r.jsx("span",{className:D.detailLabel,children:"Body:"}),r.jsx("div",{className:D.detailValue,children:r.jsx(Ne,{title:"hex",content:s.body.toBoc().toString("hex")})})]})]})]})}case"setCode":return r.jsxs("div",{className:D.actionDetails,children:[r.jsx("div",{className:D.detailsHeader,children:r.jsx("h4",{children:"Details"})}),r.jsx("div",{className:D.detailsContent,children:r.jsxs("div",{className:D.detailRow,children:[r.jsx("span",{className:D.detailLabel,children:"New Code Hash:"}),r.jsx("span",{className:D.detailValue,children:r.jsx(Ne,{title:"hex",content:e.newCode.toBoc().toString("hex")})})]})})]});case"reserve":return r.jsxs("div",{className:D.actionDetails,children:[r.jsx("div",{className:D.detailsHeader,children:r.jsx("h4",{children:"Details"})}),r.jsxs("div",{className:D.detailsContent,children:[r.jsxs("div",{className:D.detailRow,children:[r.jsx("span",{className:D.detailLabel,children:"Mode:"}),r.jsx("div",{className:D.detailValue,children:r.jsx(xh,{mode:e.mode})})]}),r.jsxs("div",{className:D.detailRow,children:[r.jsx("span",{className:D.detailLabel,children:"Amount:"}),r.jsx("span",{className:D.detailValue,children:se(e.currency.coins)})]})]})]});case"changeLibrary":return r.jsxs("div",{className:D.actionDetails,children:[r.jsx("div",{className:D.detailsHeader,children:r.jsx("h4",{children:"Details"})}),r.jsxs("div",{className:D.detailsContent,children:[r.jsxs("div",{className:D.detailRow,children:[r.jsx("span",{className:D.detailLabel,children:"Mode:"}),r.jsx("div",{className:D.detailValue,children:r.jsx(xn,{mode:e.mode})})]}),r.jsxs("div",{className:D.detailRow,children:[r.jsx("span",{className:D.detailLabel,children:"Library:"}),r.jsx("span",{className:D.detailValue,children:r.jsx(Ne,{title:"hex",content:e.libRef.type==="hash"?e.libRef.libHash.toString("hex"):e.libRef.library.hash().toString("hex")})})]})]})]})}};function zh({actions:e,contracts:t,contractAddress:n,onContractClick:i}){const[s,a]=L.useState(null);return e.length===0?r.jsx("div",{className:D.container,children:r.jsx("div",{className:D.emptyState,children:"No actions"})}):r.jsxs("div",{className:D.container,children:[r.jsx("div",{className:D.scrollWrapper,children:r.jsx("div",{className:D.actionsList,children:e.map((o,l)=>{const u=Bs(o),c=s===l;let d=u.description;if(o.type==="sendMsg"){const f=o.outMsg.info;if(f.type==="internal"){const h=tn(f.dest);d=r.jsxs("div",{className:D.actionDescriptionWithChip,children:[r.jsx("span",{children:"Internal  "}),r.jsx(pe,{address:h,contracts:t,onContractClick:i})]})}}return r.jsx("div",{className:`${D.actionCard} ${c?D.actionCardSelected:""}`,onClick:()=>a(c?null:l),onKeyDown:f=>{(f.key==="Enter"||f.key===" ")&&(f.preventDefault(),a(c?null:l))},role:"button",tabIndex:0,"aria-expanded":c,"aria-label":`${u.title} action details`,children:r.jsxs("div",{className:D.actionContent,children:[r.jsxs("div",{className:D.actionTitle,children:[r.jsx("div",{className:D.actionIcon,children:Bh(o.type)}),r.jsx("span",{className:D.actionTitleText,children:u.title})]}),r.jsx("div",{className:D.actionDescription,children:d}),u.value&&r.jsx("div",{className:D.actionValue,children:u.value})]})},l)})})}),s!==null&&r.jsx("div",{className:D.detailsContainer,children:Ph(e[s],n,t,i)})]})}const qh="_transactionDetailsContainer_u10sq_1",Wh="_detailRow_u10sq_9",Hh="_detailLabel_u10sq_19",Uh="_detailValue_u10sq_34",Gh="_timestampValue_u10sq_43",Jh="_timestampDetailSecondary_u10sq_47",Kh="_labeledSectionRow_u10sq_51",Xh="_labeledSectionTitle_u10sq_60",Yh="_labeledSectionContent_u10sq_75",Qh="_multiColumnRow_u10sq_89",Zh="_multiColumnItem_u10sq_96",ef="_multiColumnItemTitle_u10sq_116",tf="_multiColumnItemValue_u10sq_123",nf="_multiColumnItemValueWithRows_u10sq_132",sf="_booleanTrue_u10sq_136",rf="_booleanFalse_u10sq_141",af="_numberValue_u10sq_146",of="_parsedDataContent_u10sq_200",lf="_traceButtonContainer_u10sq_204",cf="_traceButton_u10sq_204",uf="_traceViewerContainer_u10sq_229",df="_actionsToggleButton_u10sq_233",hf="_actionsToggleText_u10sq_250",y={transactionDetailsContainer:qh,detailRow:Wh,detailLabel:Hh,detailValue:Uh,timestampValue:Gh,timestampDetailSecondary:Jh,labeledSectionRow:Kh,labeledSectionTitle:Xh,labeledSectionContent:Yh,multiColumnRow:Qh,multiColumnItem:Zh,multiColumnItemTitle:ef,multiColumnItemValue:tf,multiColumnItemValueWithRows:nf,booleanTrue:sf,booleanFalse:rf,numberValue:af,parsedDataContent:of,traceButtonContainer:lf,traceButton:cf,traceViewerContainer:uf,actionsToggleButton:df,actionsToggleText:hf},ji=(e,t,n)=>e?r.jsx(pe,{address:e.toString(),contracts:t,onContractClick:n}):r.jsx(pe,{address:void 0,contracts:t,onContractClick:n}),Ti=(e,t=!0)=>{if(e===void 0)return"";const n=typeof e=="string"?new Date(e):new Date(e*1e3),i=v=>v.toString().padStart(2,"0"),s=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],a=n.getDate(),o=n.getMonth(),l=o+1,u=n.getFullYear(),c=n.getHours(),d=n.getMinutes(),f=n.getSeconds(),h=`${i(a)}.${i(l)}.${u}, ${i(c)}:${i(d)}:${i(f)}`,p=`${i(a)} ${s[o]}, ${i(c)}:${i(d)}`;return r.jsxs(r.Fragment,{children:[h,t&&r.jsxs("span",{className:y.timestampDetailSecondary,children:["  ",p]})]})};function ff({tx:e,contracts:t,onContractClick:n,testData:i}){const[s,a]=L.useState(!1),[o,l]=L.useState(!1);if(e.transaction.description.type!=="generic")throw new Error("TxTracer doesn't support non-generic transaction. Given type: "+e.transaction.description.type);const u=e.computeInfo,c=_n(e,t);let d;const f=t.get(e.address?.toString()??""),h=e.transaction.inMessage?.body?.asSlice();h&&c&&(h.remainingBits>=32&&h.loadUint(32),d=Ce(h,c,f?.meta?.abi?.types??[]));const p=j=>r.jsx("span",{className:j?y.booleanTrue:y.booleanFalse,children:j?"Yes":"No"}),v=e.computeInfo!=="skipped"&&!!e.fields.vmLogs,T=e.computeInfo!=="skipped"&&e.computeInfo.success,k=e.transaction.inMessage,C=e.money,_=Ys(e,i);return r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:y.transactionDetailsContainer,children:[v&&r.jsx("div",{className:y.traceButtonContainer,children:r.jsx(kt,{variant:"primary",size:"sm",onClick:()=>a(!s),className:y.traceButton,children:s?r.jsxs(r.Fragment,{children:[r.jsx(ki,{size:14}),"Close"]}):r.jsxs(r.Fragment,{children:[r.jsx(vs,{size:14}),"Retrace"]})})}),r.jsxs("div",{className:y.detailRow,children:[r.jsx("div",{className:y.detailLabel,children:"Message Route"}),r.jsxs("div",{className:y.detailValue,children:[ji(e.transaction.inMessage?.info?.src,t,n),"  ",ji(e.transaction.inMessage?.info?.dest,t,n)]})]}),k&&k.info.type==="internal"&&r.jsxs("div",{className:y.labeledSectionRow,children:[r.jsx("div",{className:y.labeledSectionTitle,children:"In Message"}),r.jsx("div",{className:y.labeledSectionContent,children:r.jsxs("div",{className:y.multiColumnRow,children:[r.jsxs("div",{className:y.multiColumnItem,children:[r.jsx("div",{className:y.multiColumnItemTitle,children:"Value"}),r.jsx("div",{className:`${y.multiColumnItemValue} ${y.currencyValue}`,children:se(k.info.value.coins)})]}),r.jsxs("div",{className:y.multiColumnItem,children:[r.jsx("div",{className:y.multiColumnItemTitle,children:"Send Mode"}),r.jsx("div",{className:`${y.multiColumnItemValue} ${y.numberValue}`,children:r.jsx(xn,{mode:_})})]}),r.jsxs("div",{className:y.multiColumnItem,children:[r.jsx("div",{className:y.multiColumnItemTitle,children:"IHR Disabled"}),r.jsx("div",{className:y.multiColumnItemValue,children:p(k.info.ihrDisabled)})]}),r.jsxs("div",{className:y.multiColumnItem,children:[r.jsx("div",{className:y.multiColumnItemTitle,children:"Bounced"}),r.jsx("div",{className:y.multiColumnItemValue,children:p(k.info.bounced)})]}),r.jsxs("div",{className:y.multiColumnItem,children:[r.jsx("div",{className:y.multiColumnItemTitle,children:"Bounce"}),r.jsx("div",{className:y.multiColumnItemValue,children:p(k.info.bounce)})]}),r.jsxs("div",{className:y.multiColumnItem,children:[r.jsx("div",{className:y.multiColumnItemTitle,children:"Created At"}),r.jsx("div",{className:`${y.multiColumnItemValue} ${y.timestampValue}`,children:Ti(k.info.createdAt,!1)})]}),r.jsxs("div",{className:y.multiColumnItem,children:[r.jsx("div",{className:y.multiColumnItemTitle,children:"Created Lt"}),r.jsx("div",{className:`${y.multiColumnItemValue} ${y.numberValue}`,children:k.info.createdLt})]})]})})]}),r.jsxs("div",{className:y.labeledSectionRow,children:[r.jsx("div",{className:y.labeledSectionTitle,children:"Message Data"}),r.jsxs("div",{className:y.labeledSectionContent,children:[r.jsx("div",{className:y.multiColumnRow,children:r.jsxs("div",{className:y.multiColumnItem,children:[r.jsx("div",{className:y.multiColumnItemTitle,children:"Opcode"}),r.jsx("div",{className:y.multiColumnItemValue,children:r.jsx(ps,{opcode:e.opcode,abiName:c?.name})})]})}),d&&r.jsxs("div",{className:`${y.multiColumnItemValue} ${y.multiColumnItemValueWithRows}`,children:[r.jsx("div",{className:y.multiColumnItemTitle,children:"Parsed Data:"}),r.jsx("div",{className:y.parsedDataContent,children:r.jsx(Ze,{data:d,contracts:t})})]})]})]}),r.jsxs("div",{className:y.labeledSectionRow,children:[r.jsx("div",{className:y.labeledSectionTitle,children:"Fees & Sent"}),r.jsx("div",{className:y.labeledSectionContent,children:r.jsxs("div",{className:y.multiColumnRow,children:[r.jsxs("div",{className:y.multiColumnItem,children:[r.jsx("div",{className:y.multiColumnItemTitle,children:"Amount Sent (Total)"}),r.jsx("div",{className:`${y.multiColumnItemValue} ${y.currencyValue}`,children:se(C.sentTotal)})]}),r.jsxs("div",{className:y.multiColumnItem,children:[r.jsx("div",{className:y.multiColumnItemTitle,children:"Total Fee"}),r.jsx("div",{className:`${y.multiColumnItemValue} ${y.currencyValue}`,children:se(C.totalFees)})]}),r.jsxs("div",{className:y.multiColumnItem,children:[r.jsx("div",{className:y.multiColumnItemTitle,children:"Gas Fee"}),r.jsx("div",{className:`${y.multiColumnItemValue} ${y.gasValue} ${y.currencyValue}`,children:e.computeInfo!=="skipped"?se(e.computeInfo.gasFees):"N/A"})]}),e.transaction.inMessage?.info?.type==="internal"&&r.jsxs("div",{className:y.multiColumnItem,children:[r.jsx("div",{className:y.multiColumnItemTitle,children:"Forward Fee"}),r.jsx("div",{className:`${y.multiColumnItemValue} ${y.gasValue} ${y.currencyValue}`,children:se(C.forwardFee)})]})]})})]}),r.jsxs("div",{className:y.labeledSectionRow,children:[r.jsx("div",{className:y.labeledSectionTitle,children:"Compute Phase"}),r.jsx("div",{className:y.labeledSectionContent,children:u==="skipped"?r.jsx("div",{className:y.multiColumnItemValue,children:"Skipped"}):r.jsxs("div",{className:y.multiColumnRow,children:[r.jsxs("div",{className:y.multiColumnItem,children:[r.jsx("div",{className:y.multiColumnItemTitle,children:"Success"}),r.jsx("div",{className:y.multiColumnItemValue,children:p(u?.success??!1)})]}),r.jsxs("div",{className:y.multiColumnItem,children:[r.jsx("div",{className:y.multiColumnItemTitle,children:"Exit Code"}),r.jsx("div",{className:y.multiColumnItemValue,children:r.jsx(Ps,{exitCode:u?.exitCode,abi:f?.meta?.abi})})]}),r.jsxs("div",{className:y.multiColumnItem,children:[r.jsx("div",{className:y.multiColumnItemTitle,children:"VM Steps"}),r.jsx("div",{className:`${y.multiColumnItemValue} ${y.numberValue}`,children:u?.vmSteps})]}),r.jsxs("div",{className:y.multiColumnItem,children:[r.jsx("div",{className:y.multiColumnItemTitle,children:"Gas Used"}),r.jsx("div",{className:`${y.multiColumnItemValue} ${y.gasValue}`,children:u?.gasUsed})]}),r.jsxs("div",{className:y.multiColumnItem,children:[r.jsx("div",{className:y.multiColumnItemTitle,children:"Gas Fee"}),r.jsx("div",{className:`${y.multiColumnItemValue} ${y.gasValue}`,children:se(u?.gasFees)})]})]})})]}),r.jsxs("div",{className:y.labeledSectionRow,children:[r.jsx("div",{className:y.labeledSectionTitle,children:"Action Phase"}),r.jsx("div",{className:y.labeledSectionContent,children:r.jsxs("div",{className:y.multiColumnRow,children:[r.jsxs("div",{className:y.multiColumnItem,children:[r.jsx("div",{className:y.multiColumnItemTitle,children:"Success"}),r.jsx("div",{className:`${y.multiColumnItemValue} ${T?y.booleanTrue:y.booleanFalse}`,children:p(T)})]}),r.jsxs("div",{className:y.multiColumnItem,children:[r.jsx("div",{className:y.multiColumnItemTitle,children:"Total Actions"}),r.jsxs("div",{className:`${y.multiColumnItemValue} ${y.numberValue}`,children:[zs(e.outActions.length),e.outActions.length>0&&r.jsxs("button",{onClick:()=>l(!o),className:y.actionsToggleButton,"aria-label":o?"Hide actions":"Show actions",children:[o?r.jsx(ys,{size:14}):r.jsx(bs,{size:14}),r.jsx("span",{className:y.actionsToggleText,children:o?"Hide":"Show"})]})]})]})]})})]}),o&&e.outActions.length>0&&r.jsxs("div",{className:y.labeledSectionRow,children:[r.jsx("div",{className:y.labeledSectionTitle,children:"Actions Details"}),r.jsx("div",{className:y.labeledSectionContent,children:r.jsx(zh,{actions:e.outActions,contracts:t,contractAddress:e.address?.toString()??"",onContractClick:n})})]}),r.jsxs("div",{className:y.detailRow,children:[r.jsx("div",{className:y.detailLabel,children:"Time"}),r.jsx("div",{className:`${y.detailValue} ${y.timestampValue}`,children:Ti(e.transaction.now)})]})]}),s&&v&&r.jsx("div",{className:y.traceViewerContainer,children:r.jsx(lh,{tx:e,contracts:t,inline:!0})})]})}const pf="_traceViewWrapper_1lx4p_1",mf="_appContainer_1lx4p_7",gf="_headerContent_1lx4p_17",xf="_errorMessage_1lx4p_116",_f="_downloadButton_1lx4p_121",vf="_uploadButton_1lx4p_134",yf="_downloaded_1lx4p_154",bf="_uploaded_1lx4p_155",Nf="_error_1lx4p_116",wf="_headerControls_1lx4p_180",Cf="_fullPageState_1lx4p_206",jf="_examplesContainer_1lx4p_211",Tf="_examplesTitle_1lx4p_217",Sf="_examplesList_1lx4p_222",K={traceViewWrapper:pf,appContainer:mf,headerContent:gf,errorMessage:xf,downloadButton:_f,uploadButton:vf,downloaded:yf,uploaded:bf,error:Nf,headerControls:wf,fullPageState:Cf,examplesContainer:jf,examplesTitle:Tf,examplesList:Sf},Mf=({rawData:e})=>{const[t,n]=L.useState(!1),i=`${K.downloadButton} ${t?K.downloaded:""}`,s=L.useCallback(()=>{const a=JSON.stringify(e,null,2),o=new Blob([a],{type:"application/json"}),l=URL.createObjectURL(o),u=e.at(0)?.testName??"unknown-test",c=document.createElement("a");c.href=l,c.download=`sandbox-${u}-${new Date().toISOString().slice(0,19).replace(/:/g,"-")}.json`,document.body.appendChild(c),c.click(),document.body.removeChild(c),URL.revokeObjectURL(l),n(!0),setTimeout(()=>n(!1),1e3)},[e]);return r.jsxs(r.Fragment,{children:[r.jsx(kt,{onClick:s,title:t?"Downloaded!":"Download test data as JSON",className:i,"aria-label":t?"Test data downloaded":"Download test data as JSON",children:t?r.jsx(Ei,{size:16,"aria-hidden":"true"}):r.jsx(Ns,{size:16,"aria-hidden":"true"})}),r.jsx("div",{className:"sr-only","aria-live":"polite","aria-atomic":"true",children:t&&"Test data downloaded as JSON file"})]})},kf="_container_g01uo_1",If="_header_g01uo_5",Ef="_titleRow_g01uo_11",$f="_titleSection_g01uo_18",Df="_collapseButton_g01uo_31",Lf="_testTitle_g01uo_57",Af="_timestamp_g01uo_64",Rf="_stats_g01uo_72",Vf="_statItem_g01uo_81",Of="_statLabel_g01uo_87",ie={container:kf,header:If,titleRow:Ef,titleSection:$f,collapseButton:Df,testTitle:Lf,timestamp:Af,stats:Rf,statItem:Vf,statLabel:Of};function Si({testData:e,testIndex:t,rawTestData:n}){const[i,s]=L.useState(!1),a=c=>c?new Date(c).toLocaleString("en-US",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1}):"",o=e.transactions.length,u=e.transactions.filter(c=>!c.parent).length;return r.jsxs("div",{className:ie.container,children:[r.jsxs("div",{className:ie.header,children:[r.jsxs("div",{className:ie.titleRow,children:[r.jsxs("div",{className:ie.titleSection,children:[r.jsxs("h2",{className:ie.testTitle,children:["#",t," ",e.testName]}),r.jsx(Mf,{rawData:n??[]})]}),r.jsx("button",{className:ie.collapseButton,onClick:()=>s(!i),"aria-label":i?"Expand test info":"Collapse test info",children:i?r.jsx(Js,{}):r.jsx(Ks,{})})]}),!i&&r.jsxs(r.Fragment,{children:[e.timestamp&&r.jsxs("p",{className:ie.timestamp,children:["Executed at: ",a(e.timestamp)]}),r.jsxs("div",{className:ie.stats,children:[r.jsxs("span",{className:ie.statItem,children:[r.jsx("span",{className:ie.statLabel,children:"Total transactions:"})," ",o]}),u>1&&r.jsxs("span",{className:ie.statItem,children:[r.jsx("span",{className:ie.statLabel,children:"Transaction sequences:"})," ",u]}),r.jsxs("span",{className:ie.statItem,children:[r.jsx("span",{className:ie.statLabel,children:"Contracts:"})," ",e.contracts.size]})]})]})]}),!i&&r.jsx(sd,{testData:e},`tree-${e.testName}`)]})}const ms=[{key:"tolk-counter",label:"Tolk: Counter",file:"tolk-sandbox-Counter should reset counter-2025-08-07T20-11-27.json"},{key:"tact-proofs",label:"Tact: Proofs TEP89",file:"tact-sandbox-Proofs TEP89 proof should correctly work for discoverable jettons-2025-08-08T08-23-05.json"}];function Ff(e){const t=e.trim().toLowerCase();return ms.find(n=>n.key===t)}function Bf(e){return`https://i582.github.io/TxTracer/assets/sandbox-examples/${encodeURIComponent(e)}`}async function gs(e){const t=Bf(e),n=await fetch(t);if(!n.ok)throw new Error(`Failed to fetch example: ${n.status}`);return await n.json()}async function Pf(e){const t=Ff(e);if(t)return gs(t.file)}const zf=({onDataLoaded:e})=>{const[t,n]=L.useState(null),[i,s]=L.useState(null),a=L.useCallback(async o=>{s(null),n(o);try{const l=await gs(o);e(l)}catch(l){console.error(l),s(o)}finally{n(null)}},[e]);return r.jsxs("div",{className:K.examplesContainer,children:[r.jsx("span",{className:K.examplesTitle,children:"Or try examples:"}),r.jsx("div",{className:K.examplesList,children:ms.map(o=>{const l=`?example=${encodeURIComponent(o.key)}`,u=t===o.file,c=i===o.file;return r.jsx("a",{href:l,onClick:d=>d.stopPropagation(),children:r.jsx(kt,{className:`${K.uploadButton} ${c?K.error:u?K.uploaded:""}`,title:`Load example: ${o.label}`,"aria-label":`Load example: ${o.label}`,onClick:()=>void a(o.file),children:u?"Loading...":c?"Error":o.label})},o.file)})})]})},qf="_container_qa4t2_1",Wf="_fields_qa4t2_7",Hf="_label_qa4t2_13",Uf="_labelText_qa4t2_19",Gf="_input_qa4t2_24",je={container:qf,fields:Wf,label:Hf,labelText:Uf,input:Gf};function Jf({host:e,port:t,onChange:n}){const[i,s]=L.useState(e),[a,o]=L.useState(t);return L.useEffect(()=>s(e),[e]),L.useEffect(()=>o(t),[t]),r.jsx("div",{className:je.container,title:"WebSocket daemon connection settings",children:r.jsxs("div",{className:je.fields,children:[r.jsxs("label",{className:je.label,children:[r.jsx("span",{className:je.labelText,children:"Host:"}),r.jsx("input",{className:je.input,value:i,onChange:l=>{const u=l.target.value;s(u);const c=u.trim();c.length>0&&n({host:c,port:a})},placeholder:"localhost","aria-label":"Daemon host"})]}),r.jsxs("label",{className:je.label,children:[r.jsx("span",{className:je.labelText,children:"Port:"}),r.jsx("input",{className:je.input,value:a,onChange:l=>{const c=l.target.value.replace(/[^0-9]/g,"");o(c),c.length>0&&n({host:i,port:c})},placeholder:"7743","aria-label":"Daemon port"})]})]})})}const Kf="_container_3xbd7_1",Xf="_content_3xbd7_8",Yf="_leftColumn_3xbd7_14",Qf="_rightColumn_3xbd7_25",Zf="_title_3xbd7_41",ep="_description_3xbd7_49",tp="_infoSection_3xbd7_57",np="_infoTitle_3xbd7_64",ip="_infoIcon_3xbd7_74",sp="_infoText_3xbd7_81",rp="_stepsTitle_3xbd7_88",ap="_steps_3xbd7_88",op="_step_3xbd7_88",lp="_stepNumber_3xbd7_120",cp="_stepContent_3xbd7_136",up="_stepTitle_3xbd7_141",dp="_stepDescription_3xbd7_148",hp="_codeBlock_3xbd7_155",fp="_codeBlockWrapper_3xbd7_169",pp="_copyBtn_3xbd7_173",mp="_inlineCode_3xbd7_201",B={container:Kf,content:Xf,leftColumn:Yf,rightColumn:Qf,title:Zf,description:ep,infoSection:tp,infoTitle:np,infoIcon:ip,infoText:sp,stepsTitle:rp,steps:ap,step:op,stepNumber:lp,stepContent:cp,stepTitle:up,stepDescription:dp,codeBlock:hp,codeBlockWrapper:fp,copyBtn:pp,inlineCode:mp};function gp({onLoadExample:e,host:t="localhost",port:n="8081",onChange:i}){return r.jsx("div",{className:B.container,children:r.jsxs("div",{className:B.content,children:[r.jsxs("div",{className:B.leftColumn,children:[r.jsx("h1",{className:B.title,children:"Sandbox Not Connected"}),r.jsx("p",{className:B.description,children:"To work with Sandbox, please follow the setup instructions on the right."}),e&&r.jsx(zf,{onDataLoaded:e}),r.jsxs("div",{className:B.infoSection,children:[r.jsxs("h3",{className:B.infoTitle,children:[r.jsx("span",{className:B.infoIcon,"aria-hidden":"true",children:r.jsx(ws,{size:18})}),"What is Sandbox UI?"]}),r.jsx("p",{className:B.infoText,children:"Sandbox UI extends the standard TON Sandbox with transaction tracing capabilities, allowing you to visualize and debug smart contract interactions in web interface."})]})]}),r.jsxs("div",{className:B.rightColumn,children:[r.jsx("h2",{className:B.stepsTitle,children:"Setup Instructions"}),r.jsxs("div",{className:B.steps,children:[r.jsxs("div",{className:B.step,children:[r.jsx("div",{className:B.stepNumber,children:"1"}),r.jsxs("div",{className:B.stepContent,children:[r.jsx("h3",{className:B.stepTitle,children:"Install custom sandbox package"}),r.jsxs("p",{className:B.stepDescription,children:["Install development sandbox package and replace usages of"," ",r.jsx("code",{className:B.inlineCode,children:"@ton/sandbox"})," to"," ",r.jsx("code",{className:B.inlineCode,children:"ton-sandbox-dev"})]}),r.jsxs("div",{className:B.codeBlockWrapper,children:[r.jsx("code",{className:B.codeBlock,children:"yarn add ton-sandbox-dev@0.35.46"}),r.jsx(In,{className:B.copyBtn,value:"yarn add ton-sandbox-dev@0.35.46",title:"Command"})]})]})]}),r.jsxs("div",{className:B.step,children:[r.jsx("div",{className:B.stepNumber,children:"2"}),r.jsxs("div",{className:B.stepContent,children:[r.jsx("h3",{className:B.stepTitle,children:"Configure connection"}),r.jsx("p",{className:B.stepDescription,children:"Set sandbox server host and port if needed:"}),r.jsx(Jf,{host:t,port:n,onChange:i??(()=>{})})]})]}),r.jsxs("div",{className:B.step,children:[r.jsx("div",{className:B.stepNumber,children:"3"}),r.jsxs("div",{className:B.stepContent,children:[r.jsx("h3",{className:B.stepTitle,children:"Start the daemon"}),r.jsx("p",{className:B.stepDescription,children:"Open terminal, run the command and reload this page:"}),r.jsxs("div",{className:B.codeBlockWrapper,children:[r.jsx("code",{className:B.codeBlock,children:`./node_modules/.bin/sandbox-server -p ${n}`}),r.jsx(In,{className:B.copyBtn,value:`./node_modules/.bin/sandbox-server -p ${n}`,title:"Command"})]})]})]}),r.jsxs("div",{className:B.step,children:[r.jsx("div",{className:B.stepNumber,children:"4"}),r.jsxs("div",{className:B.stepContent,children:[r.jsx("h3",{className:B.stepTitle,children:"Change Blockchain in tests"}),r.jsxs("p",{className:B.stepDescription,children:["In your tests, use"," ",r.jsx("code",{className:B.inlineCode,children:"Blockchain.create({ webUI: true })"})]}),r.jsx("div",{className:B.codeBlockWrapper,children:r.jsx("code",{className:B.codeBlock,children:"await Blockchain.create({ webUI: true });"})})]})]}),r.jsxs("div",{className:B.step,children:[r.jsx("div",{className:B.stepNumber,children:"5"}),r.jsxs("div",{className:B.stepContent,children:[r.jsx("h3",{className:B.stepTitle,children:"Run your test"}),r.jsx("p",{className:B.stepDescription,children:"Data will automatically appear here"})]})]})]})]})]})})}const xp="_container_sx8tl_1",_p="_content_sx8tl_9",vp="_leftColumn_sx8tl_16",yp="_rightColumn_sx8tl_26",bp="_title_sx8tl_36",Np="_description_sx8tl_44",wp="_statusSection_sx8tl_52",Cp="_statusTitle_sx8tl_60",jp="_statusItem_sx8tl_67",Tp="_statusIcon_sx8tl_80",Sp="_tips_sx8tl_98",Mp="_tip_sx8tl_98",kp="_tipIcon_sx8tl_124",Ip="_tipContent_sx8tl_130",Ep="_tipTitle_sx8tl_134",$p="_tipText_sx8tl_141",Dp="_inlineCode_sx8tl_148",H={container:xp,content:_p,leftColumn:vp,rightColumn:yp,title:bp,description:Np,statusSection:wp,statusTitle:Cp,statusItem:jp,statusIcon:Tp,tips:Sp,tip:Mp,tipIcon:kp,tipContent:Ip,tipTitle:Ep,tipText:$p,inlineCode:Dp};function Lp(){return r.jsx("div",{className:H.container,children:r.jsxs("div",{className:H.content,children:[r.jsxs("div",{className:H.leftColumn,children:[r.jsx("h2",{className:H.title,children:"Waiting for Data"}),r.jsx("p",{className:H.description,children:"Connection established. Waiting for data from running tests..."}),r.jsxs("div",{className:H.statusSection,children:[r.jsx("h3",{className:H.statusTitle,children:"Connection Status"}),r.jsxs("div",{className:H.statusItem,children:[r.jsx(Fe,{svg:r.jsx(Us,{}),size:32,className:H.statusIcon}),r.jsx("span",{children:"WebSocket connected"})]}),r.jsxs("div",{className:H.statusItem,children:[r.jsx("div",{className:H.statusIcon,children:r.jsx(Ii,{loading:!0,message:""})}),r.jsx("span",{children:"Waiting for test data"})]})]})]}),r.jsx("div",{className:H.rightColumn,children:r.jsxs("div",{className:H.tips,children:[r.jsxs("div",{className:H.tip,children:[r.jsx(Fe,{svg:r.jsx(qs,{}),size:24,className:H.tipIcon}),r.jsxs("div",{className:H.tipContent,children:[r.jsx("h3",{className:H.tipTitle,children:"Set webUI: true in your Blockchain.create()"}),r.jsxs("p",{className:H.tipText,children:["Make sure your tests use"," ",r.jsx("code",{className:H.inlineCode,children:"Blockchain.create({ webUI: true })"})]})]})]}),r.jsxs("div",{className:H.tip,children:[r.jsx(Fe,{svg:r.jsx(Ws,{}),size:24,className:H.tipIcon}),r.jsxs("div",{className:H.tipContent,children:[r.jsx("h3",{className:H.tipTitle,children:"Run Your Tests"}),r.jsx("p",{className:H.tipText,children:"Execute your test suite and data will appear automatically in real-time"})]})]}),r.jsxs("div",{className:H.tip,children:[r.jsx(Fe,{svg:r.jsx(Hs,{}),size:24,className:H.tipIcon}),r.jsxs("div",{className:H.tipContent,children:[r.jsx("h3",{className:H.tipTitle,children:"Live Updates"}),r.jsx("p",{className:H.tipText,children:"No need to refresh - new transactions will appear as they are executed"})]})]}),r.jsxs("div",{className:H.tip,children:[r.jsx(Fe,{svg:r.jsx(Gs,{}),size:24,className:H.tipIcon}),r.jsxs("div",{className:H.tipContent,children:[r.jsx("h3",{className:H.tipTitle,children:"Debug Smart Contracts"}),r.jsx("p",{className:H.tipText,children:"Trace transactions step-by-step to understand contract execution flow and debug issues"})]})]})]})})]})})}const Ap="_container_1pzr7_1",Rp="_copyButton_1pzr7_10",Vp="_header_1pzr7_15",Op="_title_1pzr7_24",Fp="_copied_1pzr7_60",Bp="_content_1pzr7_75",Pp="_contentAssembly_1pzr7_81",zp="_contentHex_1pzr7_88",ye={container:Ap,copyButton:Rp,header:Vp,title:Op,copied:Fp,content:Bp,contentAssembly:Pp,contentHex:zp},qp=()=>r.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[r.jsx("rect",{x:"9",y:"9",width:"13",height:"13",rx:"2",ry:"2"}),r.jsx("path",{d:"M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"})]}),Wp=()=>r.jsx("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:r.jsx("polyline",{points:"20 6 9 17 4 12"})});function Ne({title:e,content:t,variant:n="hex",placeholder:i,className:s}){const[a,o]=L.useState(!1),l=t??i??"No content available",u=L.useCallback(()=>{t&&navigator.clipboard.writeText(t).then(()=>{o(!0)}).catch(d=>{console.error("Failed to copy: ",d)})},[t]);L.useEffect(()=>{if(a){const d=setTimeout(()=>{o(!1)},1500);return()=>clearTimeout(d)}},[a]);const c=n==="assembly"?`${ye.content} ${ye.contentAssembly}`:`${ye.content} ${ye.contentHex}`;return r.jsxs("div",{className:`${ye.container} ${s??""}`,children:[r.jsxs("div",{className:ye.header,children:[e&&r.jsx("div",{className:ye.title,children:e}),t&&r.jsx("button",{onClick:u,className:`${ye.copyButton} ${a?ye.copied:""}`,title:a?"Copied!":"Copy","aria-label":a?"Copied to clipboard":"Copy to clipboard",disabled:a,type:"button",children:a?r.jsx(Wp,{}):r.jsx(qp,{})})]}),r.jsx("div",{className:c,children:l})]})}const en=({onDataLoaded:e})=>{const[t,n]=L.useState("idle"),i=L.useRef(null),s=`${K.uploadButton} ${t==="success"?K.uploaded:t==="error"?K.error:""}`,a=L.useCallback(c=>{const d=c.target.files?.[0];if(!d)return;const f=new FileReader;f.onload=()=>{try{const h=f.result,p=JSON.parse(h);e(p),n("success"),setTimeout(()=>n("idle"),2e3)}catch(h){console.error("Error parsing uploaded file:",h),n("error"),setTimeout(()=>n("idle"),3e3)}},f.onerror=()=>{n("error"),setTimeout(()=>n("idle"),3e3)},f.readAsText(d),c.target.value=""},[e]),o=L.useCallback(()=>{i.current?.click()},[]),l=()=>{switch(t){case"success":return"Loaded!";case"error":return"Error";default:return"Upload"}},u=()=>{switch(t){case"success":return r.jsx(Ei,{size:16,"aria-hidden":"true"});case"error":return r.jsx(js,{size:16,"aria-hidden":"true"});default:return r.jsx(Cs,{size:16,"aria-hidden":"true"})}};return r.jsxs(r.Fragment,{children:[r.jsx("input",{ref:i,type:"file",accept:".json",onChange:a,style:{display:"none"},"aria-label":"Upload test data JSON file"}),r.jsxs(kt,{onClick:o,title:"Upload test data from JSON file",className:s,"aria-label":"Upload test data from JSON file",children:[u(),l()]}),r.jsxs("div",{className:"sr-only","aria-live":"polite","aria-atomic":"true",children:[t==="success"&&"Test data loaded successfully",t==="error"&&"Error loading test data file"]})]})};function Hp(){const[e,t]=X.useState(()=>{if(typeof window<"u"){const p=(localStorage.getItem("sandbox-daemon-host")??"").trim();return p.length?p:"localhost"}return"localhost"}),[n,i]=X.useState(()=>{if(typeof window<"u"){const p=(localStorage.getItem("sandbox-daemon-port")??"").replace(/[^0-9]/g,"");return p.length?p:"7743"}return"7743"}),s=X.useMemo(()=>`ws://${e}:${n}`,[e,n]),{tests:a,error:o,isConnected:l,isSharedData:u,rawData:c,loadFromFile:d}=ur({url:s});if(L.useEffect(()=>{const p=new URLSearchParams(window.location.search).get("example");p&&Pf(p).then(v=>{v&&d(v)})},[d]),u)return r.jsxs("div",{className:K.traceViewWrapper,children:[r.jsx(Lt,{pageTitle:"sandbox",titleBadgeText:"Alpha",titleBadgeColor:"green",children:r.jsx("div",{className:K.headerContent,children:r.jsx("div",{className:K.headerControls,children:r.jsx(en,{onDataLoaded:d})})})}),r.jsx("main",{className:K.appContainer,children:a.map((h,p)=>r.jsx(Si,{testData:h,testIndex:p+1,rawTestData:c.filter(v=>v.testName===h.testName)},h.testName))})]});const f=r.jsx(Lt,{pageTitle:"sandbox",titleBadgeText:"Alpha",titleBadgeColor:"green",children:r.jsx("div",{className:K.headerContent,children:r.jsx("div",{className:K.headerControls,children:r.jsx(en,{onDataLoaded:d})})})});return l?l&&a.length===0&&!o?r.jsxs("div",{className:K.traceViewWrapper,children:[f,r.jsx("div",{className:K.fullPageState,children:r.jsx(Lp,{})})]}):r.jsxs("div",{className:K.traceViewWrapper,children:[r.jsx(Lt,{pageTitle:"sandbox",titleBadgeText:"Alpha",titleBadgeColor:"blue",children:r.jsx("div",{className:K.headerContent,children:r.jsx("div",{className:K.headerControls,children:r.jsx(en,{onDataLoaded:d})})})}),r.jsxs("main",{className:K.appContainer,children:[o&&r.jsx("div",{className:K.errorMessage,children:o}),r.jsx("div",{children:a.map((h,p)=>r.jsx(Si,{testData:h,testIndex:p+1,rawTestData:c.filter(v=>v.testName===h.testName)},h.testName))})]})]}):r.jsxs("div",{className:K.traceViewWrapper,children:[f,r.jsx("div",{className:K.fullPageState,children:r.jsx(gp,{onLoadExample:d,host:e,port:n,onChange:({host:h,port:p})=>{const v=h.trim()??"localhost",T=(p??"").replace(/[^0-9]/g,"")??"7743";t(v),i(T),typeof window<"u"&&(localStorage.setItem("sandbox-daemon-host",v),localStorage.setItem("sandbox-daemon-port",T))}})})]})}Ts.createRoot(document.getElementById("root")).render(r.jsx(X.StrictMode,{children:r.jsx(Ss,{children:r.jsx(Ms,{children:r.jsx(ks,{children:r.jsx(Is,{loadingMessage:"Loading Sandbox page...",children:r.jsx(Hp,{})})})})})}));
